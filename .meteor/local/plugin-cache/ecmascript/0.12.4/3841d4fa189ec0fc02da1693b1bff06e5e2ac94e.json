{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Sandbox\\test\\imports\\ui\\pages\\this\\this.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/ui/pages/this/this.js","filename":"C:\\Sandbox\\test\\imports\\ui\\pages\\this\\this.js","passPerPreset":false,"envName":"development","cwd":"C:\\Sandbox\\test","root":"C:\\Sandbox\\test","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"C:\\Sandbox\\test\\imports\\ui\\pages\\this\\this.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/this/this.js"}},"code":"// var session = {\n//   audio: true,\n//   video: false\n// };\n//\n// navigator.getUserMedia = ( navigator.getUserMedia    || navigator.webkitGetUserMedia ||\n//                        navigator.mozGetUserMedia ||navigator.msGetUserMedia);\n// var aCtx;\n// var analyser;\n// var microphone;\n// if (navigator.getUserMedia) {\n//     navigator.getUserMedia({audio: true}, function(stream) {\n//         aCtx = new AudioContext();\n//         analyser = aCtx.createAnalyser();\n//         microphone = aCtx.createMediaStreamSource(stream);\n//         microphone.connect(analyser);\n//         analyser.connect(aCtx.destination);\n//     }, function (){console.warn(\"Error getting audio stream from getUserMedia\")});\n// };\n//\n// recordRTC.stopRecording(function(audioURL) {\n//   var formData = new FormData();\n//   formData.append('edition[audio]', recordRTC.getBlob())\n//   $.ajax({\n//     type: 'POST',\n//     url: 'http://172.16.1.143:3333/video',\n//     data: formData,\n//     contentType: false,\n//     cache: false,\n//     processData: false,\n//   })\n// });\n// function onVideoFail(e) {\n//     console.log('webcam fail!', e);\n//   };\n//\n// function hasGetUserMedia() {\n//   // Note: Opera is unprefixed.\n//   return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||\n//             navigator.mozGetUserMedia || navigator.msGetUserMedia);\n// }\n//\n// if (hasGetUserMedia()) {\n//   // Good to go!\n// } else {\n//   alert('getUserMedia() is not supported in your browser');\n// }\n//\n// window.URL = window.URL || window.webkitURL;\n// navigator.getUserMedia  = navigator.getUserMedia ||\n//                          navigator.webkitGetUserMedia ||\n//                           navigator.mozGetUserMedia ||\n//                            navigator.msGetUserMedia;\n//\n// var video = document.querySelector('video');\n// var streamRecorder;\n// var webcamstream;\n//\n// if (navigator.getUserMedia) {\n//   navigator.getUserMedia({audio: true, video: true}, function(stream) {\n//     video.src = window.URL.createObjectURL(stream);\n//     webcamstream = stream;\n// //  streamrecorder = webcamstream.record();\n//   }, onVideoFail);\n// } else {\n//     alert ('failed');\n// }\n//\n// function startRecording() {\n//     streamRecorder = webcamstream.record();\n//     setTimeout(stopRecording, 10000);\n// }\n// function stopRecording() {\n//     streamRecorder.getRecordedData(postVideoToServer);\n// }\n// function postVideoToServer(videoblob) {\n//\n//     var data = {};\n//     data.video = videoblob;\n//     data.metadata = 'test metadata';\n//     data.action = \"upload_video\";\n//     jQuery.post(\"http://www.foundthru.co.uk/uploadvideo.php\", data, onUploadSuccess);\n// }\n// function onUploadSuccess() {\n//     alert ('video uploaded');\n// }\n//\n//\n// <div id=\"webcamcontrols\">\n//     <button class=\"recordbutton\" onclick=\"startRecording();\">RECORD</button>\n// </div>\n// var recordedChunks = [];\n//\n// function gotMedia(stream) {\n//   // |video| shows a live view of the captured MediaStream.\n//   var video = document.querySelector('video');\n//   video.src = URL.createObjectURL(stream);\n//\n//   var recorder = null;\n//   try {\n//     recorder = new MediaRecorder(stream, {mimeType : \"video/webm\"});\n//   } catch (e) {\n//     console.error('Exception while creating MediaRecorder: ' + e);\n//     return;\n//   }\n//\n//   recorder.ondataavailable = (event) => {\n//     console.log(' Recorded chunk of size ' + event.data.size + \"B\");\n//     recordedChunks.push(event.data);\n//   };\n//\n//   recorder.start(100);\n// }\n//\n// navigator.mediaDevices.getUserMedia({video: true , audio: true})\n//     .then(gotMedia)\n//     .catch(e => { console.error('getUserMedia() failed: ' + e); });\n\n/*\r\nCopyright 2017 Google Inc.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\n'use strict';\n/* globals MediaRecorder */\n// This code is adapted from\n// https://rawgit.com/Miguelao/demos/master/mediarecorder.html\n\n/*\r\nCopyright 2017 Google Inc.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\n\n'use strict';\n/* globals MediaRecorder */\n// This code is adapted from\n// https://rawgit.com/Miguelao/demos/master/mediarecorder.html\n\nvar mediaSource = new MediaSource();\nmediaSource.addEventListener('sourceopen', handleSourceOpen, false);\nvar mediaRecorder;\nvar recordedBlobs;\nvar sourceBuffer;\nvar gumVideo = document.querySelector('video#gum');\nvar recordedVideo = document.querySelector('video#recorded');\nvar recordButton = document.querySelector('button#record');\nvar playButton = document.querySelector('button#play');\nvar downloadButton = document.querySelector('button#download');\nrecordButton.onclick = toggleRecording;\nplayButton.onclick = play;\ndownloadButton.onclick = download; // window.isSecureContext could be used for Chrome\n\nvar isSecureOrigin = location.protocol === 'https:' || location.host === 'localhost';\n\nif (!isSecureOrigin) {\n  alert('getUserMedia() must be run from a secure origin: HTTPS or localhost.' + '\\n\\nChanging protocol to HTTPS');\n  location.protocol = 'HTTPS';\n}\n\nvar constraints = {\n  audio: false,\n  video: true\n};\nnavigator.mediaDevices.getUserMedia(constraints).then(successCallback, errorCallback);\n\nfunction successCallback(stream) {\n  console.log('getUserMedia() got stream: ', stream);\n  window.stream = stream;\n  gumVideo.srcObject = stream;\n}\n\nfunction errorCallback(error) {\n  console.log('navigator.getUserMedia error: ', error);\n} // navigator.mediaDevices.getUserMedia(constraints)\n// .then(function(stream) {\n//   console.log('getUserMedia() got stream: ', stream);\n//   window.stream = stream; // make available to browser console\n//   if (window.URL) {\n//     gumVideo.src = window.URL.createObjectURL(stream);\n//   } else {\n//     gumVideo.src = stream;\n//   }\n// }).catch(function(error) {\n//   console.log('navigator.getUserMedia error: ', error);\n// });\n\n\nfunction handleSourceOpen(event) {\n  console.log('MediaSource opened');\n  sourceBuffer = mediaSource.addSourceBuffer('video/webm; codecs=\"vp8\"');\n  console.log('Source buffer: ', sourceBuffer);\n}\n\nfunction handleDataAvailable(event) {\n  if (event.data && event.data.size > 0) {\n    recordedBlobs.push(event.data);\n  }\n}\n\nfunction handleStop(event) {\n  console.log('Recorder stopped: ', event);\n}\n\nfunction toggleRecording() {\n  if (recordButton.textContent === 'Start Recording') {\n    startRecording();\n  } else {\n    stopRecording();\n    recordButton.textContent = 'Start Recording';\n    playButton.disabled = false;\n    downloadButton.disabled = false;\n  }\n} // The nested try blocks will be simplified when Chrome 47 moves to Stable\n\n\nfunction startRecording() {\n  var options = {\n    mimeType: 'video/webm',\n    bitsPerSecond: 100000\n  };\n  recordedBlobs = [];\n\n  try {\n    mediaRecorder = new MediaRecorder(window.stream, options);\n  } catch (e0) {\n    console.log('Unable to create MediaRecorder with options Object: ', e0);\n\n    try {\n      options = {\n        mimeType: 'video/webm,codecs=vp9',\n        bitsPerSecond: 100000\n      };\n      mediaRecorder = new MediaRecorder(window.stream, options);\n    } catch (e1) {\n      console.log('Unable to create MediaRecorder with options Object: ', e1);\n\n      try {\n        options = 'video/vp8'; // Chrome 47\n\n        mediaRecorder = new MediaRecorder(window.stream, options);\n      } catch (e2) {\n        alert('MediaRecorder is not supported by this browser.\\n\\n' + 'Try Firefox 29 or later, or Chrome 47 or later, with Enable experimental Web Platform features enabled from chrome://flags.');\n        console.error('Exception while creating MediaRecorder:', e2);\n        return;\n      }\n    }\n  }\n\n  console.log('Created MediaRecorder', mediaRecorder, 'with options', options);\n  recordButton.textContent = 'Stop Recording';\n  playButton.disabled = true;\n  downloadButton.disabled = true;\n  mediaRecorder.onstop = handleStop;\n  mediaRecorder.ondataavailable = handleDataAvailable;\n  mediaRecorder.start(10); // collect 10ms of data\n\n  console.log('MediaRecorder started', mediaRecorder);\n}\n\nfunction stopRecording() {\n  mediaRecorder.stop();\n  console.log('Recorded Blobs: ', recordedBlobs);\n  recordedVideo.controls = true;\n}\n\nfunction play() {\n  var superBuffer = new Blob(recordedBlobs, {\n    type: 'video/webm'\n  });\n  recordedVideo.src = window.URL.createObjectURL(superBuffer);\n}\n\nfunction download() {\n  var blob = new Blob(recordedBlobs, {\n    type: 'video/webm'\n  });\n  var url = window.URL.createObjectURL(blob);\n  var a = document.createElement('a');\n  a.style.display = 'none';\n  a.href = url;\n  a.download = 'test.webm';\n  document.body.appendChild(a);\n  a.click();\n  setTimeout(function () {\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  }, 100);\n}","map":{"version":3,"sources":["imports/ui/pages/this/this.js"],"names":["mediaSource","MediaSource","addEventListener","handleSourceOpen","mediaRecorder","recordedBlobs","sourceBuffer","gumVideo","document","querySelector","recordedVideo","recordButton","playButton","downloadButton","onclick","toggleRecording","play","download","isSecureOrigin","location","protocol","host","alert","constraints","audio","video","navigator","mediaDevices","getUserMedia","then","successCallback","errorCallback","stream","console","log","window","srcObject","error","event","addSourceBuffer","handleDataAvailable","data","size","push","handleStop","textContent","startRecording","stopRecording","disabled","options","mimeType","bitsPerSecond","MediaRecorder","e0","e1","e2","onstop","ondataavailable","start","stop","controls","superBuffer","Blob","type","src","URL","createObjectURL","blob","url","a","createElement","style","display","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;;;;;;;;;;;;;AAgBA;AAEA;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;;AAgBA;AAEA;AAEA;AACA;;AAEA,IAAIA,WAAW,GAAG,IAAIC,WAAJ,EAAlB;AACAD,WAAW,CAACE,gBAAZ,CAA6B,YAA7B,EAA2CC,gBAA3C,EAA6D,KAA7D;AACA,IAAIC,aAAJ;AACA,IAAIC,aAAJ;AACA,IAAIC,YAAJ;AAEA,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAf;AACA,IAAIC,aAAa,GAAGF,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAApB;AAEA,IAAIE,YAAY,GAAGH,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAnB;AACA,IAAIG,UAAU,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAjB;AACA,IAAII,cAAc,GAAGL,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAArB;AACAE,YAAY,CAACG,OAAb,GAAuBC,eAAvB;AACAH,UAAU,CAACE,OAAX,GAAqBE,IAArB;AACAH,cAAc,CAACC,OAAf,GAAyBG,QAAz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","sourcesContent":["\r\n// var session = {\r\n//   audio: true,\r\n//   video: false\r\n// };\r\n//\r\n// navigator.getUserMedia = ( navigator.getUserMedia    || navigator.webkitGetUserMedia ||\r\n//                        navigator.mozGetUserMedia ||navigator.msGetUserMedia);\r\n// var aCtx;\r\n// var analyser;\r\n// var microphone;\r\n// if (navigator.getUserMedia) {\r\n//     navigator.getUserMedia({audio: true}, function(stream) {\r\n//         aCtx = new AudioContext();\r\n//         analyser = aCtx.createAnalyser();\r\n//         microphone = aCtx.createMediaStreamSource(stream);\r\n//         microphone.connect(analyser);\r\n//         analyser.connect(aCtx.destination);\r\n//     }, function (){console.warn(\"Error getting audio stream from getUserMedia\")});\r\n// };\r\n//\r\n// recordRTC.stopRecording(function(audioURL) {\r\n//   var formData = new FormData();\r\n//   formData.append('edition[audio]', recordRTC.getBlob())\r\n//   $.ajax({\r\n//     type: 'POST',\r\n//     url: 'http://172.16.1.143:3333/video',\r\n//     data: formData,\r\n//     contentType: false,\r\n//     cache: false,\r\n//     processData: false,\r\n//   })\r\n// });\r\n// function onVideoFail(e) {\r\n//     console.log('webcam fail!', e);\r\n//   };\r\n//\r\n// function hasGetUserMedia() {\r\n//   // Note: Opera is unprefixed.\r\n//   return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||\r\n//             navigator.mozGetUserMedia || navigator.msGetUserMedia);\r\n// }\r\n//\r\n// if (hasGetUserMedia()) {\r\n//   // Good to go!\r\n// } else {\r\n//   alert('getUserMedia() is not supported in your browser');\r\n// }\r\n//\r\n// window.URL = window.URL || window.webkitURL;\r\n// navigator.getUserMedia  = navigator.getUserMedia ||\r\n//                          navigator.webkitGetUserMedia ||\r\n//                           navigator.mozGetUserMedia ||\r\n//                            navigator.msGetUserMedia;\r\n//\r\n// var video = document.querySelector('video');\r\n// var streamRecorder;\r\n// var webcamstream;\r\n//\r\n// if (navigator.getUserMedia) {\r\n//   navigator.getUserMedia({audio: true, video: true}, function(stream) {\r\n//     video.src = window.URL.createObjectURL(stream);\r\n//     webcamstream = stream;\r\n// //  streamrecorder = webcamstream.record();\r\n//   }, onVideoFail);\r\n// } else {\r\n//     alert ('failed');\r\n// }\r\n//\r\n// function startRecording() {\r\n//     streamRecorder = webcamstream.record();\r\n//     setTimeout(stopRecording, 10000);\r\n// }\r\n// function stopRecording() {\r\n//     streamRecorder.getRecordedData(postVideoToServer);\r\n// }\r\n// function postVideoToServer(videoblob) {\r\n//\r\n//     var data = {};\r\n//     data.video = videoblob;\r\n//     data.metadata = 'test metadata';\r\n//     data.action = \"upload_video\";\r\n//     jQuery.post(\"http://www.foundthru.co.uk/uploadvideo.php\", data, onUploadSuccess);\r\n// }\r\n// function onUploadSuccess() {\r\n//     alert ('video uploaded');\r\n// }\r\n//\r\n//\r\n// <div id=\"webcamcontrols\">\r\n//     <button class=\"recordbutton\" onclick=\"startRecording();\">RECORD</button>\r\n// </div>\r\n// var recordedChunks = [];\r\n//\r\n// function gotMedia(stream) {\r\n//   // |video| shows a live view of the captured MediaStream.\r\n//   var video = document.querySelector('video');\r\n//   video.src = URL.createObjectURL(stream);\r\n//\r\n//   var recorder = null;\r\n//   try {\r\n//     recorder = new MediaRecorder(stream, {mimeType : \"video/webm\"});\r\n//   } catch (e) {\r\n//     console.error('Exception while creating MediaRecorder: ' + e);\r\n//     return;\r\n//   }\r\n//\r\n//   recorder.ondataavailable = (event) => {\r\n//     console.log(' Recorded chunk of size ' + event.data.size + \"B\");\r\n//     recordedChunks.push(event.data);\r\n//   };\r\n//\r\n//   recorder.start(100);\r\n// }\r\n//\r\n// navigator.mediaDevices.getUserMedia({video: true , audio: true})\r\n//     .then(gotMedia)\r\n//     .catch(e => { console.error('getUserMedia() failed: ' + e); });\r\n/*\r\nCopyright 2017 Google Inc.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\r\n\r\n'use strict';\r\n\r\n/* globals MediaRecorder */\r\n\r\n// This code is adapted from\r\n// https://rawgit.com/Miguelao/demos/master/mediarecorder.html\r\n\r\n/*\r\nCopyright 2017 Google Inc.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\r\n\r\n'use strict';\r\n\r\n/* globals MediaRecorder */\r\n\r\n// This code is adapted from\r\n// https://rawgit.com/Miguelao/demos/master/mediarecorder.html\r\n\r\nvar mediaSource = new MediaSource();\r\nmediaSource.addEventListener('sourceopen', handleSourceOpen, false);\r\nvar mediaRecorder;\r\nvar recordedBlobs;\r\nvar sourceBuffer;\r\n\r\nvar gumVideo = document.querySelector('video#gum');\r\nvar recordedVideo = document.querySelector('video#recorded');\r\n\r\nvar recordButton = document.querySelector('button#record');\r\nvar playButton = document.querySelector('button#play');\r\nvar downloadButton = document.querySelector('button#download');\r\nrecordButton.onclick = toggleRecording;\r\nplayButton.onclick = play;\r\ndownloadButton.onclick = download;\r\n\r\n// window.isSecureContext could be used for Chrome\r\nvar isSecureOrigin = location.protocol === 'https:' ||\r\nlocation.host === 'localhost';\r\nif (!isSecureOrigin) {\r\n  alert('getUserMedia() must be run from a secure origin: HTTPS or localhost.' +\r\n    '\\n\\nChanging protocol to HTTPS');\r\n  location.protocol = 'HTTPS';\r\n}\r\n\r\nvar constraints = {\r\n  audio: false,\r\n  video: true\r\n};\r\n\r\nnavigator.mediaDevices.getUserMedia(\r\n  constraints\r\n).then(\r\n  successCallback,\r\n  errorCallback\r\n);\r\n\r\nfunction successCallback(stream) {\r\n  console.log('getUserMedia() got stream: ', stream);\r\n  window.stream = stream;\r\n  gumVideo.srcObject = stream;\r\n}\r\n\r\nfunction errorCallback(error) {\r\n  console.log('navigator.getUserMedia error: ', error);\r\n}\r\n\r\n// navigator.mediaDevices.getUserMedia(constraints)\r\n// .then(function(stream) {\r\n//   console.log('getUserMedia() got stream: ', stream);\r\n//   window.stream = stream; // make available to browser console\r\n//   if (window.URL) {\r\n//     gumVideo.src = window.URL.createObjectURL(stream);\r\n//   } else {\r\n//     gumVideo.src = stream;\r\n//   }\r\n// }).catch(function(error) {\r\n//   console.log('navigator.getUserMedia error: ', error);\r\n// });\r\n\r\nfunction handleSourceOpen(event) {\r\n  console.log('MediaSource opened');\r\n  sourceBuffer = mediaSource.addSourceBuffer('video/webm; codecs=\"vp8\"');\r\n  console.log('Source buffer: ', sourceBuffer);\r\n}\r\n\r\nfunction handleDataAvailable(event) {\r\n  if (event.data && event.data.size > 0) {\r\n    recordedBlobs.push(event.data);\r\n  }\r\n}\r\n\r\nfunction handleStop(event) {\r\n  console.log('Recorder stopped: ', event);\r\n}\r\n\r\nfunction toggleRecording() {\r\n  if (recordButton.textContent === 'Start Recording') {\r\n    startRecording();\r\n  } else {\r\n    stopRecording();\r\n    recordButton.textContent = 'Start Recording';\r\n    playButton.disabled = false;\r\n    downloadButton.disabled = false;\r\n  }\r\n}\r\n\r\n// The nested try blocks will be simplified when Chrome 47 moves to Stable\r\nfunction startRecording() {\r\n  var options = {mimeType: 'video/webm', bitsPerSecond: 100000};\r\n  recordedBlobs = [];\r\n  try {\r\n    mediaRecorder = new MediaRecorder(window.stream, options);\r\n  } catch (e0) {\r\n    console.log('Unable to create MediaRecorder with options Object: ', e0);\r\n    try {\r\n      options = {mimeType: 'video/webm,codecs=vp9', bitsPerSecond: 100000};\r\n      mediaRecorder = new MediaRecorder(window.stream, options);\r\n    } catch (e1) {\r\n      console.log('Unable to create MediaRecorder with options Object: ', e1);\r\n      try {\r\n        options = 'video/vp8'; // Chrome 47\r\n        mediaRecorder = new MediaRecorder(window.stream, options);\r\n      } catch (e2) {\r\n        alert('MediaRecorder is not supported by this browser.\\n\\n' +\r\n            'Try Firefox 29 or later, or Chrome 47 or later, with Enable experimental Web Platform features enabled from chrome://flags.');\r\n        console.error('Exception while creating MediaRecorder:', e2);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n  console.log('Created MediaRecorder', mediaRecorder, 'with options', options);\r\n  recordButton.textContent = 'Stop Recording';\r\n  playButton.disabled = true;\r\n  downloadButton.disabled = true;\r\n  mediaRecorder.onstop = handleStop;\r\n  mediaRecorder.ondataavailable = handleDataAvailable;\r\n  mediaRecorder.start(10); // collect 10ms of data\r\n  console.log('MediaRecorder started', mediaRecorder);\r\n}\r\n\r\nfunction stopRecording() {\r\n  mediaRecorder.stop();\r\n  console.log('Recorded Blobs: ', recordedBlobs);\r\n  recordedVideo.controls = true;\r\n}\r\n\r\nfunction play() {\r\n  var superBuffer = new Blob(recordedBlobs, {type: 'video/webm'});\r\n  recordedVideo.src = window.URL.createObjectURL(superBuffer);\r\n}\r\n\r\nfunction download() {\r\n  var blob = new Blob(recordedBlobs, {type: 'video/webm'});\r\n  var url = window.URL.createObjectURL(blob);\r\n  var a = document.createElement('a');\r\n  a.style.display = 'none';\r\n  a.href = url;\r\n  a.download = 'test.webm';\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  setTimeout(function() {\r\n    document.body.removeChild(a);\r\n    window.URL.revokeObjectURL(url);\r\n  }, 100);\r\n}\r\n"]},"sourceType":"script","hash":"3841d4fa189ec0fc02da1693b1bff06e5e2ac94e"}
