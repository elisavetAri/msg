[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nFlowRouter = Package['kadira:flow-router'].FlowRouter;\nBlazeLayout = Package['kadira:blaze-layout'].BlazeLayout;\nmoment = Package['momentjs:moment'].moment;\nSession = Package.session.Session;\nHTTP = Package.http.HTTP;\nlodash = Package['erasaur:meteor-lodash'].lodash;\n_ = Package['erasaur:meteor-lodash']._;\nPersistentSession = Package['cultofcoders:persistent-session'].PersistentSession;\nemojione = Package['emojione:emojione'].emojione;\nMeteorEmoji = Package['georgemccann:meteor-emoji-picker'].MeteorEmoji;\nTabular = Package['aldeed:tabular'].Tabular;\nTimeSync = Package['mizzao:timesync'].TimeSync;\nUserStatus = Package['mizzao:user-status'].UserStatus;\nAudioRecorder = Package['maxencecornet:audio-recorder'].AudioRecorder;\nMeteorCamera = Package['mdg:camera'].MeteorCamera;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package['templating-runtime'].Template;\nmeteorInstall = Package.modules.meteorInstall;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\nSymbol = Package['ecmascript-runtime-client'].Symbol;\nMap = Package['ecmascript-runtime-client'].Map;\nSet = Package['ecmascript-runtime-client'].Set;\n\n","servePath":"/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"imports\":{\"ui\":{\"layout\":{\"body\":{\"body.html\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/layout/body/body.html                                                                                   //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./template.body.js\", { \"*\": \"*+\" });\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.body.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/layout/body/template.body.js                                                                            //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n\nTemplate.__checkName(\"App_Body\");\nTemplate[\"App_Body\"] = new Template(\"Template.App_Body\", (function() {\n  var view = this;\n  return Blaze._TemplateWith(function() {\n    return {\n      template: Spacebars.call(view.lookup(\"Body\"))\n    };\n  }, function() {\n    return Spacebars.include(function() {\n      return Spacebars.call(Template.__dynamic);\n    });\n  });\n}));\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"body.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/layout/body/body.js                                                                                     //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./body.html\");\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"pages\":{\"forgotPassword\":{\"password.html\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/password.html                                                                      //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./template.password.js\", { \"*\": \"*+\" });\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.password.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/template.password.js                                                               //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n\nTemplate.__checkName(\"App_password\");\nTemplate[\"App_password\"] = new Template(\"Template.App_password\", (function() {\n  var view = this;\n  return [ HTML.Raw('<link rel=\"shortcut icon\" type=\"image/png\" href=\"/media/images/favicon.png\">\\n    <link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS 2.0\" href=\"http://www.datatables.net/rss.xml\">\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/media/css/site-examples.css?_=8ffc0b31bc8d9ff82fbb94689dd1d7ff\">\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css\">\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css\">\\n    '), HTML.H4(Blaze.View(\"lookup:reactiveVarHelper\", function() {\n    return Spacebars.mustache(view.lookup(\"reactiveVarHelper\"));\n  })), HTML.Raw(\"\\n  <!-- DataTable start -->\\n  \"), HTML.DIV({\n    class: \"absolute\"\n  }, \"\\n    \", HTML.TABLE({\n    class: \"table fixed table-striped table-bordered dataTable\",\n    id: \"table\",\n    style: \"width:100%\",\n    role: \"grid\",\n    \"aria-describedby\": \"example_info\"\n  }, \"\\n      \", HTML.THEAD(\"\\n        \", HTML.TR({\n    role: \"row\",\n    class: \"odd \"\n  }, \"\\n          \", HTML.TH({\n    id: \"sort\",\n    class: \"sorting_asc\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-sort\": \"ascending\",\n    \"aria-label\": \"Name: activate to sort column descending\",\n    style: \"width: 102.067px; \"\n  }, \"Name\"), \"\\n          \", HTML.TH({\n    id: \"sort\",\n    class: \"sorting_asc\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-sort\": \"ascending\",\n    \"aria-label\": \"Name: activate to sort column descending\",\n    style: \"width: 102.067px; \"\n  }, \"Last Name\"), \"\\n          \", HTML.TH({\n    class: \"sorting\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-label\": \"Position: activate to sort column ascending\",\n    style: \"width: 175.133px;\"\n  }, \"password\"), \"\\n          \", HTML.TH({\n    class: \"sorting\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-label\": \"Office: activate to sort column ascending\",\n    style: \"width: 73.8px;\"\n  }, \"Phone\"), \"\\n          \", HTML.TH({\n    class: \"sorting\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-label\": \"Start date: activate to sort column ascending\",\n    style: \"width: 61.5333px;\"\n  }, \"Email\"), \"\\n        \"), \"\\n      \"), \"\\n      \", HTML.TBODY(\"\\n  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getUsers\"));\n  }, function() {\n    return [ \"\\n  \", HTML.TR(\"\\n    \", HTML.TD(Blaze.View(\"lookup:name\", function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    })), \"\\n    \", HTML.TD(Blaze.View(\"lookup:lastName\", function() {\n      return Spacebars.mustache(view.lookup(\"lastName\"));\n    })), \"\\n    \", HTML.TD(Blaze.View(\"lookup:password\", function() {\n      return Spacebars.mustache(view.lookup(\"password\"));\n    })), \"\\n    \", HTML.TD(Blaze.View(\"lookup:phone\", function() {\n      return Spacebars.mustache(view.lookup(\"phone\"));\n    })), \"\\n    \", HTML.TD(Blaze.View(\"lookup:email\", function() {\n      return Spacebars.mustache(view.lookup(\"email\"));\n    })), \"\\n    \", HTML.Comment(' <button class=\"remove dtr-data\" data-position=\"bottom\" data-tooltip=\"Remove Record\">Remove</button> '), \"\\n    \", HTML.INPUT({\n      name: \"input\",\n      id: \"input\",\n      style: \"width: 100px\",\n      class: function() {\n        return [ \"input-\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      },\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"name\"));\n      }\n    }), \"\\n    \", HTML.BUTTON({\n      type: \"button\",\n      name: \"update\",\n      class: \"update btn btn-secondary btn-sm\",\n      for: \"input\"\n    }, \"Name\"), \"\\n\\n    \", HTML.INPUT({\n      name: \"lsname\",\n      id: \"lsname\",\n      style: \"width: 100px\",\n      class: function() {\n        return [ \"lsname-\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      },\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"lastName\"));\n      }\n    }), \"\\n    \", HTML.BUTTON({\n      type: \"button\",\n      name: \"lname\",\n      class: \"lname btn btn-secondary btn-sm\",\n      for: \"lname\"\n    }, \"Last Name\"), \"\\n\\n    \", HTML.INPUT({\n      name: \"passwords\",\n      id: \"passwords\",\n      style: \"width: 100px\",\n      class: function() {\n        return [ \"passwords-\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      },\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"password\"));\n      }\n    }), \"\\n    \", HTML.BUTTON({\n      class: \"changEPassword  btn btn-secondary btn-sm\",\n      \"data-position\": \"left\",\n      \"data-tooltip\": \"changEPassword\",\n      for: \"password\"\n    }, \"Password\"), \"\\n\\n    \", HTML.INPUT({\n      name: \"phone\",\n      id: \"phone\",\n      style: \"width: 100px\",\n      class: function() {\n        return [ \"phone-\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      },\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"phone\"));\n      }\n    }), \"\\n    \", HTML.BUTTON({\n      class: \"changephone btn btn-secondary btn-sm\",\n      \"data-position\": \"left\",\n      \"data-tooltip\": \"changephone\",\n      for: \"phone\"\n    }, \"Phone\"), \"\\n\\n    \", HTML.INPUT({\n      name: \"emails\",\n      type: \"email\",\n      style: \"width: 100px\",\n      id: \"emails\",\n      class: function() {\n        return [ \"emails-\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      },\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"email\"));\n      }\n    }), \"\\n    \", HTML.BUTTON({\n      type: \"email\",\n      class: \"changeemail btn btn-secondary btn-sm\",\n      \"data-position\": \"left\",\n      \"data-tooltip\": \"changeemail\",\n      for: \"emails\"\n    }, \"Email\"), \"\\n  \"), \"\\n  \" ];\n  }), \"\\n  \"), \"\\n  \"), \"\\n  \", HTML.Raw(\"<!-- end of Datatable -->\"), \"\\n  \", HTML.Raw('<button type=\"button\" id=\"home\" class=\"logout btn btn-default btn-sm\"><span class=\"glyphicon glyphicon-log-out\"></span> Home</button>'), \"\\n  \") ];\n}));\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.bootstrap4.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/dataTables.bootstrap4.min.js                                                       //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables Bootstrap 4 integration\n ©2011-2017 SpryMedia Ltd - datatables.net/license\n*/\n(function(b){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(a){return b(a,window,document)}):\"object\"===typeof exports?module.exports=function(a,d){a||(a=window);if(!d||!d.fn.dataTable)d=require(\"datatables.net\")(a,d).$;return b(d,a,a.document)}:b(jQuery,window,document)})(function(b,a,d,m){var f=b.fn.dataTable;b.extend(!0,f.defaults,{dom:\"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\",\nrenderer:\"bootstrap\"});b.extend(f.ext.classes,{sWrapper:\"dataTables_wrapper dt-bootstrap4\",sFilterInput:\"form-control form-control-sm\",sLengthSelect:\"custom-select custom-select-sm form-control form-control-sm\",sProcessing:\"dataTables_processing card\",sPageButton:\"paginate_button page-item\"});f.ext.renderer.pageButton.bootstrap=function(a,h,r,s,j,n){var o=new f.Api(a),t=a.oClasses,k=a.oLanguage.oPaginate,u=a.oLanguage.oAria.paginate||{},e,g,p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault();\n!b(a.currentTarget).hasClass(\"disabled\")&&o.page()!=a.data.action&&o.page(a.data.action).draw(\"page\")};l=0;for(h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{g=e=\"\";switch(c){case \"ellipsis\":e=\"&#x2026;\";g=\"disabled\";break;case \"first\":e=k.sFirst;g=c+(0<j?\"\":\" disabled\");break;case \"previous\":e=k.sPrevious;g=c+(0<j?\"\":\" disabled\");break;case \"next\":e=k.sNext;g=c+(j<n-1?\"\":\" disabled\");break;case \"last\":e=k.sLast;g=c+(j<n-1?\"\":\" disabled\");break;default:e=c+1,g=j===c?\"active\":\"\"}e&&(i=b(\"<li>\",\n{\"class\":t.sPageButton+\" \"+g,id:0===r&&\"string\"===typeof c?a.sTableId+\"_\"+c:null}).append(b(\"<a>\",{href:\"#\",\"aria-controls\":a.sTableId,\"aria-label\":u[c],\"data-dt-idx\":p,tabindex:a.iTabIndex,\"class\":\"page-link\"}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}},i;try{i=b(h).find(d.activeElement).data(\"dt-idx\")}catch(v){}q(b(h).empty().html('<ul class=\"pagination\"/>').children(\"ul\"),s);i!==m&&b(h).find(\"[data-dt-idx=\"+i+\"]\").focus()};return f});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.foundation.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/dataTables.foundation.min.js                                                       //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables Foundation integration\n ©2011-2015 SpryMedia Ltd - datatables.net/license\n*/\n(function(d){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(a){return d(a,window,document)}):\"object\"===typeof exports?module.exports=function(a,b){a||(a=window);if(!b||!b.fn.dataTable)b=require(\"datatables.net\")(a,b).$;return d(b,a,a.document)}:d(jQuery,window,document)})(function(d){var a=d.fn.dataTable,b=d('<meta class=\"foundation-mq\"/>').appendTo(\"head\");a.ext.foundationVersion=b.css(\"font-family\").match(/small|medium|large/)?6:5;b.remove();d.extend(a.ext.classes,\n{sWrapper:\"dataTables_wrapper dt-foundation\",sProcessing:\"dataTables_processing panel callout\"});d.extend(!0,a.defaults,{dom:\"<'row grid-x'<'small-6 columns cell'l><'small-6 columns cell'f>r>t<'row grid-x'<'small-6 columns cell'i><'small-6 columns cell'p>>\",renderer:\"foundation\"});a.ext.renderer.pageButton.foundation=function(b,l,r,s,e,i){var m=new a.Api(b),t=b.oClasses,j=b.oLanguage.oPaginate,u=b.oLanguage.oAria.paginate||{},f,h,g,v=5===a.ext.foundationVersion,q=function(a,n){var k,o,p,c,l=function(a){a.preventDefault();\n!d(a.currentTarget).hasClass(\"unavailable\")&&m.page()!=a.data.action&&m.page(a.data.action).draw(\"page\")};k=0;for(o=n.length;k<o;k++)if(c=n[k],d.isArray(c))q(a,c);else{h=f=\"\";g=null;switch(c){case \"ellipsis\":f=\"&#x2026;\";h=\"unavailable disabled\";g=null;break;case \"first\":f=j.sFirst;h=c+(0<e?\"\":\" unavailable disabled\");g=0<e?\"a\":null;break;case \"previous\":f=j.sPrevious;h=c+(0<e?\"\":\" unavailable disabled\");g=0<e?\"a\":null;break;case \"next\":f=j.sNext;h=c+(e<i-1?\"\":\" unavailable disabled\");g=e<i-1?\"a\":\nnull;break;case \"last\":f=j.sLast;h=c+(e<i-1?\"\":\" unavailable disabled\");g=e<i-1?\"a\":null;break;default:f=c+1,h=e===c?\"current\":\"\",g=e===c?null:\"a\"}v&&(g=\"a\");f&&(p=d(\"<li>\",{\"class\":t.sPageButton+\" \"+h,\"aria-controls\":b.sTableId,\"aria-label\":u[c],tabindex:b.iTabIndex,id:0===r&&\"string\"===typeof c?b.sTableId+\"_\"+c:null}).append(g?d(\"<\"+g+\"/>\",{href:\"#\"}).html(f):f).appendTo(a),b.oApi._fnBindAction(p,{action:c},l))}};q(d(l).empty().html('<ul class=\"pagination\"/>').children(\"ul\"),s)};return a});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.jqueryui.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/dataTables.jqueryui.min.js                                                         //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables jQuery UI integration\n ©2011-2014 SpryMedia Ltd - datatables.net/license\n*/\n(function(a){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(b){return a(b,window,document)}):\"object\"===typeof exports?module.exports=function(b,d){b||(b=window);if(!d||!d.fn.dataTable)d=require(\"datatables.net\")(b,d).$;return a(d,b,b.document)}:a(jQuery,window,document)})(function(a){var b=a.fn.dataTable;a.extend(!0,b.defaults,{dom:'<\"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix ui-corner-tl ui-corner-tr\"lfr>t<\"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix ui-corner-bl ui-corner-br\"ip>',\nrenderer:\"jqueryui\"});a.extend(b.ext.classes,{sWrapper:\"dataTables_wrapper dt-jqueryui\",sPageButton:\"fg-button ui-button ui-state-default\",sPageButtonActive:\"ui-state-disabled\",sPageButtonDisabled:\"ui-state-disabled\",sPaging:\"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_\",sSortAsc:\"ui-state-default sorting_asc\",sSortDesc:\"ui-state-default sorting_desc\",sSortable:\"ui-state-default sorting\",sSortableAsc:\"ui-state-default sorting_asc_disabled\",sSortableDesc:\"ui-state-default sorting_desc_disabled\",\nsSortableNone:\"ui-state-default sorting_disabled\",sSortIcon:\"DataTables_sort_icon\",sScrollHead:\"dataTables_scrollHead ui-state-default\",sScrollFoot:\"dataTables_scrollFoot ui-state-default\",sHeaderTH:\"ui-state-default\",sFooterTH:\"ui-state-default\"});b.ext.renderer.header.jqueryui=function(b,h,e,c){var f=\"css_right ui-icon ui-icon-caret-2-n-s\",g=-1!==a.inArray(\"asc\",e.asSorting),i=-1!==a.inArray(\"desc\",e.asSorting);!e.bSortable||!g&&!i?f=\"\":g&&!i?f=\"css_right ui-icon ui-icon-caret-1-n\":!g&&i&&(f=\"css_right ui-icon ui-icon-caret-1-s\");\na(\"<div/>\").addClass(\"DataTables_sort_wrapper\").append(h.contents()).append(a(\"<span/>\").addClass(c.sSortIcon+\" \"+f)).appendTo(h);a(b.nTable).on(\"order.dt\",function(a,g,i,j){b===g&&(a=e.idx,h.removeClass(c.sSortAsc+\" \"+c.sSortDesc).addClass(\"asc\"==j[a]?c.sSortAsc:\"desc\"==j[a]?c.sSortDesc:e.sSortingClass),h.find(\"span.\"+c.sSortIcon).removeClass(\"css_right ui-icon ui-icon-triangle-1-n css_right ui-icon ui-icon-triangle-1-s css_right ui-icon ui-icon-caret-2-n-s css_right ui-icon ui-icon-caret-1-n css_right ui-icon ui-icon-caret-1-s\").addClass(\"asc\"==\nj[a]?\"css_right ui-icon ui-icon-triangle-1-n\":\"desc\"==j[a]?\"css_right ui-icon ui-icon-triangle-1-s\":f))})};b.TableTools&&a.extend(!0,b.TableTools.classes,{container:\"DTTT_container ui-buttonset ui-buttonset-multi\",buttons:{normal:\"DTTT_button ui-button ui-state-default\"},collection:{container:\"DTTT_collection ui-buttonset ui-buttonset-multi\"}});return b});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.semanticui.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/dataTables.semanticui.min.js                                                       //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables Bootstrap 3 integration\n ©2011-2015 SpryMedia Ltd - datatables.net/license\n*/\n(function(b){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(a){return b(a,window,document)}):\"object\"===typeof exports?module.exports=function(a,e){a||(a=window);if(!e||!e.fn.dataTable)e=require(\"datatables.net\")(a,e).$;return b(e,a,a.document)}:b(jQuery,window,document)})(function(b,a,e,m){var c=b.fn.dataTable;b.extend(!0,c.defaults,{dom:\"<'ui stackable grid'<'row'<'eight wide column'l><'right aligned eight wide column'f>><'row dt-table'<'sixteen wide column'tr>><'row'<'seven wide column'i><'right aligned nine wide column'p>>>\",\nrenderer:\"semanticUI\"});b.extend(c.ext.classes,{sWrapper:\"dataTables_wrapper dt-semanticUI\",sFilter:\"dataTables_filter ui input\",sProcessing:\"dataTables_processing ui segment\",sPageButton:\"paginate_button item\"});c.ext.renderer.pageButton.semanticUI=function(h,a,r,s,j,n){var o=new c.Api(h),t=h.oClasses,k=h.oLanguage.oPaginate,u=h.oLanguage.oAria.paginate||{},f,g,p=0,q=function(a,e){var c,i,l,d,m=function(a){a.preventDefault();!b(a.currentTarget).hasClass(\"disabled\")&&o.page()!=a.data.action&&o.page(a.data.action).draw(\"page\")};\nc=0;for(i=e.length;c<i;c++)if(d=e[c],b.isArray(d))q(a,d);else{g=f=\"\";switch(d){case \"ellipsis\":f=\"&#x2026;\";g=\"disabled\";break;case \"first\":f=k.sFirst;g=d+(0<j?\"\":\" disabled\");break;case \"previous\":f=k.sPrevious;g=d+(0<j?\"\":\" disabled\");break;case \"next\":f=k.sNext;g=d+(j<n-1?\"\":\" disabled\");break;case \"last\":f=k.sLast;g=d+(j<n-1?\"\":\" disabled\");break;default:f=d+1,g=j===d?\"active\":\"\"}l=-1===g.indexOf(\"disabled\")?\"a\":\"div\";f&&(l=b(\"<\"+l+\">\",{\"class\":t.sPageButton+\" \"+g,id:0===r&&\"string\"===typeof d?\nh.sTableId+\"_\"+d:null,href:\"#\",\"aria-controls\":h.sTableId,\"aria-label\":u[d],\"data-dt-idx\":p,tabindex:h.iTabIndex}).html(f).appendTo(a),h.oApi._fnBindAction(l,{action:d},m),p++)}},i;try{i=b(a).find(e.activeElement).data(\"dt-idx\")}catch(v){}q(b(a).empty().html('<div class=\"ui stackable pagination menu\"/>').children(),s);i!==m&&b(a).find(\"[data-dt-idx=\"+i+\"]\").focus()};b(e).on(\"init.dt\",function(a,e){if(\"dt\"===a.namespace){var c=new b.fn.dataTable.Api(e);b.fn.dropdown&&b(\"div.dataTables_length select\",\nc.table().container()).dropdown();b(\"div.dataTables_filter.ui.input\",c.table().container()).removeClass(\"input\").addClass(\"form\");b(\"div.dataTables_filter input\",c.table().container()).wrap('<span class=\"ui input\" />')}});return c});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"jquery.dataTables.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/jquery.dataTables.min.js                                                           //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables 1.10.18\n ©2008-2018 SpryMedia Ltd - datatables.net/license\n*/\n(function(h){\"function\"===typeof define&&define.amd?define([\"jquery\"],function(E){return h(E,window,document)}):\"object\"===typeof exports?module.exports=function(E,H){E||(E=window);H||(H=\"undefined\"!==typeof window?require(\"jquery\"):require(\"jquery\")(E));return h(H,E,E.document)}:h(jQuery,window,document)})(function(h,E,H,k){function Z(a){var b,c,d={};h.each(a,function(e){if((b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!==\"a aa ai ao as b fn i m o s \".indexOf(b[1]+\" \"))c=e.replace(b[0],b[2].toLowerCase()),\nd[c]=e,\"o\"===b[1]&&Z(a[e])});a._hungarianMap=d}function J(a,b,c){a._hungarianMap||Z(a);var d;h.each(b,function(e){d=a._hungarianMap[e];if(d!==k&&(c||b[d]===k))\"o\"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),J(a[d],b[d],c)):b[d]=b[e]})}function Ca(a){var b=n.defaults.oLanguage,c=b.sDecimal;c&&Da(c);if(a){var d=a.sZeroRecords;!a.sEmptyTable&&(d&&\"No data available in table\"===b.sEmptyTable)&&F(a,a,\"sZeroRecords\",\"sEmptyTable\");!a.sLoadingRecords&&(d&&\"Loading...\"===b.sLoadingRecords)&&F(a,\na,\"sZeroRecords\",\"sLoadingRecords\");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&c!==a&&Da(a)}}function eb(a){A(a,\"ordering\",\"bSort\");A(a,\"orderMulti\",\"bSortMulti\");A(a,\"orderClasses\",\"bSortClasses\");A(a,\"orderCellsTop\",\"bSortCellsTop\");A(a,\"order\",\"aaSorting\");A(a,\"orderFixed\",\"aaSortingFixed\");A(a,\"paging\",\"bPaginate\");A(a,\"pagingType\",\"sPaginationType\");A(a,\"pageLength\",\"iDisplayLength\");A(a,\"searching\",\"bFilter\");\"boolean\"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?\"100%\":\n\"\");\"boolean\"===typeof a.scrollX&&(a.scrollX=a.scrollX?\"100%\":\"\");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&J(n.models.oSearch,a[b])}function fb(a){A(a,\"orderable\",\"bSortable\");A(a,\"orderData\",\"aDataSort\");A(a,\"orderSequence\",\"asSorting\");A(a,\"orderDataType\",\"sortDataType\");var b=a.aDataSort;\"number\"===typeof b&&!h.isArray(b)&&(a.aDataSort=[b])}function gb(a){if(!n.__browser){var b={};n.__browser=b;var c=h(\"<div/>\").css({position:\"fixed\",top:0,left:-1*h(E).scrollLeft(),height:1,width:1,\noverflow:\"hidden\"}).append(h(\"<div/>\").css({position:\"absolute\",top:1,left:1,width:100,overflow:\"scroll\"}).append(h(\"<div/>\").css({width:\"100%\",height:10}))).appendTo(\"body\"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(e.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}h.extend(a.oBrowser,n.__browser);a.oScroll.iBarWidth=n.__browser.barWidth}\nfunction hb(a,b,c,d,e,f){var g,j=!1;c!==k&&(g=c,j=!0);for(;d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Ea(a,b){var c=n.defaults.column,d=a.aoColumns.length,c=h.extend({},n.models.oColumn,c,{nTh:b?b:H.createElement(\"th\"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:\"\",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=h.extend({},n.models.oSearch,c[d]);ka(a,d,h(b).data())}function ka(a,b,c){var b=a.aoColumns[b],\nd=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr(\"width\")||null;var f=(e.attr(\"style\")||\"\").match(/width:\\s*(\\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(fb(c),J(n.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&e.addClass(c.sClass),h.extend(b,c),F(b,c,\"sWidth\",\"sWidthOrig\"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),F(b,c,\"aDataSort\"));var g=b.mData,j=S(g),i=b.mRender?\nS(b.mRender):null,c=function(a){return\"string\"===typeof a&&-1!==a.indexOf(\"@\")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d};b.fnSetData=function(a,b,c){return N(g)(a,b,c)};\"number\"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));a=-1!==h.inArray(\"asc\",b.asSorting);c=-1!==h.inArray(\"desc\",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=d.sSortableNone,\nb.sSortingClassJUI=\"\"):a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI)}function $(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Fa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(\"\"!==b.sY||\"\"!==b.sX)&&la(a);r(a,null,\"column-sizing\",[a])}function aa(a,b){var c=ma(a,\"bVisible\");return\"number\"===\ntypeof c[b]?c[b]:null}function ba(a,b){var c=ma(a,\"bVisible\"),c=h.inArray(b,c);return-1!==c?c:null}function V(a){var b=0;h.each(a.aoColumns,function(a,d){d.bVisible&&\"none\"!==h(d.nTh).css(\"display\")&&b++});return b}function ma(a,b){var c=[];h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Ga(a){var b=a.aoColumns,c=a.aoData,d=n.ext.type.detect,e,f,g,j,i,h,l,q,t;e=0;for(f=b.length;e<f;e++)if(l=b[e],t=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){g=0;for(j=d.length;g<\nj;g++){i=0;for(h=c.length;i<h;i++){t[i]===k&&(t[i]=B(a,i,e,\"type\"));q=d[g](t[i],a);if(!q&&g!==d.length-1)break;if(\"html\"===q)break}if(q){l.sType=q;break}}l.sType||(l.sType=\"string\")}}function ib(a,b,c,d){var e,f,g,j,i,m,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){m=b[e];var q=m.targets!==k?m.targets:m.aTargets;h.isArray(q)||(q=[q]);f=0;for(g=q.length;f<g;f++)if(\"number\"===typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Ea(a);d(q[f],m)}else if(\"number\"===typeof q[f]&&0>q[f])d(l.length+q[f],m);else if(\"string\"===\ntypeof q[f]){j=0;for(i=l.length;j<i;j++)(\"_all\"==q[f]||h(l[j].nTh).hasClass(q[f]))&&d(j,m)}}if(c){e=0;for(a=c.length;e<a;e++)d(e,c[e])}}function O(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},n.models.oRow,{src:c?\"dom\":\"data\",idx:e});f._aData=b;a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;a.aiDisplayMaster.push(e);b=a.rowIdFn(b);b!==k&&(a.aIds[b]=f);(c||!a.oFeatures.bDeferRender)&&Ha(a,e,c,d);return e}function na(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,\ne){c=Ia(a,e);return O(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(K(a,0,\"Requested unknown parameter \"+(\"function\"==typeof f.mData?\"{function}\":\"'\"+f.mData+\"'\")+\" for row \"+b+\", column \"+c,4),a.iDrawError=e),j;if((i===g||null===i)&&null!==j&&d!==k)i=j;else if(\"function\"===typeof i)return i.call(g);return null===i&&\"display\"==d?\"\":i}function jb(a,\nb,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Ja(a){return h.map(a.match(/(\\\\.|[^\\.])+/g)||[\"\"],function(a){return a.replace(/\\\\\\./g,\".\")})}function S(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=S(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if(\"function\"===typeof a)return function(b,c,f,g){return a(b,c,f,g)};if(\"string\"===typeof a&&(-1!==a.indexOf(\".\")||-1!==a.indexOf(\"[\")||\n-1!==a.indexOf(\"(\"))){var c=function(a,b,f){var g,j;if(\"\"!==f){j=Ja(f);for(var i=0,m=j.length;i<m;i++){f=j[i].match(ca);g=j[i].match(W);if(f){j[i]=j[i].replace(ca,\"\");\"\"!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(\".\");if(h.isArray(a)){i=0;for(m=a.length;i<m;i++)g.push(c(a[i],b,j))}a=f[0].substring(1,f[0].length-1);a=\"\"===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(W,\"\");a=a[j[i]]();continue}if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}\nfunction N(a){if(h.isPlainObject(a))return N(a._);if(null===a)return function(){};if(\"function\"===typeof a)return function(b,d,e){a(b,\"set\",d,e)};if(\"string\"===typeof a&&(-1!==a.indexOf(\".\")||-1!==a.indexOf(\"[\")||-1!==a.indexOf(\"(\"))){var b=function(a,d,e){var e=Ja(e),f;f=e[e.length-1];for(var g,j,i=0,m=e.length-1;i<m;i++){g=e[i].match(ca);j=e[i].match(W);if(g){e[i]=e[i].replace(ca,\"\");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(\".\");if(h.isArray(d)){j=0;for(m=d.length;j<m;j++)f={},b(f,d[j],g),\na[e[i]].push(f)}else a[e[i]]=d;return}j&&(e[i]=e[i].replace(W,\"\"),a=a[e[i]](d));if(null===a[e[i]]||a[e[i]]===k)a[e[i]]={};a=a[e[i]]}if(f.match(W))a[f.replace(W,\"\")](d);else a[f.replace(ca,\"\")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ka(a){return D(a.aoData,\"_aData\")}function oa(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function pa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===k&&a.splice(d,\n1)}function da(a,b,c,d){var e=a.aoData[b],f,g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=B(a,b,d,\"display\")};if(\"dom\"===c||(!c||\"auto\"===c)&&\"dom\"===e.src)e._aData=Ia(a,e,d,d===k?k:e._aData).data;else{var j=e.anCells;if(j)if(d!==k)g(j[d],d);else{c=0;for(f=j.length;c<f;c++)g(j[c],c)}}e._aSortData=null;e._aFilterData=null;g=a.aoColumns;if(d!==k)g[d].sType=null;else{c=0;for(f=g.length;c<f;c++)g[c].sType=null;La(a,e)}}function Ia(a,b,c,d){var e=[],f=b.firstChild,g,\nj,i=0,m,l=a.aoColumns,q=a._rowReadObject,d=d!==k?d:q?{}:[],t=function(a,b){if(\"string\"===typeof a){var c=a.indexOf(\"@\");-1!==c&&(c=a.substring(c+1),N(a)(d,b.getAttribute(c)))}},G=function(a){if(c===k||c===i)j=l[i],m=h.trim(a.innerHTML),j&&j._bAttrSrc?(N(j.mData._)(d,m),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=N(j.mData)),j._setter(d,m)):d[i]=m;i++};if(f)for(;f;){g=f.nodeName.toUpperCase();if(\"TD\"==g||\"TH\"==g)G(f),e.push(f);f=f.nextSibling}else{e=b.anCells;\nf=0;for(g=e.length;f<g;f++)G(e[f])}if(b=b.firstChild?b:b.nTr)(b=b.getAttribute(\"id\"))&&N(a.rowId)(d,b);return{data:d,cells:e}}function Ha(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],j,i,m,l,q;if(null===e.nTr){j=c||H.createElement(\"tr\");e.nTr=j;e.anCells=g;j._DT_RowIndex=b;La(a,e);l=0;for(q=a.aoColumns.length;l<q;l++){m=a.aoColumns[l];i=c?d[l]:H.createElement(m.sCellType);i._DT_CellIndex={row:b,column:l};g.push(i);if((!c||m.mRender||m.mData!==l)&&(!h.isPlainObject(m.mData)||m.mData._!==l+\".display\"))i.innerHTML=\nB(a,b,l,\"display\");m.sClass&&(i.className+=\" \"+m.sClass);m.bVisible&&!c?j.appendChild(i):!m.bVisible&&c&&i.parentNode.removeChild(i);m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l)}r(a,\"aoRowCreatedCallback\",null,[j,f,b,g])}e.nTr.setAttribute(\"role\",\"row\")}function La(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e);d.DT_RowClass&&(e=d.DT_RowClass.split(\" \"),b.__rowc=b.__rowc?qa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(\" \")).addClass(d.DT_RowClass));\nd.DT_RowAttr&&h(c).attr(d.DT_RowAttr);d.DT_RowData&&h(c).data(d.DT_RowData)}}function kb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h(\"th, td\",g).length,m=a.oClasses,l=a.aoColumns;i&&(e=h(\"<tr/>\").appendTo(g));b=0;for(c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr(\"tabindex\",a.iTabIndex).attr(\"aria-controls\",a.sTableId),Ma(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Na(a,\"header\")(a,d,\nf,m);i&&ea(a.aoHeader,g);h(g).find(\">tr\").attr(\"role\",\"row\");h(g).find(\">tr>th, >tr>td\").addClass(m.sHeaderTH);h(j).find(\">tr>th, >tr>td\").addClass(m.sFooterTH);if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=l[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function fa(a,b,c){var d,e,f,g=[],j=[],i=a.aoColumns.length,m;if(b){c===k&&(c=!1);d=0;for(e=b.length;d<e;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}d=\n0;for(e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[d].length;f<b;f++)if(m=i=1,j[d][f]===k){a.appendChild(g[d][f].cell);for(j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+m]!==k&&g[d][f].cell==g[d][f+m].cell;){for(c=0;c<i;c++)j[d+c][f+m]=1;m++}h(g[d][f].cell).attr(\"rowspan\",i).attr(\"colspan\",m)}}}}function P(a){var b=r(a,\"aoPreDrawCallback\",\"preDraw\",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{var b=[],c=0,d=a.asStripeClasses,e=\nd.length,f=a.oLanguage,g=a.iInitDisplayStart,j=\"ssp\"==y(a),i=a.aiDisplay;a.bDrawing=!0;g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);var g=a._iDisplayStart,m=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!lb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:m;for(j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];null===q.nTr&&Ha(a,l);var t=q.nTr;if(0!==e){var G=d[c%e];q._sRowStripe!=G&&(h(t).removeClass(q._sRowStripe).addClass(G),\nq._sRowStripe=G)}r(a,\"aoRowCallback\",null,[t,q._aData,c,j,l]);b.push(t);c++}}else c=f.sZeroRecords,1==a.iDraw&&\"ajax\"==y(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h(\"<tr/>\",{\"class\":e?d[0]:\"\"}).append(h(\"<td />\",{valign:\"top\",colSpan:V(a),\"class\":a.oClasses.sRowEmpty}).html(c))[0];r(a,\"aoHeaderCallback\",\"header\",[h(a.nTHead).children(\"tr\")[0],Ka(a),g,m,i]);r(a,\"aoFooterCallback\",\"footer\",[h(a.nTFoot).children(\"tr\")[0],Ka(a),g,m,i]);d=h(a.nTBody);d.children().detach();\nd.append(h(b));r(a,\"aoDrawCallback\",\"draw\",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function T(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&mb(a);d?ga(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;P(a);a._drawHold=!1}function nb(a){var b=a.oClasses,c=h(a.nTable),c=h(\"<div/>\").insertBefore(c),d=a.oFeatures,e=h(\"<div/>\",{id:a.sTableId+\"_wrapper\",\"class\":b.sWrapper+(a.nTFoot?\"\":\" \"+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=\na.nTable.nextSibling;for(var f=a.sDom.split(\"\"),g,j,i,m,l,q,k=0;k<f.length;k++){g=null;j=f[k];if(\"<\"==j){i=h(\"<div/>\")[0];m=f[k+1];if(\"'\"==m||'\"'==m){l=\"\";for(q=2;f[k+q]!=m;)l+=f[k+q],q++;\"H\"==l?l=b.sJUIHeader:\"F\"==l&&(l=b.sJUIFooter);-1!=l.indexOf(\".\")?(m=l.split(\".\"),i.id=m[0].substr(1,m[0].length-1),i.className=m[1]):\"#\"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l;k+=q}e.append(i);e=h(i)}else if(\">\"==j)e=e.parent();else if(\"l\"==j&&d.bPaginate&&d.bLengthChange)g=ob(a);else if(\"f\"==j&&\nd.bFilter)g=pb(a);else if(\"r\"==j&&d.bProcessing)g=qb(a);else if(\"t\"==j)g=rb(a);else if(\"i\"==j&&d.bInfo)g=sb(a);else if(\"p\"==j&&d.bPaginate)g=tb(a);else if(0!==n.ext.feature.length){i=n.ext.feature;q=0;for(m=i.length;q<m;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e);a.nHolding=null}function ea(a,b){var c=h(b).children(\"tr\"),d,e,f,g,j,i,m,l,q,k;a.splice(0,a.length);f=0;for(i=c.length;f<i;f++)a.push([]);f=0;for(i=c.length;f<\ni;f++){d=c[f];for(e=d.firstChild;e;){if(\"TD\"==e.nodeName.toUpperCase()||\"TH\"==e.nodeName.toUpperCase()){l=1*e.getAttribute(\"colspan\");q=1*e.getAttribute(\"rowspan\");l=!l||0===l||1===l?1:l;q=!q||0===q||1===q?1:q;g=0;for(j=a[f];j[g];)g++;m=g;k=1===l?!0:!1;for(j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][m+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}}function ra(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],ea(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!d[f]||\n!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function sa(a,b,c){r(a,\"aoServerParams\",\"serverParams\",[b]);if(b&&h.isArray(b)){var d={},e=/(.*?)\\[\\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){r(a,null,\"xhr\",[a,b,a.jqXHR]);c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var m=\"function\"===typeof f?f(b,a):f,b=\"function\"===typeof f&&m?m:h.extend(!0,b,m);delete g.data}m={data:b,success:function(b){var c=\nb.error||b.sError;c&&K(a,0,c);a.json=b;i(b)},dataType:\"json\",cache:!1,type:a.sServerMethod,error:function(b,c){var d=r(a,null,\"xhr\",[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&(\"parsererror\"==c?K(a,0,\"Invalid JSON response\",1):4===b.readyState&&K(a,0,\"Ajax error\",7));C(a,!1)}};a.oAjaxData=b;r(a,null,\"preXhr\",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||\"string\"===typeof g?a.jqXHR=h.ajax(h.extend(m,{url:g||a.sAjaxSource})):\n\"function\"===typeof g?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(m,g)),g.data=f)}function lb(a){return a.bAjaxDataGet?(a.iDraw++,C(a,!0),sa(a,ub(a),function(b){vb(a,b)}),!1):!0}function ub(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,m,l,k=X(a);g=a._iDisplayStart;i=!1!==d.bPaginate?a._iDisplayLength:-1;var t=function(a,b){j.push({name:a,value:b})};t(\"sEcho\",a.iDraw);t(\"iColumns\",c);t(\"sColumns\",D(b,\"sName\").join(\",\"));t(\"iDisplayStart\",g);t(\"iDisplayLength\",\ni);var G={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)m=b[g],l=f[g],i=\"function\"==typeof m.mData?\"function\":m.mData,G.columns.push({data:i,name:m.sName,searchable:m.bSearchable,orderable:m.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),t(\"mDataProp_\"+g,i),d.bFilter&&(t(\"sSearch_\"+g,l.sSearch),t(\"bRegex_\"+g,l.bRegex),t(\"bSearchable_\"+g,m.bSearchable)),d.bSort&&t(\"bSortable_\"+g,m.bSortable);d.bFilter&&(t(\"sSearch\",e.sSearch),t(\"bRegex\",\ne.bRegex));d.bSort&&(h.each(k,function(a,b){G.order.push({column:b.col,dir:b.dir});t(\"iSortCol_\"+a,b.col);t(\"sSortDir_\"+a,b.dir)}),t(\"iSortingCols\",k.length));b=n.ext.legacy.ajax;return null===b?a.sAjaxSource?j:G:b?j:G}function vb(a,b){var c=ta(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}oa(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(f,\n10);d=0;for(e=c.length;d<e;d++)O(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;P(a);a._bInitComplete||ua(a,b);a.bAjaxDataGet=!0;C(a,!1)}function ta(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return\"data\"===c?b.aaData||b[c]:\"\"!==c?S(c)(b):b}function pb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type=\"search\" class=\"'+b.sFilterInput+'\"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace(\"_INPUT_\",\ng):j+g,b=h(\"<div/>\",{id:!f.f?c+\"_filter\":null,\"class\":b.sFilter}).append(h(\"<label/>\").append(j)),f=function(){var b=!this.value?\"\":this.value;b!=e.sSearch&&(ga(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,P(a))},g=null!==a.searchDelay?a.searchDelay:\"ssp\"===y(a)?400:0,i=h(\"input\",b).val(e.sSearch).attr(\"placeholder\",d.sSearchPlaceholder).on(\"keyup.DT search.DT input.DT paste.DT cut.DT\",g?Oa(f,g):f).on(\"keypress.DT\",function(a){if(13==a.keyCode)return!1}).attr(\"aria-controls\",\nc);h(a.nTable).on(\"search.dt.DT\",function(b,c){if(a===c)try{i[0]!==H.activeElement&&i.val(e.sSearch)}catch(d){}});return b[0]}function ga(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};Ga(a);if(\"ssp\"!=y(a)){wb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)xb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,\ne[b].bSmart,e[b].bCaseInsensitive);yb(a)}else f(b);a.bFiltered=!0;r(a,null,\"search\",[a])}function yb(a){for(var b=n.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var j=[],i=0,m=c.length;i<m;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0;h.merge(c,j)}}function xb(a,b,c,d,e,f){if(\"\"!==b){for(var g=[],j=a.aiDisplay,d=Pa(b,d,e,f),e=0;e<j.length;e++)b=a.aoData[j[e]]._aFilterData[c],d.test(b)&&g.push(j[e]);a.aiDisplay=g}}function wb(a,b,c,d,e,f){var d=Pa(b,\nd,e,f),f=a.oPreviousSearch.sSearch,g=a.aiDisplayMaster,j,e=[];0!==n.ext.search.length&&(c=!0);j=zb(a);if(0>=b.length)a.aiDisplay=g.slice();else{if(j||c||f.length>b.length||0!==b.indexOf(f)||a.bSorted)a.aiDisplay=g.slice();b=a.aiDisplay;for(c=0;c<b.length;c++)d.test(a.aoData[b[c]]._sFilterRow)&&e.push(b[c]);a.aiDisplay=e}}function Pa(a,b,c,d){a=b?a:Qa(a);c&&(a=\"^(?=.*?\"+h.map(a.match(/\"[^\"]+\"|[^ ]+/g)||[\"\"],function(a){if('\"'===a.charAt(0))var b=a.match(/^\"(.*)\"$/),a=b?b[1]:a;return a.replace('\"',\n\"\")}).join(\")(?=.*?\")+\").*$\");return RegExp(a,d?\"i\":\"\")}function zb(a){var b=a.aoColumns,c,d,e,f,g,j,i,h,l=n.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<f;d++)if(h=a.aoData[d],!h._aFilterData){j=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=B(a,d,e,\"filter\"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=\"\"),\"string\"!==typeof i&&i.toString&&(i=i.toString())):i=\"\",i.indexOf&&-1!==i.indexOf(\"&\")&&(va.innerHTML=i,i=Wb?va.textContent:va.innerText),i.replace&&(i=i.replace(/[\\r\\n]/g,\"\")),j.push(i);\nh._aFilterData=j;h._sFilterRow=j.join(\"  \");c=!0}return c}function Ab(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Bb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function sb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h(\"<div/>\",{\"class\":a.oClasses.sInfo,id:!c?b+\"_info\":null});c||(a.aoDrawCallback.push({fn:Cb,sName:\"information\"}),d.attr(\"role\",\"status\").attr(\"aria-live\",\"polite\"),h(a.nTable).attr(\"aria-describedby\",\nb+\"_info\"));return d[0]}function Cb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=\" \"+c.sInfoFiltered);j+=c.sInfoPostFix;j=Db(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j));h(b).html(j)}}function Db(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,\nc.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ha(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){nb(a);kb(a);fa(a,a.aoHeader);fa(a,a.aoFooter);C(a,!0);c.bAutoWidth&&Fa(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&(f.nTh.style.width=v(f.sWidth));r(a,null,\"preInit\",[a]);T(a);e=\ny(a);if(\"ssp\"!=e||g)\"ajax\"==e?sa(a,[],function(c){var f=ta(a,c);for(b=0;b<f.length;b++)O(a,f[b]);a.iInitDisplayStart=d;T(a);C(a,!1);ua(a,c)},a):(C(a,!1),ua(a))}else setTimeout(function(){ha(a)},200)}function ua(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&$(a);r(a,null,\"plugin-init\",[a,b]);r(a,\"aoInitComplete\",\"init\",[a,b])}function Ra(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Sa(a);r(a,null,\"length\",[a,c])}function ob(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=\ne?d[0]:d,d=e?d[1]:d,e=h(\"<select/>\",{name:c+\"_length\",\"aria-controls\":c,\"class\":b.sLengthSelect}),g=0,j=f.length;g<j;g++)e[0][g]=new Option(\"number\"===typeof d[g]?a.fnFormatNumber(d[g]):d[g],f[g]);var i=h(\"<div><label/></div>\").addClass(b.sLength);a.aanFeatures.l||(i[0].id=c+\"_length\");i.children().append(a.oLanguage.sLengthMenu.replace(\"_MENU_\",e[0].outerHTML));h(\"select\",i).val(a._iDisplayLength).on(\"change.DT\",function(){Ra(a,h(this).val());P(a)});h(a.nTable).on(\"length.dt.DT\",function(b,c,d){a===\nc&&h(\"select\",i).val(d)});return i[0]}function tb(a){var b=a.sPaginationType,c=n.ext.pager[b],d=\"function\"===typeof c,e=function(a){P(a)},b=h(\"<div/>\").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;d||c.fnInit(a,b,e);f.p||(b.id=a.sTableId+\"_paginate\",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=-1===i,b=l?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),k,l=0;for(k=f.p.length;l<k;l++)Na(a,\"pageButton\")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,\ne)},sName:\"pagination\"}));return b}function Ta(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:\"number\"===typeof b?(d=b*e,d>f&&(d=0)):\"first\"==b?d=0:\"previous\"==b?(d=0<=e?d-e:0,0>d&&(d=0)):\"next\"==b?d+e<f&&(d+=e):\"last\"==b?d=Math.floor((f-1)/e)*e:K(a,0,\"Unknown paging action: \"+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(r(a,null,\"page\",[a]),c&&P(a));return b}function qb(a){return h(\"<div/>\",{id:!a.aanFeatures.r?a.sTableId+\"_processing\":null,\"class\":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}\nfunction C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css(\"display\",b?\"block\":\"none\");r(a,null,\"processing\",[a,b])}function rb(a){var b=h(a.nTable);b.attr(\"role\",\"grid\");var c=a.oScroll;if(\"\"===c.sX&&\"\"===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children(\"caption\"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),m=h(b[0].cloneNode(!1)),l=b.children(\"tfoot\");l.length||(l=null);i=h(\"<div/>\",{\"class\":f.sScrollWrapper}).append(h(\"<div/>\",{\"class\":f.sScrollHead}).css({overflow:\"hidden\",\nposition:\"relative\",border:0,width:d?!d?null:v(d):\"100%\"}).append(h(\"<div/>\",{\"class\":f.sScrollHeadInner}).css({\"box-sizing\":\"content-box\",width:c.sXInner||\"100%\"}).append(i.removeAttr(\"id\").css(\"margin-left\",0).append(\"top\"===j?g:null).append(b.children(\"thead\"))))).append(h(\"<div/>\",{\"class\":f.sScrollBody}).css({position:\"relative\",overflow:\"auto\",width:!d?null:v(d)}).append(b));l&&i.append(h(\"<div/>\",{\"class\":f.sScrollFoot}).css({overflow:\"hidden\",border:0,width:d?!d?null:v(d):\"100%\"}).append(h(\"<div/>\",\n{\"class\":f.sScrollFootInner}).append(m.removeAttr(\"id\").css(\"margin-left\",0).append(\"bottom\"===j?g:null).append(b.children(\"tfoot\")))));var b=i.children(),k=b[0],f=b[1],t=l?b[2]:null;if(d)h(f).on(\"scroll.DT\",function(){var a=this.scrollLeft;k.scrollLeft=a;l&&(t.scrollLeft=a)});h(f).css(e&&c.bCollapse?\"max-height\":\"height\",e);a.nScrollHead=k;a.nScrollBody=f;a.nScrollFoot=t;a.aoDrawCallback.push({fn:la,sName:\"scrolling\"});return i[0]}function la(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,\nf=h(a.nScrollHead),g=f[0].style,j=f.children(\"div\"),i=j[0].style,m=j.children(\"table\"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children(\"div\"),n=t.children(\"table\"),o=h(a.nTHead),p=h(a.nTable),s=p[0],r=s.style,u=a.nTFoot?h(a.nTFoot):null,x=a.oBrowser,U=x.bScrollOversize,Xb=D(a.aoColumns,\"nTh\"),Q,L,R,w,Ua=[],y=[],z=[],A=[],B,C=function(a){a=a.style;a.paddingTop=\"0\";a.paddingBottom=\"0\";a.borderTopWidth=\"0\";a.borderBottomWidth=\"0\";a.height=0};L=j.scrollHeight>j.clientHeight;if(a.scrollBarVis!==\nL&&a.scrollBarVis!==k)a.scrollBarVis=L,$(a);else{a.scrollBarVis=L;p.children(\"thead, tfoot\").remove();u&&(R=u.clone().prependTo(p),Q=u.find(\"tr\"),R=R.find(\"tr\"));w=o.clone().prependTo(p);o=o.find(\"tr\");L=w.find(\"tr\");w.find(\"th, td\").removeAttr(\"tabindex\");c||(q.width=\"100%\",f[0].style.width=\"100%\");h.each(ra(a,w),function(b,c){B=aa(a,b);c.style.width=a.aoColumns[B].sWidth});u&&I(function(a){a.style.width=\"\"},R);f=p.outerWidth();if(\"\"===c){r.width=\"100%\";if(U&&(p.find(\"tbody\").height()>j.offsetHeight||\n\"scroll\"==l.css(\"overflow-y\")))r.width=v(p.outerWidth()-b);f=p.outerWidth()}else\"\"!==d&&(r.width=v(d),f=p.outerWidth());I(C,L);I(function(a){z.push(a.innerHTML);Ua.push(v(h(a).css(\"width\")))},L);I(function(a,b){if(h.inArray(a,Xb)!==-1)a.style.width=Ua[b]},o);h(L).height(0);u&&(I(C,R),I(function(a){A.push(a.innerHTML);y.push(v(h(a).css(\"width\")))},R),I(function(a,b){a.style.width=y[b]},Q),h(R).height(0));I(function(a,b){a.innerHTML='<div class=\"dataTables_sizing\">'+z[b]+\"</div>\";a.childNodes[0].style.height=\n\"0\";a.childNodes[0].style.overflow=\"hidden\";a.style.width=Ua[b]},L);u&&I(function(a,b){a.innerHTML='<div class=\"dataTables_sizing\">'+A[b]+\"</div>\";a.childNodes[0].style.height=\"0\";a.childNodes[0].style.overflow=\"hidden\";a.style.width=y[b]},R);if(p.outerWidth()<f){Q=j.scrollHeight>j.offsetHeight||\"scroll\"==l.css(\"overflow-y\")?f+b:f;if(U&&(j.scrollHeight>j.offsetHeight||\"scroll\"==l.css(\"overflow-y\")))r.width=v(Q-b);(\"\"===c||\"\"!==d)&&K(a,1,\"Possible column misalignment\",6)}else Q=\"100%\";q.width=v(Q);\ng.width=v(Q);u&&(a.nScrollFoot.style.width=v(Q));!e&&U&&(q.height=v(s.offsetHeight+b));c=p.outerWidth();m[0].style.width=v(c);i.width=v(c);d=p.height()>j.clientHeight||\"scroll\"==l.css(\"overflow-y\");e=\"padding\"+(x.bScrollbarLeft?\"Left\":\"Right\");i[e]=d?b+\"px\":\"0px\";u&&(n[0].style.width=v(c),t[0].style.width=v(c),t[0].style[e]=d?b+\"px\":\"0px\");p.children(\"colgroup\").insertBefore(p.children(\"thead\"));l.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)j.scrollTop=0}}function I(a,b,c){for(var d=0,e=0,\nf=b.length,g,j;e<f;){g=b[e].firstChild;for(j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Fa(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,j=c.length,i=ma(a,\"bVisible\"),m=h(\"th\",a.nTHead),l=b.getAttribute(\"width\"),k=b.parentNode,t=!1,n,o,p=a.oBrowser,d=p.bScrollOversize;(n=b.style.width)&&-1!==n.indexOf(\"%\")&&(l=n);for(n=0;n<i.length;n++)o=c[i[n]],null!==o.sWidth&&(o.sWidth=Eb(o.sWidthOrig,k),t=!0);if(d||\n!t&&!f&&!e&&j==V(a)&&j==m.length)for(n=0;n<j;n++)i=aa(a,n),null!==i&&(c[i].sWidth=v(m.eq(n).width()));else{j=h(b).clone().css(\"visibility\",\"hidden\").removeAttr(\"id\");j.find(\"tbody tr\").remove();var s=h(\"<tr/>\").appendTo(j.find(\"tbody\"));j.find(\"thead, tfoot\").remove();j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone());j.find(\"tfoot th, tfoot td\").css(\"width\",\"\");m=ra(a,j.find(\"thead\")[0]);for(n=0;n<i.length;n++)o=c[i[n]],m[n].style.width=null!==o.sWidthOrig&&\"\"!==o.sWidthOrig?v(o.sWidthOrig):\n\"\",o.sWidthOrig&&f&&h(m[n]).append(h(\"<div/>\").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(n=0;n<i.length;n++)t=i[n],o=c[t],h(Fb(a,t)).clone(!1).append(o.sContentPadding).appendTo(s);h(\"[name]\",j).removeAttr(\"name\");o=h(\"<div/>\").css(f||e?{position:\"absolute\",top:0,left:0,height:1,right:0,overflow:\"hidden\"}:{}).append(j).appendTo(k);f&&g?j.width(g):f?(j.css(\"width\",\"auto\"),j.removeAttr(\"width\"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):\nl&&j.width(l);for(n=e=0;n<i.length;n++)k=h(m[n]),g=k.outerWidth()-k.width(),k=p.bBounding?Math.ceil(m[n].getBoundingClientRect().width):k.outerWidth(),e+=k,c[i[n]].sWidth=v(k-g);b.style.width=v(e);o.remove()}l&&(b.style.width=v(l));if((l||f)&&!a._reszEvt)b=function(){h(E).on(\"resize.DT-\"+a.sInstance,Oa(function(){$(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0}function Eb(a,b){if(!a)return 0;var c=h(\"<div/>\").css(\"width\",v(a)).appendTo(b||H.body),d=c[0].offsetWidth;c.remove();return d}function Fb(a,\nb){var c=Gb(a,b);if(0>c)return null;var d=a.aoData[c];return!d.nTr?h(\"<td/>\").html(B(a,c,b,\"display\"))[0]:d.anCells[b]}function Gb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=B(a,f,b,\"display\")+\"\",c=c.replace(Yb,\"\"),c=c.replace(/&nbsp;/g,\" \"),c.length>d&&(d=c.length,e=f);return e}function v(a){return null===a?\"0px\":\"number\"==typeof a?0>a?\"0px\":a+\"px\":a.match(/\\d$/)?a+\"px\":a}function X(a){var b,c,d=[],e=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var m=[];f=function(a){a.length&&\n!h.isArray(a[0])?m.push(a):h.merge(m,a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<m.length;a++){i=m[a][0];f=e[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=e[g].sType||\"string\",m[a]._idx===k&&(m[a]._idx=h.inArray(m[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:m[a][1],index:m[a]._idx,type:j,formatter:n.ext.type.order[j+\"-pre\"]})}return d}function mb(a){var b,c,d=[],e=n.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;Ga(a);h=X(a);b=0;for(c=h.length;b<\nc;b++)j=h[b],j.formatter&&g++,Hb(a,j.col);if(\"ssp\"!=y(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,n=f[b]._aSortData;for(g=0;g<i;g++)if(j=h[g],c=k[j.col],e=n[j.col],c=c<e?-1:c>e?1:0,0!==c)return\"asc\"===j.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,n=f[a]._aSortData,o=f[b]._aSortData;for(j=0;j<k;j++)if(i=h[j],c=n[i.col],g=o[i.col],i=e[i.type+\"-\"+i.dir]||e[\"string-\"+i.dir],\nc=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Ib(a){for(var b,c,d=a.aoColumns,e=X(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,\"\");var i=c.nTh;i.removeAttribute(\"aria-sort\");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute(\"aria-sort\",\"asc\"==e[0].dir?\"ascending\":\"descending\"),c=j[e[0].index+1]||j[0]):c=j[0],b+=\"asc\"===c?a.sSortAscending:a.sSortDescending);i.setAttribute(\"aria-label\",b)}}function Va(a,\nb,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===k&&(c=h.inArray(a[1],f));return c+1<f.length?c+1:b?null:0};\"number\"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,D(e,\"0\")),-1!==c?(b=g(e[c],!0),null===b&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0);T(a);\"function\"==\ntypeof d&&d(a)}function Ma(a,b,c,d){var e=a.aoColumns[c];Wa(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Va(a,c,b.shiftKey,d);\"ssp\"!==y(a)&&C(a,!1)},0)):Va(a,c,b.shiftKey,d))})}function wa(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=X(a),e=a.oFeatures,f,g;if(e.bSort&&e.bSortClasses){e=0;for(f=b.length;e<f;e++)g=b[e].src,h(D(a.aoData,\"anCells\",g)).removeClass(c+(2>e?e+1:3));e=0;for(f=d.length;e<f;e++)g=d[e].src,h(D(a.aoData,\"anCells\",g)).addClass(c+\n(2>e?e+1:3))}a.aLastSort=d}function Hb(a,b){var c=a.aoColumns[b],d=n.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,ba(a,b)));for(var f,g=n.ext.type.order[c.sType+\"-pre\"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[j]:B(a,j,b,\"sort\"),c._aSortData[b]=g?g(f):f}function xa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:Ab(a.oPreviousSearch),\ncolumns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:Ab(a.aoPreSearchCols[d])}})};r(a,\"aoStateSaveParams\",\"stateSaveParams\",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Jb(a,b,c){var d,e,f=a.aoColumns,b=function(b){if(b&&b.time){var g=r(a,\"aoStateLoadParams\",\"stateLoadParams\",[a,b]);if(-1===h.inArray(!1,g)&&(g=a.iStateDuration,!(0<g&&b.time<+new Date-1E3*g)&&!(b.columns&&f.length!==b.columns.length))){a.oLoadedState=h.extend(!0,{},b);b.start!==k&&\n(a._iDisplayStart=b.start,a.iInitDisplayStart=b.start);b.length!==k&&(a._iDisplayLength=b.length);b.order!==k&&(a.aaSorting=[],h.each(b.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)}));b.search!==k&&h.extend(a.oPreviousSearch,Bb(b.search));if(b.columns){d=0;for(e=b.columns.length;d<e;d++)g=b.columns[d],g.visible!==k&&(f[d].bVisible=g.visible),g.search!==k&&h.extend(a.aoPreSearchCols[d],Bb(g.search))}r(a,\"aoStateLoaded\",\"stateLoaded\",[a,b])}}c()};if(a.oFeatures.bStateSave){var g=\na.fnStateLoadCallback.call(a.oInstance,a,b);g!==k&&b(g)}else c()}function ya(a){var b=n.settings,a=h.inArray(a,D(b,\"nTable\"));return-1!==a?b[a]:null}function K(a,b,c,d){c=\"DataTables warning: \"+(a?\"table id=\"+a.sTableId+\" - \":\"\")+c;d&&(c+=\". For more information about this error, please see http://datatables.net/tn/\"+d);if(b)E.console&&console.log&&console.log(c);else if(b=n.ext,b=b.sErrMode||b.errMode,a&&r(a,null,\"error\",[a,d,c]),\"alert\"==b)alert(c);else{if(\"throw\"==b)throw Error(c);\"function\"==\ntypeof b&&b(a,d,c)}}function F(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?F(a,b,d[0],d[1]):F(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Xa(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&\"data\"!==e&&\"aaData\"!==e&&h.isArray(d)?d.slice():d);return a}function Wa(a,b,c){h(a).on(\"click.DT\",b,function(b){h(a).blur();c(b)}).on(\"keypress.DT\",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).on(\"selectstart.DT\",\nfunction(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function r(a,b,c,d){var e=[];b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)}));null!==c&&(b=h.Event(c+\".dt\"),h(a.nTable).trigger(b,d),e.push(b.result));return e}function Sa(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function Na(a,b){var c=a.renderer,d=n.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:\"string\"===\ntypeof c?d[c]||d._:d._}function y(a){return a.oFeatures.bServerSide?\"ssp\":a.ajax||a.sAjaxSource?\"ajax\":\"dom\"}function ia(a,b){var c=[],c=Kb.numbers_length,d=Math.floor(c/2);b<=c?c=Y(0,b):a<=d?(c=Y(0,c-2),c.push(\"ellipsis\"),c.push(b-1)):(a>=b-1-d?c=Y(b-(c-2),b):(c=Y(a-d+2,a+d-1),c.push(\"ellipsis\"),c.push(b-1)),c.splice(0,0,\"ellipsis\"),c.splice(0,0,0));c.DT_el=\"span\";return c}function Da(a){h.each({num:function(b){return za(b,a)},\"num-fmt\":function(b){return za(b,a,Ya)},\"html-num\":function(b){return za(b,\na,Aa)},\"html-num-fmt\":function(b){return za(b,a,Aa,Ya)}},function(b,c){x.type.order[b+a+\"-pre\"]=c;b.match(/^html\\-/)&&(x.type.search[b+a]=x.type.search.html)})}function Lb(a){return function(){var b=[ya(this[n.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return n.ext.internal[a].apply(this,b)}}var n=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new s(ya(this[x.iApiIndex])):new s(this)};\nthis.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===k||b)&&c.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):(\"\"!==d.sX||\"\"!==d.sY)&&la(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,\nb,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===k||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0);null===b||b===k?e.search(a,c,d,h):e.column(b).search(a,c,d,h);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==k){var d=a.nodeName?a.nodeName.toLowerCase():\"\";return b!==k||\"td\"==d||\"th\"==d?c.cell(a,b).data():\nc.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return\"TR\"==c?b.row(a).index():\"TD\"==c||\"TH\"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};\nthis.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===k||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return ya(this[x.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===k||e)&&h.columns.adjust();\n(d===k||d)&&h.draw();return 0};this.fnVersionCheck=x.fnVersionCheck;var b=this,c=a===k,d=this.length;c&&(a={});this.oApi=this.internal=x.internal;for(var e in n.ext.internal)e&&(this[e]=Lb(e));this.each(function(){var e={},g=1<d?Xa(e,a,!0):a,j=0,i,e=this.getAttribute(\"id\"),m=!1,l=n.defaults,q=h(this);if(\"table\"!=this.nodeName.toLowerCase())K(null,0,\"Non-table node initialisation (\"+this.nodeName+\")\",2);else{eb(l);fb(l.column);J(l,l,!0);J(l.column,l.column,!0);J(l,h.extend(g,q.data()));var t=n.settings,\nj=0;for(i=t.length;j<i;j++){var o=t[j];if(o.nTable==this||o.nTHead&&o.nTHead.parentNode==this||o.nTFoot&&o.nTFoot.parentNode==this){var s=g.bRetrieve!==k?g.bRetrieve:l.bRetrieve;if(c||s)return o.oInstance;if(g.bDestroy!==k?g.bDestroy:l.bDestroy){o.oInstance.fnDestroy();break}else{K(o,0,\"Cannot reinitialise DataTable\",3);return}}if(o.sTableId==this.id){t.splice(j,1);break}}if(null===e||\"\"===e)this.id=e=\"DataTables_Table_\"+n.ext._unique++;var p=h.extend(!0,{},n.models.oSettings,{sDestroyWidth:q[0].style.width,\nsInstance:e,sTableId:e});p.nTable=this;p.oApi=b.internal;p.oInit=g;t.push(p);p.oInstance=1===b.length?b:q.dataTable();eb(g);Ca(g.oLanguage);g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]);g=Xa(h.extend(!0,{},l),g);F(p.oFeatures,g,\"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender\".split(\" \"));F(p,g,[\"asStripeClasses\",\"ajax\",\"fnServerData\",\"fnFormatNumber\",\"sServerMethod\",\n\"aaSorting\",\"aaSortingFixed\",\"aLengthMenu\",\"sPaginationType\",\"sAjaxSource\",\"sAjaxDataProp\",\"iStateDuration\",\"sDom\",\"bSortCellsTop\",\"iTabIndex\",\"fnStateLoadCallback\",\"fnStateSaveCallback\",\"renderer\",\"searchDelay\",\"rowId\",[\"iCookieDuration\",\"iStateDuration\"],[\"oSearch\",\"oPreviousSearch\"],[\"aoSearchCols\",\"aoPreSearchCols\"],[\"iDisplayLength\",\"_iDisplayLength\"]]);F(p.oScroll,g,[[\"sScrollX\",\"sX\"],[\"sScrollXInner\",\"sXInner\"],[\"sScrollY\",\"sY\"],[\"bScrollCollapse\",\"bCollapse\"]]);F(p.oLanguage,g,\"fnInfoCallback\");\nz(p,\"aoDrawCallback\",g.fnDrawCallback,\"user\");z(p,\"aoServerParams\",g.fnServerParams,\"user\");z(p,\"aoStateSaveParams\",g.fnStateSaveParams,\"user\");z(p,\"aoStateLoadParams\",g.fnStateLoadParams,\"user\");z(p,\"aoStateLoaded\",g.fnStateLoaded,\"user\");z(p,\"aoRowCallback\",g.fnRowCallback,\"user\");z(p,\"aoRowCreatedCallback\",g.fnCreatedRow,\"user\");z(p,\"aoHeaderCallback\",g.fnHeaderCallback,\"user\");z(p,\"aoFooterCallback\",g.fnFooterCallback,\"user\");z(p,\"aoInitComplete\",g.fnInitComplete,\"user\");z(p,\"aoPreDrawCallback\",\ng.fnPreDrawCallback,\"user\");p.rowIdFn=S(g.rowId);gb(p);var u=p.oClasses;h.extend(u,n.ext.classes,g.oClasses);q.addClass(u.sTable);p.iInitDisplayStart===k&&(p.iInitDisplayStart=g.iDisplayStart,p._iDisplayStart=g.iDisplayStart);null!==g.iDeferLoading&&(p.bDeferLoading=!0,e=h.isArray(g.iDeferLoading),p._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,p._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var v=p.oLanguage;h.extend(!0,v,g.oLanguage);v.sUrl&&(h.ajax({dataType:\"json\",url:v.sUrl,success:function(a){Ca(a);\nJ(l.oLanguage,a);h.extend(true,v,a);ha(p)},error:function(){ha(p)}}),m=!0);null===g.asStripeClasses&&(p.asStripeClasses=[u.sStripeOdd,u.sStripeEven]);var e=p.asStripeClasses,x=q.children(\"tbody\").find(\"tr\").eq(0);-1!==h.inArray(!0,h.map(e,function(a){return x.hasClass(a)}))&&(h(\"tbody tr\",this).removeClass(e.join(\" \")),p.asDestroyStripes=e.slice());e=[];t=this.getElementsByTagName(\"thead\");0!==t.length&&(ea(p.aoHeader,t[0]),e=ra(p));if(null===g.aoColumns){t=[];j=0;for(i=e.length;j<i;j++)t.push(null)}else t=\ng.aoColumns;j=0;for(i=t.length;j<i;j++)Ea(p,e?e[j]:null);ib(p,g.aoColumnDefs,t,function(a,b){ka(p,a,b)});if(x.length){var w=function(a,b){return a.getAttribute(\"data-\"+b)!==null?b:null};h(x[0]).children(\"th, td\").each(function(a,b){var c=p.aoColumns[a];if(c.mData===a){var d=w(b,\"sort\")||w(b,\"order\"),e=w(b,\"filter\")||w(b,\"search\");if(d!==null||e!==null){c.mData={_:a+\".display\",sort:d!==null?a+\".@data-\"+d:k,type:d!==null?a+\".@data-\"+d:k,filter:e!==null?a+\".@data-\"+e:k};ka(p,a)}}})}var U=p.oFeatures,\ne=function(){if(g.aaSorting===k){var a=p.aaSorting;j=0;for(i=a.length;j<i;j++)a[j][1]=p.aoColumns[j].asSorting[0]}wa(p);U.bSort&&z(p,\"aoDrawCallback\",function(){if(p.bSorted){var a=X(p),b={};h.each(a,function(a,c){b[c.src]=c.dir});r(p,null,\"order\",[p,a,b]);Ib(p)}});z(p,\"aoDrawCallback\",function(){(p.bSorted||y(p)===\"ssp\"||U.bDeferRender)&&wa(p)},\"sc\");var a=q.children(\"caption\").each(function(){this._captionSide=h(this).css(\"caption-side\")}),b=q.children(\"thead\");b.length===0&&(b=h(\"<thead/>\").appendTo(q));\np.nTHead=b[0];b=q.children(\"tbody\");b.length===0&&(b=h(\"<tbody/>\").appendTo(q));p.nTBody=b[0];b=q.children(\"tfoot\");if(b.length===0&&a.length>0&&(p.oScroll.sX!==\"\"||p.oScroll.sY!==\"\"))b=h(\"<tfoot/>\").appendTo(q);if(b.length===0||b.children().length===0)q.addClass(u.sNoFooter);else if(b.length>0){p.nTFoot=b[0];ea(p.aoFooter,p.nTFoot)}if(g.aaData)for(j=0;j<g.aaData.length;j++)O(p,g.aaData[j]);else(p.bDeferLoading||y(p)==\"dom\")&&na(p,h(p.nTBody).children(\"tr\"));p.aiDisplay=p.aiDisplayMaster.slice();\np.bInitialised=true;m===false&&ha(p)};g.bStateSave?(U.bStateSave=!0,z(p,\"aoDrawCallback\",xa,\"state_save\"),Jb(p,g,e)):e()}});b=null;return this},x,s,o,u,Za={},Mb=/[\\r\\n]/g,Aa=/<.*?>/g,Zb=/^\\d{2,4}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{1,2}([T ]{1}\\d{1,2}[:\\.]\\d{2}([\\.:]\\d{2})?)?$/,$b=RegExp(\"(\\\\/|\\\\.|\\\\*|\\\\+|\\\\?|\\\\||\\\\(|\\\\)|\\\\[|\\\\]|\\\\{|\\\\}|\\\\\\\\|\\\\$|\\\\^|\\\\-)\",\"g\"),Ya=/[',$£€¥%\\u2009\\u202F\\u20BD\\u20a9\\u20BArfkɃΞ]/gi,M=function(a){return!a||!0===a||\"-\"===a?!0:!1},Nb=function(a){var b=parseInt(a,10);return!isNaN(b)&&\nisFinite(a)?b:null},Ob=function(a,b){Za[b]||(Za[b]=RegExp(Qa(b),\"g\"));return\"string\"===typeof a&&\".\"!==b?a.replace(/\\./g,\"\").replace(Za[b],\".\"):a},$a=function(a,b,c){var d=\"string\"===typeof a;if(M(a))return!0;b&&d&&(a=Ob(a,b));c&&d&&(a=a.replace(Ya,\"\"));return!isNaN(parseFloat(a))&&isFinite(a)},Pb=function(a,b,c){return M(a)?!0:!(M(a)||\"string\"===typeof a)?null:$a(a.replace(Aa,\"\"),b,c)?!0:null},D=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<\nf;e++)a[e]&&d.push(a[e][b]);return d},ja=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},Y=function(a,b){var c=[],d;b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Qb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},qa=function(a){var b;a:{if(!(2>a.length)){b=a.slice().sort();for(var c=b[0],d=1,e=b.length;d<e;d++){if(b[d]===c){b=!1;break a}c=b[d]}}b=!0}if(b)return a.slice();\nb=[];var e=a.length,f,g=0,d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b};n.util={throttle:function(a,b){var c=b!==k?b:200,d,e;return function(){var b=this,g=+new Date,j=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=k;a.apply(b,j)},c)):(d=g,a.apply(b,j))}},escapeRegex:function(a){return a.replace($b,\"\\\\$1\")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ca=/\\[.*?\\]$/,W=/\\(\\)$/,Qa=n.util.escapeRegex,va=h(\"<div>\")[0],Wb=va.textContent!==k,Yb=\n/<.*?>/g,Oa=n.util.throttle,Rb=[],w=Array.prototype,ac=function(a){var b,c,d=n.settings,e=h.map(d,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&\"table\"===a.nodeName.toLowerCase())return b=h.inArray(a,e),-1!==b?[d[b]]:null;if(a&&\"function\"===typeof a.settings)return a.settings().toArray();\"string\"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,e);return-1!==b?d[b]:null}).toArray()};s=function(a,b){if(!(this instanceof\ns))return new s(a,b);var c=[],d=function(a){(a=ac(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=qa(c);b&&h.merge(this,b);this.selector={rows:null,cols:null,opts:null};s.extend(this,this,Rb)};n.Api=s;h.extend(s.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=\nthis.context;return b.length>a?new s(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new s(this.context,b)},flatten:function(){var a=[];return new s(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var e=[],f,g,j,h,m,l=this.context,\nn,o,u=this.selector;\"string\"===typeof a&&(d=c,c=b,b=a,a=!1);g=0;for(j=l.length;g<j;g++){var r=new s(l[g]);if(\"table\"===b)f=c.call(r,l[g],g),f!==k&&e.push(f);else if(\"columns\"===b||\"rows\"===b)f=c.call(r,l[g],this[g],g),f!==k&&e.push(f);else if(\"column\"===b||\"column-rows\"===b||\"row\"===b||\"cell\"===b){o=this[g];\"column-rows\"===b&&(n=Ba(l[g],u.opts));h=0;for(m=o.length;h<m;h++)f=o[h],f=\"cell\"===b?c.call(r,l[g],f.row,f.column,g,h):c.call(r,l[g],f,g,h,n),f!==k&&e.push(f)}}return e.length||d?(a=new s(l,a?\ne.concat.apply([],e):e),b=a.selector,b.rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new s(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return hb(this,a,b,0,this.length,\n1)},reduceRight:w.reduceRight||function(a,b){return hb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,slice:function(){return new s(this.context,this)},sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new s(this.context,qa(this))},unshift:w.unshift});s.extend=function(a,b,c){if(c.length&&b&&(b instanceof s||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=\nb.apply(a,arguments);s.extend(d,d,c.methodExt);return d}};d=0;for(e=c.length;d<e;d++)f=c[d],b[f.name]=\"function\"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,s.extend(a,b[f.name],f.propExt)}};s.register=o=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<d;c++)s.register(a[c],b);else for(var e=a.split(\".\"),f=Rb,g,j,c=0,d=e.length;c<d;c++){g=(j=-1!==e[c].indexOf(\"()\"))?e[c].replace(\"()\",\"\"):e[c];var i;a:{i=0;for(var m=f.length;i<m;i++)if(f[i].name===g){i=\nf[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===d-1?i.val=b:f=j?i.methodExt:i.propExt}};s.registerPlural=u=function(a,b,c){s.register(a,c);s.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof s?a.length?h.isArray(a[0])?new s(a.context,a[0]):a[0]:k:a})};o(\"tables()\",function(a){var b;if(a){b=s;var c=this.context;if(\"number\"===typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,\nd);return c[a]}).toArray();b=new b(a)}else b=this;return b});o(\"table()\",function(a){var a=this.tables(a),b=a.context;return b.length?new s(b[0]):a});u(\"tables().nodes()\",\"table().node()\",function(){return this.iterator(\"table\",function(a){return a.nTable},1)});u(\"tables().body()\",\"table().body()\",function(){return this.iterator(\"table\",function(a){return a.nTBody},1)});u(\"tables().header()\",\"table().header()\",function(){return this.iterator(\"table\",function(a){return a.nTHead},1)});u(\"tables().footer()\",\n\"table().footer()\",function(){return this.iterator(\"table\",function(a){return a.nTFoot},1)});u(\"tables().containers()\",\"table().container()\",function(){return this.iterator(\"table\",function(a){return a.nTableWrapper},1)});o(\"draw()\",function(a){return this.iterator(\"table\",function(b){\"page\"===a?P(b):(\"string\"===typeof a&&(a=\"full-hold\"===a?!1:!0),T(b,!1===a))})});o(\"page()\",function(a){return a===k?this.page.info().page:this.iterator(\"table\",function(b){Ta(b,a)})});o(\"page.info()\",function(){if(0===\nthis.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,serverSide:\"ssp\"===y(a)}});o(\"page.len()\",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator(\"table\",function(b){Ra(b,a)})});var Sb=function(a,b,c){if(c){var d=new s(a);\nd.one(\"draw\",function(){c(d.ajax.json())})}if(\"ssp\"==y(a))T(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort();sa(a,[],function(c){oa(a);for(var c=ta(a,c),d=0,e=c.length;d<e;d++)O(a,c[d]);T(a,b);C(a,!1)})}};o(\"ajax.json()\",function(){var a=this.context;if(0<a.length)return a[0].json});o(\"ajax.params()\",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});o(\"ajax.reload()\",function(a,b){return this.iterator(\"table\",function(c){Sb(c,!1===b,a)})});o(\"ajax.url()\",function(a){var b=\nthis.context;if(a===k){if(0===b.length)return k;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator(\"table\",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});o(\"ajax.url().load()\",function(a,b){return this.iterator(\"table\",function(c){Sb(c,!1===b,a)})});var ab=function(a,b,c,d,e){var f=[],g,j,i,m,l,n;i=typeof b;if(!b||\"string\"===i||\"function\"===i||b.length===k)b=[b];i=0;for(m=b.length;i<m;i++){j=b[i]&&b[i].split&&!b[i].match(/[\\[\\(:]/)?b[i].split(\",\"):\n[b[i]];l=0;for(n=j.length;l<n;l++)(g=c(\"string\"===typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g))}a=x.selector[a];if(a.length){i=0;for(m=a.length;i<m;i++)f=a[i](d,e,f)}return qa(f)},bb=function(a){a||(a={});a.filter&&a.search===k&&(a.search=a.filter);return h.extend({search:\"none\",order:\"current\",page:\"all\"},a)},cb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ba=function(a,b){var c,\nd,e,f=[],g=a.aiDisplay;e=a.aiDisplayMaster;var j=b.search;c=b.order;d=b.page;if(\"ssp\"==y(a))return\"removed\"===j?[]:Y(0,e.length);if(\"current\"==d){c=a._iDisplayStart;for(d=a.fnDisplayEnd();c<d;c++)f.push(g[c])}else if(\"current\"==c||\"applied\"==c)if(\"none\"==j)f=e.slice();else if(\"applied\"==j)f=g.slice();else{if(\"removed\"==j){var i={};c=0;for(d=g.length;c<d;c++)i[g[c]]=null;f=h.map(e,function(a){return!i.hasOwnProperty(a)?a:null})}}else if(\"index\"==c||\"original\"==c){c=0;for(d=a.aoData.length;c<d;c++)\"none\"==\nj?f.push(c):(e=h.inArray(c,g),(-1===e&&\"removed\"==j||0<=e&&\"applied\"==j)&&f.push(c))}return f};o(\"rows()\",function(a,b){a===k?a=\"\":h.isPlainObject(a)&&(b=a,a=\"\");var b=bb(b),c=this.iterator(\"table\",function(c){var e=b,f;return ab(\"row\",a,function(a){var b=Nb(a),i=c.aoData;if(b!==null&&!e)return[b];f||(f=Ba(c,e));if(b!==null&&h.inArray(b,f)!==-1)return[b];if(a===null||a===k||a===\"\")return f;if(typeof a===\"function\")return h.map(f,function(b){var c=i[b];return a(b,c._aData,c.nTr)?b:null});if(a.nodeName){var b=\na._DT_RowIndex,m=a._DT_CellIndex;if(b!==k)return i[b]&&i[b].nTr===a?[b]:[];if(m)return i[m.row]&&i[m.row].nTr===a?[m.row]:[];b=h(a).closest(\"*[data-dt-row]\");return b.length?[b.data(\"dt-row\")]:[]}if(typeof a===\"string\"&&a.charAt(0)===\"#\"){b=c.aIds[a.replace(/^#/,\"\")];if(b!==k)return[b.idx]}b=Qb(ja(c.aoData,f,\"nTr\"));return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);c.selector.rows=a;c.selector.opts=b;return c});o(\"rows().nodes()\",function(){return this.iterator(\"row\",\nfunction(a,b){return a.aoData[b].nTr||k},1)});o(\"rows().data()\",function(){return this.iterator(!0,\"rows\",function(a,b){return ja(a.aoData,b,\"_aData\")},1)});u(\"rows().cache()\",\"row().cache()\",function(a){return this.iterator(\"row\",function(b,c){var d=b.aoData[c];return\"search\"===a?d._aFilterData:d._aSortData},1)});u(\"rows().invalidate()\",\"row().invalidate()\",function(a){return this.iterator(\"row\",function(b,c){da(b,c,a)})});u(\"rows().indexes()\",\"row().index()\",function(){return this.iterator(\"row\",\nfunction(a,b){return b},1)});u(\"rows().ids()\",\"row().id()\",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?\"#\":\"\")+h)}return new s(c,b)});u(\"rows().remove()\",\"row().remove()\",function(){var a=this;this.iterator(\"row\",function(b,c,d){var e=b.aoData,f=e[c],g,h,i,m,l;e.splice(c,1);g=0;for(h=e.length;g<h;g++)if(i=e[g],l=i.anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l){i=0;for(m=\nl.length;i<m;i++)l[i]._DT_CellIndex.row=g}pa(b.aiDisplayMaster,c);pa(b.aiDisplay,c);pa(a[d],c,!1);0<b._iRecordsDisplay&&b._iRecordsDisplay--;Sa(b);c=b.rowIdFn(f._aData);c!==k&&delete b.aIds[c]});this.iterator(\"table\",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c});return this});o(\"rows.add()\",function(a){var b=this.iterator(\"table\",function(b){var c,f,g,h=[];f=0;for(g=a.length;f<g;f++)c=a[f],c.nodeName&&\"TR\"===c.nodeName.toUpperCase()?h.push(na(b,c)[0]):h.push(O(b,c));return h},\n1),c=this.rows(-1);c.pop();h.merge(c,b);return c});o(\"row()\",function(a,b){return cb(this.rows(a,b))});o(\"row().data()\",function(a){var b=this.context;if(a===k)return b.length&&this.length?b[0].aoData[this[0]]._aData:k;var c=b[0].aoData[this[0]];c._aData=a;h.isArray(a)&&c.nTr.id&&N(b[0].rowId)(a,c.nTr.id);da(b[0],this[0],\"data\");return this});o(\"row().node()\",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});o(\"row.add()\",function(a){a instanceof h&&\na.length&&(a=a[0]);var b=this.iterator(\"table\",function(b){return a.nodeName&&\"TR\"===a.nodeName.toUpperCase()?na(b,a)[0]:O(b,a)});return this.row(b[0])});var db=function(a,b){var c=a.context;if(c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details)c._details.remove(),c._detailsShow=k,c._details=k},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new s(e),g=e.aoData;f.off(\"draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details\");\n0<D(g,\"_details\").length&&(f.on(\"draw.dt.DT_details\",function(a,b){e===b&&f.rows({page:\"current\"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on(\"column-visibility.dt.DT_details\",function(a,b){if(e===b)for(var c,d=V(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children(\"td[colspan]\").attr(\"colspan\",d)}),f.on(\"destroy.dt.DT_details\",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&db(f,c)}))}}};o(\"row().child()\",function(a,b){var c=\nthis.context;if(a===k)return c.length&&this.length?c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)db(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&\"tr\"===a.nodeName.toLowerCase()?e.push(a):(c=h(\"<tr><td/></tr>\").addClass(b),h(\"td\",c).addClass(b).html(a)[0].colSpan=V(d),e.push(c[0]))};f(a,b);c._details&&c._details.detach();c._details=h(e);\nc._detailsShow&&c._details.insertAfter(c.nTr)}return this});o([\"row().child.show()\",\"row().child().show()\"],function(){Tb(this,!0);return this});o([\"row().child.hide()\",\"row().child().hide()\"],function(){Tb(this,!1);return this});o([\"row().child.remove()\",\"row().child().remove()\"],function(){db(this);return this});o(\"row().child.isShown()\",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var bc=/^([^:]+):(name|visIdx|visible)$/,Ub=function(a,b,\nc,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(B(a,e[d],b));return c};o(\"columns()\",function(a,b){a===k?a=\"\":h.isPlainObject(a)&&(b=a,a=\"\");var b=bb(b),c=this.iterator(\"table\",function(c){var e=a,f=b,g=c.aoColumns,j=D(g,\"sName\"),i=D(g,\"nTh\");return ab(\"column\",e,function(a){var b=Nb(a);if(a===\"\")return Y(g.length);if(b!==null)return[b>=0?b:g.length+b];if(typeof a===\"function\"){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Ub(c,f,0,0,e),i[f])?f:null})}var k=typeof a===\"string\"?a.match(bc):\n\"\";if(k)switch(k[2]){case \"visIdx\":case \"visible\":b=parseInt(k[1],10);if(b<0){var n=h.map(g,function(a,b){return a.bVisible?b:null});return[n[n.length+b]]}return[aa(c,b)];case \"name\":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}if(a.nodeName&&a._DT_CellIndex)return[a._DT_CellIndex.column];b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray();if(b.length||!a.nodeName)return b;b=h(a).closest(\"*[data-dt-column]\");return b.length?[b.data(\"dt-column\")]:[]},c,f)},\n1);c.selector.cols=a;c.selector.opts=b;return c});u(\"columns().header()\",\"column().header()\",function(){return this.iterator(\"column\",function(a,b){return a.aoColumns[b].nTh},1)});u(\"columns().footer()\",\"column().footer()\",function(){return this.iterator(\"column\",function(a,b){return a.aoColumns[b].nTf},1)});u(\"columns().data()\",\"column().data()\",function(){return this.iterator(\"column-rows\",Ub,1)});u(\"columns().dataSrc()\",\"column().dataSrc()\",function(){return this.iterator(\"column\",function(a,b){return a.aoColumns[b].mData},\n1)});u(\"columns().cache()\",\"column().cache()\",function(a){return this.iterator(\"column-rows\",function(b,c,d,e,f){return ja(b.aoData,f,\"search\"===a?\"_aFilterData\":\"_aSortData\",c)},1)});u(\"columns().nodes()\",\"column().nodes()\",function(){return this.iterator(\"column-rows\",function(a,b,c,d,e){return ja(a.aoData,e,\"anCells\",b)},1)});u(\"columns().visible()\",\"column().visible()\",function(a,b){var c=this.iterator(\"column\",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var f=b.aoColumns,g=f[c],j=b.aoData,\ni,m,l;if(a!==k&&g.bVisible!==a){if(a){var n=h.inArray(!0,D(f,\"bVisible\"),c+1);i=0;for(m=j.length;i<m;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[n]||null)}else h(D(b.aoData,\"anCells\",c)).detach();g.bVisible=a;fa(b,b.aoHeader);fa(b,b.aoFooter);b.aiDisplay.length||h(b.nTBody).find(\"td[colspan]\").attr(\"colspan\",V(b));xa(b)}});a!==k&&(this.iterator(\"column\",function(c,e){r(c,null,\"column-visibility\",[c,e,a,b])}),(b===k||b)&&this.columns.adjust());return c});u(\"columns().indexes()\",\"column().index()\",\nfunction(a){return this.iterator(\"column\",function(b,c){return\"visible\"===a?ba(b,c):c},1)});o(\"columns.adjust()\",function(){return this.iterator(\"table\",function(a){$(a)},1)});o(\"column.index()\",function(a,b){if(0!==this.context.length){var c=this.context[0];if(\"fromVisible\"===a||\"toData\"===a)return aa(c,b);if(\"fromData\"===a||\"toVisible\"===a)return ba(c,b)}});o(\"column()\",function(a,b){return cb(this.columns(a,b))});o(\"cells()\",function(a,b,c){h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null));\nh.isPlainObject(b)&&(c=b,b=null);if(null===b||b===k)return this.iterator(\"table\",function(b){var d=a,e=bb(c),f=b.aoData,g=Ba(b,e),j=Qb(ja(f,g,\"anCells\")),i=h([].concat.apply([],j)),l,m=b.aoColumns.length,n,o,u,s,r,v;return ab(\"cell\",d,function(a){var c=typeof a===\"function\";if(a===null||a===k||c){n=[];o=0;for(u=g.length;o<u;o++){l=g[o];for(s=0;s<m;s++){r={row:l,column:s};if(c){v=f[l];a(r,B(b,l,s),v.anCells?v.anCells[s]:null)&&n.push(r)}else n.push(r)}}return n}if(h.isPlainObject(a))return a.column!==\nk&&a.row!==k&&h.inArray(a.row,g)!==-1?[a]:[];c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();if(c.length||!a.nodeName)return c;v=h(a).closest(\"*[data-dt-row]\");return v.length?[{row:v.data(\"dt-row\"),column:v.data(\"dt-column\")}]:[]},b,e)});var d=this.columns(b),e=this.rows(a),f,g,j,i,m;this.iterator(\"table\",function(a,b){f=[];g=0;for(j=e[b].length;g<j;g++){i=0;for(m=d[b].length;i<m;i++)f.push({row:e[b][g],column:d[b][i]})}},1);var l=this.cells(f,\nc);h.extend(l.selector,{cols:b,rows:a,opts:c});return l});u(\"cells().nodes()\",\"cell().node()\",function(){return this.iterator(\"cell\",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:k},1)});o(\"cells().data()\",function(){return this.iterator(\"cell\",function(a,b,c){return B(a,b,c)},1)});u(\"cells().cache()\",\"cell().cache()\",function(a){a=\"search\"===a?\"_aFilterData\":\"_aSortData\";return this.iterator(\"cell\",function(b,c,d){return b.aoData[c][a][d]},1)});u(\"cells().render()\",\"cell().render()\",\nfunction(a){return this.iterator(\"cell\",function(b,c,d){return B(b,c,d,a)},1)});u(\"cells().indexes()\",\"cell().index()\",function(){return this.iterator(\"cell\",function(a,b,c){return{row:b,column:c,columnVisible:ba(a,c)}},1)});u(\"cells().invalidate()\",\"cell().invalidate()\",function(a){return this.iterator(\"cell\",function(b,c,d){da(b,c,a,d)})});o(\"cell()\",function(a,b,c){return cb(this.cells(a,b,c))});o(\"cell().data()\",function(a){var b=this.context,c=this[0];if(a===k)return b.length&&c.length?B(b[0],\nc[0].row,c[0].column):k;jb(b[0],c[0].row,c[0].column,a);da(b[0],c[0].row,\"data\",c[0].column);return this});o(\"order()\",function(a,b){var c=this.context;if(a===k)return 0!==c.length?c[0].aaSorting:k;\"number\"===typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator(\"table\",function(b){b.aaSorting=a.slice()})});o(\"order.listener()\",function(a,b,c){return this.iterator(\"table\",function(d){Ma(d,a,b,c)})});o(\"order.fixed()\",function(a){if(!a){var b=\nthis.context,b=b.length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}return this.iterator(\"table\",function(b){b.aaSortingFixed=h.extend(!0,{},a)})});o([\"columns().order()\",\"column().order()\"],function(a){var b=this;return this.iterator(\"table\",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});o(\"search()\",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator(\"table\",function(e){e.oFeatures.bFilter&&ga(e,\nh.extend({},e.oPreviousSearch,{sSearch:a+\"\",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});u(\"columns().search()\",\"column().search()\",function(a,b,c,d){return this.iterator(\"column\",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+\"\",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ga(e,e.oPreviousSearch,1))})});o(\"state()\",function(){return this.context.length?this.context[0].oSavedState:\nnull});o(\"state.clear()\",function(){return this.iterator(\"table\",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});o(\"state.loaded()\",function(){return this.context.length?this.context[0].oLoadedState:null});o(\"state.save()\",function(){return this.iterator(\"table\",function(a){xa(a)})});n.versionCheck=n.fnVersionCheck=function(a){for(var b=n.version.split(\".\"),a=a.split(\".\"),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};n.isDataTable=\nn.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;if(a instanceof n.Api)return!0;h.each(n.settings,function(a,e){var f=e.nScrollHead?h(\"table\",e.nScrollHead)[0]:null,g=e.nScrollFoot?h(\"table\",e.nScrollFoot)[0]:null;if(e.nTable===b||f===b||g===b)c=!0});return c};n.tables=n.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(n.settings,function(b){if(!a||a&&h(b.nTable).is(\":visible\"))return b.nTable});return b?new s(c):c};n.camelToHungarian=J;o(\"$()\",function(a,b){var c=\nthis.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each([\"on\",\"one\",\"off\"],function(a,b){o(b+\"()\",function(){var a=Array.prototype.slice.call(arguments);a[0]=h.map(a[0].split(/\\s/),function(a){return!a.match(/\\.dt\\b/)?a+\".dt\":a}).join(\" \");var d=h(this.tables().nodes());d[b].apply(d,a);return this})});o(\"clear()\",function(){return this.iterator(\"table\",function(a){oa(a)})});o(\"settings()\",function(){return new s(this.context,this.context)});o(\"init()\",function(){var a=\nthis.context;return a.length?a[0].oInit:null});o(\"data()\",function(){return this.iterator(\"table\",function(a){return D(a.aoData,\"_aData\")}).flatten()});o(\"destroy()\",function(a){a=a||!1;return this.iterator(\"table\",function(b){var c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),k=h(b.nTableWrapper),l=h.map(b.aoData,function(a){return a.nTr}),o;b.bDestroying=!0;r(b,\"aoDestroyCallback\",\"destroy\",[b]);a||(new s(b)).columns().visible(!0);k.off(\".DT\").find(\":not(tbody *)\").off(\".DT\");\nh(E).off(\".DT-\"+b.sInstance);e!=g.parentNode&&(i.children(\"thead\").detach(),i.append(g));j&&e!=j.parentNode&&(i.children(\"tfoot\").detach(),i.append(j));b.aaSorting=[];b.aaSortingFixed=[];wa(b);h(l).removeClass(b.asStripeClasses.join(\" \"));h(\"th, td\",g).removeClass(d.sSortable+\" \"+d.sSortableAsc+\" \"+d.sSortableDesc+\" \"+d.sSortableNone);f.children().detach();f.append(l);g=a?\"remove\":\"detach\";i[g]();k[g]();!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css(\"width\",b.sDestroyWidth).removeClass(d.sTable),\n(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])}));c=h.inArray(b,n.settings);-1!==c&&n.settings.splice(c,1)})});h.each([\"column\",\"row\",\"cell\"],function(a,b){o(b+\"s().every()\",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,m){a.call(e[b](g,\"cell\"===b?h:d,\"cell\"===b?d:k),g,h,i,m)})})});o(\"i18n()\",function(a,b,c){var d=this.context[0],a=S(a)(d.oLanguage);a===k&&(a=b);c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:\na._);return a.replace(\"%d\",c)});n.version=\"1.10.18\";n.settings=[];n.models={};n.models.oSearch={bCaseInsensitive:!0,sSearch:\"\",bRegex:!1,bSmart:!0};n.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:\"\",src:null,idx:-1};n.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,\nsClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:\"std\",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};n.defaults={aaData:null,aaSorting:[[0,\"asc\"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,\nbSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem(\"DataTables_\"+\na.sInstance+\"_\"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem(\"DataTables_\"+a.sInstance+\"_\"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:\": activate to sort column ascending\",sSortDescending:\": activate to sort column descending\"},\noPaginate:{sFirst:\"First\",sLast:\"Last\",sNext:\"Next\",sPrevious:\"Previous\"},sEmptyTable:\"No data available in table\",sInfo:\"Showing _START_ to _END_ of _TOTAL_ entries\",sInfoEmpty:\"Showing 0 to 0 of 0 entries\",sInfoFiltered:\"(filtered from _MAX_ total entries)\",sInfoPostFix:\"\",sDecimal:\"\",sThousands:\",\",sLengthMenu:\"Show _MENU_ entries\",sLoadingRecords:\"Loading...\",sProcessing:\"Processing...\",sSearch:\"Search:\",sSearchPlaceholder:\"\",sUrl:\"\",sZeroRecords:\"No matching records found\"},oSearch:h.extend({},\nn.models.oSearch),sAjaxDataProp:\"data\",sAjaxSource:null,sDom:\"lfrtip\",searchDelay:null,sPaginationType:\"simple_numbers\",sScrollX:\"\",sScrollXInner:\"\",sScrollY:\"\",sServerMethod:\"GET\",renderer:null,rowId:\"DT_RowId\"};Z(n.defaults);n.defaults.column={aDataSort:null,iDataSort:-1,asSorting:[\"asc\",\"desc\"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:\"td\",sClass:\"\",sContentPadding:\"\",sDefaultContent:null,sName:\"\",sSortDataType:\"std\",sTitle:null,sType:null,sWidth:null};\nZ(n.defaults.column);n.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],\naoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:\"\",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:\"two_button\",\niStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return\"ssp\"==y(this)?1*this._iRecordsTotal:\nthis.aiDisplayMaster.length},fnRecordsDisplay:function(){return\"ssp\"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};n.ext=x={buttons:{},\nclasses:{},builder:\"-source-\",errMode:\"alert\",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:n.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:n.version};h.extend(x,{afnFiltering:x.search,aTypes:x.type.detect,ofnSearch:x.type.search,oSort:x.type.order,afnSortData:x.order,aoFeatures:x.feature,oApi:x.internal,oStdClasses:x.classes,oPagination:x.pager});\nh.extend(n.ext.classes,{sTable:\"dataTable\",sNoFooter:\"no-footer\",sPageButton:\"paginate_button\",sPageButtonActive:\"current\",sPageButtonDisabled:\"disabled\",sStripeOdd:\"odd\",sStripeEven:\"even\",sRowEmpty:\"dataTables_empty\",sWrapper:\"dataTables_wrapper\",sFilter:\"dataTables_filter\",sInfo:\"dataTables_info\",sPaging:\"dataTables_paginate paging_\",sLength:\"dataTables_length\",sProcessing:\"dataTables_processing\",sSortAsc:\"sorting_asc\",sSortDesc:\"sorting_desc\",sSortable:\"sorting\",sSortableAsc:\"sorting_asc_disabled\",\nsSortableDesc:\"sorting_desc_disabled\",sSortableNone:\"sorting_disabled\",sSortColumn:\"sorting_\",sFilterInput:\"\",sLengthSelect:\"\",sScrollWrapper:\"dataTables_scroll\",sScrollHead:\"dataTables_scrollHead\",sScrollHeadInner:\"dataTables_scrollHeadInner\",sScrollBody:\"dataTables_scrollBody\",sScrollFoot:\"dataTables_scrollFoot\",sScrollFootInner:\"dataTables_scrollFootInner\",sHeaderTH:\"\",sFooterTH:\"\",sSortJUIAsc:\"\",sSortJUIDesc:\"\",sSortJUI:\"\",sSortJUIAscAllowed:\"\",sSortJUIDescAllowed:\"\",sSortJUIWrapper:\"\",sSortIcon:\"\",\nsJUIHeader:\"\",sJUIFooter:\"\"});var Kb=n.ext.pager;h.extend(Kb,{simple:function(){return[\"previous\",\"next\"]},full:function(){return[\"first\",\"previous\",\"next\",\"last\"]},numbers:function(a,b){return[ia(a,b)]},simple_numbers:function(a,b){return[\"previous\",ia(a,b),\"next\"]},full_numbers:function(a,b){return[\"first\",\"previous\",ia(a,b),\"next\",\"last\"]},first_last_numbers:function(a,b){return[\"first\",ia(a,b),\"last\"]},_numbers:ia,numbers_length:7});h.extend(!0,n.ext.renderer,{pageButton:{_:function(a,b,c,d,e,\nf){var g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},m,l,n=0,o=function(b,d){var k,s,u,r,v=function(b){Ta(a,b.data.action,true)};k=0;for(s=d.length;k<s;k++){r=d[k];if(h.isArray(r)){u=h(\"<\"+(r.DT_el||\"div\")+\"/>\").appendTo(b);o(u,r)}else{m=null;l=\"\";switch(r){case \"ellipsis\":b.append('<span class=\"ellipsis\">&#x2026;</span>');break;case \"first\":m=j.sFirst;l=r+(e>0?\"\":\" \"+g.sPageButtonDisabled);break;case \"previous\":m=j.sPrevious;l=r+(e>0?\"\":\" \"+g.sPageButtonDisabled);break;case \"next\":m=\nj.sNext;l=r+(e<f-1?\"\":\" \"+g.sPageButtonDisabled);break;case \"last\":m=j.sLast;l=r+(e<f-1?\"\":\" \"+g.sPageButtonDisabled);break;default:m=r+1;l=e===r?g.sPageButtonActive:\"\"}if(m!==null){u=h(\"<a>\",{\"class\":g.sPageButton+\" \"+l,\"aria-controls\":a.sTableId,\"aria-label\":i[r],\"data-dt-idx\":n,tabindex:a.iTabIndex,id:c===0&&typeof r===\"string\"?a.sTableId+\"_\"+r:null}).html(m).appendTo(b);Wa(u,{action:r},v);n++}}}},s;try{s=h(b).find(H.activeElement).data(\"dt-idx\")}catch(u){}o(h(b).empty(),d);s!==k&&h(b).find(\"[data-dt-idx=\"+\ns+\"]\").focus()}}});h.extend(n.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return $a(a,c)?\"num\"+c:null},function(a){if(a&&!(a instanceof Date)&&!Zb.test(a))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||M(a)?\"date\":null},function(a,b){var c=b.oLanguage.sDecimal;return $a(a,c,!0)?\"num-fmt\"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?\"html-num\"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?\"html-num-fmt\"+c:null},function(a){return M(a)||\n\"string\"===typeof a&&-1!==a.indexOf(\"<\")?\"html\":null}]);h.extend(n.ext.type.search,{html:function(a){return M(a)?a:\"string\"===typeof a?a.replace(Mb,\" \").replace(Aa,\"\"):\"\"},string:function(a){return M(a)?a:\"string\"===typeof a?a.replace(Mb,\" \"):a}});var za=function(a,b,c,d){if(0!==a&&(!a||\"-\"===a))return-Infinity;b&&(a=Ob(a,b));a.replace&&(c&&(a=a.replace(c,\"\")),d&&(a=a.replace(d,\"\")));return 1*a};h.extend(x.type.order,{\"date-pre\":function(a){a=Date.parse(a);return isNaN(a)?-Infinity:a},\"html-pre\":function(a){return M(a)?\n\"\":a.replace?a.replace(/<.*?>/g,\"\").toLowerCase():a+\"\"},\"string-pre\":function(a){return M(a)?\"\":\"string\"===typeof a?a.toLowerCase():!a.toString?\"\":a.toString()},\"string-asc\":function(a,b){return a<b?-1:a>b?1:0},\"string-desc\":function(a,b){return a<b?1:a>b?-1:0}});Da(\"\");h.extend(!0,n.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on(\"order.dt.DT\",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(c.sSortingClass+\" \"+d.sSortAsc+\" \"+d.sSortDesc).addClass(h[e]==\"asc\"?d.sSortAsc:h[e]==\"desc\"?d.sSortDesc:\nc.sSortingClass)}})},jqueryui:function(a,b,c,d){h(\"<div/>\").addClass(d.sSortJUIWrapper).append(b.contents()).append(h(\"<span/>\").addClass(d.sSortIcon+\" \"+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on(\"order.dt.DT\",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(d.sSortAsc+\" \"+d.sSortDesc).addClass(h[e]==\"asc\"?d.sSortAsc:h[e]==\"desc\"?d.sSortDesc:c.sSortingClass);b.find(\"span.\"+d.sSortIcon).removeClass(d.sSortJUIAsc+\" \"+d.sSortJUIDesc+\" \"+d.sSortJUI+\" \"+d.sSortJUIAscAllowed+\" \"+d.sSortJUIDescAllowed).addClass(h[e]==\n\"asc\"?d.sSortJUIAsc:h[e]==\"desc\"?d.sSortJUIDesc:c.sSortingClassJUI)}})}}});var Vb=function(a){return\"string\"===typeof a?a.replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\"):a};n.render={number:function(a,b,c,d,e){return{display:function(f){if(\"number\"!==typeof f&&\"string\"!==typeof f)return f;var g=0>f?\"-\":\"\",h=parseFloat(f);if(isNaN(h))return Vb(f);h=h.toFixed(c);f=Math.abs(h);h=parseInt(f,10);f=c?b+(f-h).toFixed(c).substring(2):\"\";return g+(d||\"\")+h.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\na)+f+(e||\"\")}}},text:function(){return{display:Vb}}};h.extend(n.ext.internal,{_fnExternApiFunc:Lb,_fnBuildAjax:sa,_fnAjaxUpdate:lb,_fnAjaxParameters:ub,_fnAjaxUpdateDraw:vb,_fnAjaxDataSrc:ta,_fnAddColumn:Ea,_fnColumnOptions:ka,_fnAdjustColumnSizing:$,_fnVisibleToColumnIndex:aa,_fnColumnIndexToVisible:ba,_fnVisbleColumns:V,_fnGetColumns:ma,_fnColumnTypes:Ga,_fnApplyColumnDefs:ib,_fnHungarianMap:Z,_fnCamelToHungarian:J,_fnLanguageCompat:Ca,_fnBrowserDetect:gb,_fnAddData:O,_fnAddTr:na,_fnNodeToDataIndex:function(a,\nb){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:jb,_fnSplitObjNotation:Ja,_fnGetObjectDataFn:S,_fnSetObjectDataFn:N,_fnGetDataMaster:Ka,_fnClearTable:oa,_fnDeleteIndex:pa,_fnInvalidate:da,_fnGetRowElements:Ia,_fnCreateTr:Ha,_fnBuildHead:kb,_fnDrawHead:fa,_fnDraw:P,_fnReDraw:T,_fnAddOptionsHtml:nb,_fnDetectHeader:ea,_fnGetUniqueThs:ra,_fnFeatureHtmlFilter:pb,_fnFilterComplete:ga,_fnFilterCustom:yb,\n_fnFilterColumn:xb,_fnFilter:wb,_fnFilterCreateSearch:Pa,_fnEscapeRegex:Qa,_fnFilterData:zb,_fnFeatureHtmlInfo:sb,_fnUpdateInfo:Cb,_fnInfoMacros:Db,_fnInitialise:ha,_fnInitComplete:ua,_fnLengthChange:Ra,_fnFeatureHtmlLength:ob,_fnFeatureHtmlPaginate:tb,_fnPageChange:Ta,_fnFeatureHtmlProcessing:qb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:rb,_fnScrollDraw:la,_fnApplyToChildren:I,_fnCalculateColumnWidths:Fa,_fnThrottle:Oa,_fnConvertToWidth:Eb,_fnGetWidestNode:Fb,_fnGetMaxLenString:Gb,_fnStringToCss:v,\n_fnSortFlatten:X,_fnSort:mb,_fnSortAria:Ib,_fnSortListener:Va,_fnSortAttachListener:Ma,_fnSortingClasses:wa,_fnSortData:Hb,_fnSaveState:xa,_fnLoadState:Jb,_fnSettingsFromNode:ya,_fnLog:K,_fnMap:F,_fnBindAction:Wa,_fnCallbackReg:z,_fnCallbackFire:r,_fnLengthOverflow:Sa,_fnRenderer:Na,_fnDataSource:y,_fnRowAttributes:La,_fnExtend:Xa,_fnCalculateEnd:function(){}});h.fn.dataTable=n;n.$=h;h.fn.dataTableSettings=n.settings;h.fn.dataTableExt=n.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};\nh.each(n,function(a,b){h.fn.DataTable[a]=b});return h.fn.dataTable});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"password.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/forgotPassword/password.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./password.html\");\nvar User;\nmodule.link(\"/imports/api/user/user.js\", {\n  User: function (v) {\n    User = v;\n  }\n}, 0);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 1);\nvar Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 2);\nvar Tabular;\nmodule.link(\"meteor/aldeed:tabular\", {\n  \"default\": function (v) {\n    Tabular = v;\n  }\n}, 3);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 4);\nvar dataTablesBootstrap;\nmodule.link(\"datatables.net-bs\", {\n  \"default\": function (v) {\n    dataTablesBootstrap = v;\n  }\n}, 5);\nmodule.link(\"./dataTables.bootstrap4.min.js\");\nmodule.link(\"./dataTables.foundation.min.js\");\nmodule.link(\"./dataTables.jqueryui.min.js\");\nmodule.link(\"./dataTables.semanticui.min.js\");\nmodule.link(\"./jquery.dataTables.min.js\");\nvar searchUser = new ReactiveVar(\"\");\nTemplate.App_password.onCreated(function () {\n  var self = this;\n  self.autorun(function () {\n    Meteor.subscribe('users');\n  });\n});\nTemplate.App_password.onRendered(function () {\n  Meteor.setTimeout(function () {\n    $(document).ready(function () {\n      $('table').DataTable({\n        \"order\": [[3, \"desc\"]]\n      });\n    });\n    $(function () {\n      $('#table').on('click', 'th', function () {\n        var index = $(this).index(),\n            rows = [],\n            thClass = $(this).hasClass('asc') ? 'desc' : 'asc';\n        $('#table th').removeClass('asc desc');\n        $(this).addClass(thClass);\n        $('#table tbody tr').each(function (index, row) {\n          rows.push($(row).detach());\n        });\n        rows.sort(function (a, b) {\n          var aValue = $(a).find('td').eq(index).text(),\n              bValue = $(b).find('td').eq(index).text();\n          return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;\n        });\n\n        if ($(this).hasClass('desc')) {\n          rows.reverse();\n        }\n\n        $.each(rows, function (index, row) {\n          $('#table tbody').append(row);\n        });\n      });\n    });\n  }, 400);\n});\nTemplate.App_password.helpers({\n  getUsers: function () {\n    return User.find();\n  }\n});\nTemplate.App_password.events({\n  \"click .changEPassword\": function () {\n    var newPassword = $(\".passwords-\" + this._id).val();\n    Meteor.call('user.changePassword', this._id, this.password, newPassword, function (err, result) {\n      if (!err) {\n        console.log('Your password is change');\n      } else {\n        console.log('there is an error');\n      }\n    });\n  },\n  \"click .update\": function () {\n    var name = $(\".input-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      name: name\n    });\n  },\n  \"click .lname\": function () {\n    var lastName = $(\".lsname-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      lastName: lastName\n    });\n  },\n  \"click .changephone\": function () {\n    var phone = $(\".phone-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      phone: phone\n    });\n  },\n  \"click .changeemail\": function () {\n    var email = $(\".emails-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      email: email\n    });\n  },\n  \"click #logout\": function (evt) {\n    evt.preventDefault();\n    Session.clear('u_l');\n    return FlowRouter.go(\"/\");\n  }\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"messenger\":{\"messenger.html\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/messenger/messenger.html                                                                          //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./template.messenger.js\", { \"*\": \"*+\" });\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.messenger.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/messenger/template.messenger.js                                                                   //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n\nTemplate.__checkName(\"App_messenger\");\nTemplate[\"App_messenger\"] = new Template(\"Template.App_messenger\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    class: \"container\",\n    style: \"background-image:url('/images/tele.jpg')\"\n  }, \"\\n  \", HTML.STYLE(\"\\n  #grad1 {\\n    width: 180px;\\n    height: 180px;\\n    background-image:\\n    /* linear-gradient(to top, transparent, teal), */\\n    linear-gradient(to top, transparent, grey),\\n    linear-gradient(to right, #566573, #1B4F72,#85929E);\\n    /* linear-gradient(to right, green, aqua,#F8FFAE ); */\\n    background-size: 100% 100%, 2000% 100%;\\n    animation: move 2s infinite;\\n}\\n  @keyframes move {\\n     from {background-position: center center, left center;}\\n     to {background-position: center center, right center;}\\n}\\n  #search {\\n      position: relative;\\n      -ms-flex: 1 1 auto;\\n      flex: inherit;\\n      width: 12%;\\n      margin-bottom: 0;\\n      background-color:#EAEDED;\\n      border: 2px solid #dedede;\\n  #choice {\\n      position: relative;\\n      -ms-flex: 1 1 auto;\\n      flex: inherit;\\n      width: 12%;\\n      margin-bottom: 0;\\n      background-color:#EAEDED;\\n      border: 2px solid #dedede;\\n\\n}\\n  \"), \"\\n\\n  \", HTML.Raw('<button type=\"button\" id=\"logout\" class=\"logout btn btn-default btn-sm  float-right text-white\" style=\"background:grey\"><span class=\"glyphicon glyphicon-log-out\"></span> Log out</button>'), \"\\n  \", HTML.DIV({\n    class: \"form-group\",\n    style: \"background-image:url('/images/tele.jpg')\"\n  }, \"\\n    \", HTML.Raw('<span class=\"navbar-toggler-icon\"></span>'), \"\\n      \", HTML.DIV({\n    class: \"mess\",\n    id: \"sidenav\"\n  }, \"\\n        \", HTML.Raw('<div class=\"card-header\">\\n\\t\\t\\t\\t\\t\\t<div class=\"input-group\">\\n\\t\\t\\t\\t\\t\\t\\t<input type=\"text\" placeholder=\"Search...\" id=\"search\" class=\"form-control search\" style=\"background:grey text-white \">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"input-group-prepend\">\\n                <input class=\"submit text-white \" id=\"submit\" type=\"submit\" name=\"submit\" value=\"Search\" style=\"background:grey\">\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n          </div>'), \"\\n      \", HTML.SELECT({\n    multiple: \"\",\n    class: \"users bg-dark p-4s text-white navbar navbar-dark bg-dark float-left\",\n    size: \"20\",\n    id: \"users\"\n  }, \"\\n      \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getUsers\"));\n  }, function() {\n    return [ \"\\n        \", HTML.OPTION({\n      class: \"text-white\",\n      id: \"chat\",\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"_id\"));\n      },\n      style: \"background-color:#A9CCE3\"\n    }, \"Chat with \", Blaze.View(\"lookup:name\", function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    })), \"\\n      \" ];\n  }), \"\\n     \"), \"\\n     \", HTML.Raw('<!-- <input type=\"file\" accept=\"image/*;capture=camera\"> \\\\\\\\ Snapshot\\n     <input type=\"file\" accept=\"video/*;capture=camcorder\"> \\\\\\\\ Video\\n     <input type=\"file\" accept=\"audio/*;capture=microphone\"> \\\\\\\\ Audio -->'), \"\\n    \"), \"\\n  \"), \"\\n  \", HTML.DIV({\n    class: \"text text-r pt-3\",\n    style: \"background-image:url('/images/tele.jpg')\"\n  }, \"\\n    \", HTML.DIV({\n    class: \"row msg-wrap\",\n    style: \"height:443px; overflow:auto;\"\n  }, \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getMessages\"));\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      class: \"col-10 mb-3\"\n    }, \"\\n      \", Blaze.Let({\n      sender: function() {\n        return Spacebars.call(Spacebars.dataMustache(view.lookup(\"getUserById\"), view.lookup(\"sid\")));\n      },\n      receiver: function() {\n        return Spacebars.call(Spacebars.dataMustache(view.lookup(\"getUserById\"), view.lookup(\"rid\")));\n      }\n    }, function() {\n      return [ \"\\n      \", Blaze.View(\"lookup:viewMessage\", function() {\n        return Spacebars.mustache(view.lookup(\"viewMessage\"), Spacebars.dot(view.lookup(\"receiver\"), \"_id\"), view.lookup(\"_id\"), view.lookup(\"viewed\"));\n      }), \"\\n        \", HTML.DIV({\n        id: \"card\",\n        class: function() {\n          return [ \"card text-white purple-gradient color-block mx-auto z-depth-1 align-items-stretch \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"isMe\"), Spacebars.dot(view.lookup(\"sender\"), \"_id\"));\n          }, function() {\n            return \"float-right \";\n          }, function() {\n            return \"float-sm-left\";\n          }) ];\n        },\n        style: \"position:relative\",\n        value: \"\"\n      }, \"\\n          \", HTML.SPAN({\n        class: \"remove\",\n        style: \"position: absolute; right: 3px; top: 8px; color: red; line-height: 0; cursor:pointer\"\n      }, \"×\"), \"\\n          \", HTML.DIV({\n        class: \"card-body\",\n        id: \"grad1\"\n      }, \"\\n            \", HTML.SPAN({\n        class: \"time-left\"\n      }, Blaze.View(\"lookup:sender.name\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"sender\"), \"name\"));\n      })), \" to \", HTML.SPAN({\n        class: \"right\"\n      }, \" \", Blaze.View(\"lookup:receiver.name\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"receiver\"), \"name\"));\n      })), \" \", HTML.BR(), \"\\n            \", HTML.SPAN({\n        class: \"\"\n      }, \"\\n              \", HTML.SMALL(\"\\n              \", Blaze.View(\"lookup:parseDate\", function() {\n        return Spacebars.mustache(view.lookup(\"parseDate\"), view.lookup(\"created_at\"));\n      }), \"\\n              \"), \"\\n              \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"isFile\"), view.lookup(\"type\"));\n      }, function() {\n        return [ \"\\n                \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"isImage\"), view.lookup(\"message\"));\n        }, function() {\n          return [ \"\\n                  \", HTML.IMG({\n            src: function() {\n              return [ \"http://172.16.1.143:3333/?\", Spacebars.mustache(view.lookup(\"message\")) ];\n            },\n            alt: \"\",\n            style: \"width:100%\"\n          }), \"\\n                \" ];\n        }, function() {\n          return [ \"\\n                \", HTML.A({\n            href: function() {\n              return [ \"http://172.16.1.143:3333/?\", Spacebars.mustache(view.lookup(\"message\")) ];\n            },\n            download: function() {\n              return Spacebars.mustache(view.lookup(\"message\"));\n            }\n          }, \"Download file\"), \"\\n                \" ];\n        }), \"\\n              \" ];\n      }, function() {\n        return [ \"\\n              \", Blaze.Each(function() {\n          return Spacebars.dataMustache(view.lookup(\"getLines\"), view.lookup(\"message\"));\n        }, function() {\n          return [ \"\\n                \", HTML.BR(), \"\\n                \", Blaze.View(\"lookup:.\", function() {\n            return Spacebars.mustache(view.lookup(\".\"));\n          }), \"\\n              \" ];\n        }), \"\\n              \" ];\n      }), \"\\n            \"), \"\\n          \", HTML.DIV({\n        class: \"imageView\"\n      }, \"\\n          \"), \"\\n              \", HTML.BR(), \"\\n              \", HTML.SPAN({\n        class: \"update material-icons\",\n        style: \"position: absolute; left: 1px; top: 1px; cursor:pointer\"\n      }, \"📝\"), \"\\n          \"), \"\\n        \"), \"\\n      \" ];\n    }), \"\\n      \"), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \"), \"\\n  \", HTML.Raw(\"<!-- uload file -->\"), \"\\n  \", HTML.Raw('<div class=\"input-group\">\\n <div class=\"choice\" id=\"choice\">\\n   <input type=\"file\" id=\"upload\" class=\"upload choice-input\" name=\"file\">\\n   <label class=\"choice-label\" id=\"label\" for=\"upload\">Choose file</label>\\n </div>\\n</div>'), \"\\n  \", HTML.DIV({\n    class: \"form-group\"\n  }, \"\\n    \", HTML.TEXTAREA({\n    \"data-meteor-emoji\": \"true\",\n    class: \"text-white message form-control\",\n    id: \"message\",\n    width: \"15px;\",\n    height: \"15px;\",\n    rows: \"4\",\n    cols: \"20\",\n    style: \"background-image:url('/images/tele.jpg')\",\n    placeholder: \"Write a message...\"\n  }), \"\\n      \", HTML.Raw('<button type=\"button\" name=\"button\" id=\"send-message\" class=\"messenger btn btn-priamry text-white \" style=\"background:grey\">Send</button>'), \"\\n   \"), \"\\n\", HTML.Raw(\"<!-- emoji script -->\"), \"\\n\", HTML.SCRIPT(\"(() => {new MeteorEmoji()})() \")), HTML.Raw('\\n  <!-- sound for msg -->\\n  <audio id=\"audio\" preload=\"auto\" tabindex=\"0\" controls=\"controls\" type=\"audio/mpeg\" src=\"/bicycle_bell_07.mp3\" style=\"display:none\"></audio>\\n<div id=\"webcamcontrols\">\\n<button class=\"recordbutton\" id=\"recordbutton\" data-toggle=\"modal\" data-target=\"#myModal\">RECORD</button>\\n</div>\\n'), HTML.HEAD(\"\\n    \", HTML.Raw('<meta charset=\"utf-8\">'), \"\\n    \", HTML.TITLE(\"RecordRTC to Node.js\"), \"\\n    \", HTML.SCRIPT(\"\\n        if (location.href.indexOf('file:') == 0) {\\n            document.write('<h1 style=\\\"color:red;\\\">Please load this HTML file on HTTP or HTTPS.</h1>');\\n        }\\n    \"), \"\\n    \", HTML.Raw('<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">'), \"\\n    \", HTML.Raw('<link rel=\"author\" type=\"text/html\" href=\"https://plus.google.com/+MuazKhan\">'), \"\\n    \", HTML.Raw('<meta name=\"author\" content=\"Muaz Khan\">'), \"\\n\\n    \", HTML.STYLE(\"\\n        html { background-color: #f7f7f7; }\\n\\n        body {\\n            background-color: white;\\n            border: 1px solid rgb(15, 158, 238);\\n            margin: 1% 35%;\\n            text-align: center;\\n        }\\n\\n        hr {\\n            border: 0;\\n            border-top: 1px solid rgb(15, 158, 238);\\n        }\\n\\n        a {\\n            color: #2844FA;\\n            text-decoration: none;\\n        }\\n\\n        a:hover, a:focus { color: #1B29A4; }\\n\\n        a:active { color: #000; }\\n\\n        audio, video {\\n            border: 1px solid rgb(15, 158, 238); width: 94%;\\n        }\\n        button[enable], input[enable] { background: rgba(216, 205, 205, 0.2); border: 1px solid rgb(233, 224, 224);}\\n    \"), \"\\n\"), \"\\n\", HTML.BODY(\"\\n    \", HTML.Raw('<p>\\n      <video autoplay=\"\" playsinline=\"\" muted=\"false\" controls=\"\" volume=\"1\" height=\"400\" src=\"getUserMedia()\">               </video>\\n    </p>'), HTML.Raw(\"<hr>\"), \"\\n\\n    \", HTML.Raw('<div>\\n        <label id=\"percentage\">0%</label>\\n        <progress id=\"progress-bar\" value=\"0\"></progress><br>\\n    </div>'), \"\\n\\n    \", HTML.Raw(\"<hr>\"), \"\\n\\n    \", HTML.Raw('<div>\\n        <button id=\"btn-start-recording\" onclick=\"startRecording()\">Start Recording</button>\\n        <button id=\"btn-stop-recording\">Stop Recording</button>\\n    </div>'), \"\\n\\n    \", HTML.Raw('<!-- <script src=\"/node_modules/recordrtc/RecordRTC.js\"> </script> -->'), \"\\n\\n    \", HTML.SCRIPT(\"\\n        // fetching DOM references\\n        var btnStartRecording = document.querySelector('#btn-start-recording');\\n        var btnStopRecording  = document.querySelector('#btn-stop-recording');\\n\\n        var videoElement      = document.querySelector('video');\\n\\n        var progressBar = document.querySelector('#progress-bar');\\n        var percentage = document.querySelector('#percentage');\\n\\n        var recorder;\\n\\n        // reusable helpers\\n\\n        // this function submits recorded blob to nodejs server\\n        function postFiles() {\\n            var blob = recorder.getBlob();\\n\\n            // getting unique identifier for the file name\\n            var fileName = generateRandomString() + '.webm';\\n\\n            var file = new File([blob], fileName, {\\n                type: 'video/webm'\\n            });\\n\\n            videoElement.src = '';\\n            videoElement.poster = '/ajax-loader.gif';\\n\\n            xhr('/uploadFile', file, function(responseText) {\\n                var fileURL = JSON.parse(responseText).fileURL;\\n\\n                console.info('fileURL', fileURL);\\n                videoElement.src = fileURL;\\n                videoElement.play();\\n                videoElement.muted = false;\\n                videoElement.controls = true;\\n\\n                document.querySelector('#footer-h2').innerHTML = '<a href=\\\"' + videoElement.src + '\\\">' + videoElement.src + '</a>';\\n            });\\n\\n            if(mediaStream) mediaStream.stop();\\n        }\\n\\n        // XHR2/FormData\\n        function xhr(url, data, callback) {\\n            var request = new XMLHttpRequest();\\n            request.onreadystatechange = function() {\\n                if (request.readyState == 4 && request.status == 200) {\\n                    callback(request.responseText);\\n                }\\n            };\\n\\n            request.upload.onprogress = function(event) {\\n                progressBar.max = event.total;\\n                progressBar.value = event.loaded;\\n                progressBar.innerHTML = 'Upload Progress ' + Math.round(event.loaded / event.total * 100) + \\\"%\\\";\\n            };\\n\\n            request.upload.onload = function() {\\n                percentage.style.display = 'none';\\n                progressBar.style.display = 'none';\\n            };\\n            request.open('POST', url);\\n\\n            var formData = new FormData();\\n            formData.append('file', data);\\n            request.send(formData);\\n        }\\n\\n        // generating random string\\n        function generateRandomString() {\\n            if (window.crypto) {\\n                var a = window.crypto.getRandomValues(new Uint32Array(3)),\\n                    token = '';\\n                for (var i = 0, l = a.length; i < l; i++) token += a[i].toString(36);\\n                return token;\\n            } else {\\n                return (Math.random() * new Date().getTime()).toString(36).replace( /\\\\./g , '');\\n            }\\n        }\\n\\n        var mediaStream = null;\\n        // reusable getUserMedia\\n        function captureUserMedia(success_callback) {\\n            var session = {\\n                audio: true,\\n                video: true\\n            };\\n            navigator.getUserMedia(session, success_callback, function(error) {\\n                alert('Unable to capture your camera. Please check console logs.');\\n                console.error(error);\\n            });\\n        }\\n        console.log(getUserMedia);\\n\\n        // UI events handling\\n        btnStartRecording.onclick = function() {\\n            btnStartRecording.disabled = true;\\n\\n            captureUserMedia(function(stream) {\\n                mediaStream = stream;\\n                videoElement.src = window.URL.createObjectURL(stream);\\n                videoElement.play();\\n                videoElement.muted = true;\\n                videoElement.controls = false;\\n\\n                recorder = RecordRTC(stream, {\\n                    type: 'video'\\n                });\\n\\n                recorder.startRecording();\\n\\n                // enable stop-recording button\\n                btnStopRecording.disabled = true;\\n            });\\n        };\\n        btnStopRecording.onclick = function() {\\n            btnStartRecording.disabled = false;\\n            btnStopRecording.disabled = false;\\n\\n            recorder.stopRecording(postFiles);\\n        };\\n        window.onbeforeunload = function() {\\n            startRecording.disabled = false;\\n        };\\n    \"), \"\\n    \") ];\n}));\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"RecordRTC.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/messenger/RecordRTC.js                                                                            //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n'use strict'; // Last time updated: 2019-02-06 11:32:40 AM UTC\n// ________________\n// RecordRTC v5.5.4\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n// ____________\n// RecordRTC.js\n\n/**\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows.\n * @summary Record audio, video or screen inside the browser.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTC\n * @class\n * @example\n * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {\n *     type: 'video', // audio or video or gif or canvas\n *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc\n * });\n * recorder.startRecording();\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}\n */\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction RecordRTC(mediaStream, config) {\n  if (!mediaStream) {\n    throw 'First parameter is required.';\n  }\n\n  config = config || {\n    type: 'video'\n  };\n  config = new RecordRTCConfiguration(mediaStream, config); // a reference to user's recordRTC object\n\n  var self = this;\n\n  function startRecording(config2) {\n    if (!!config2) {\n      // allow users to set options using startRecording method\n      // config2 is similar to main \"config\" object (second parameter over RecordRTC constructor)\n      config = new RecordRTCConfiguration(mediaStream, config2);\n    }\n\n    if (!config.disableLogs) {\n      console.log('started recording ' + config.type + ' stream.');\n    }\n\n    if (mediaRecorder) {\n      mediaRecorder.clearRecordedData();\n      mediaRecorder.record();\n      setState('recording');\n\n      if (self.recordingDuration) {\n        handleRecordingDuration();\n      }\n\n      return self;\n    }\n\n    initRecorder(function () {\n      if (self.recordingDuration) {\n        handleRecordingDuration();\n      }\n    });\n    return self;\n  }\n\n  function initRecorder(initCallback) {\n    if (initCallback) {\n      config.initCallback = function () {\n        initCallback();\n        initCallback = config.initCallback = null; // recorder.initRecorder should be call-backed once.\n      };\n    }\n\n    var Recorder = new GetRecorderType(mediaStream, config);\n    mediaRecorder = new Recorder(mediaStream, config);\n    mediaRecorder.record();\n    setState('recording');\n\n    if (!config.disableLogs) {\n      console.log('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\n    }\n  }\n\n  function stopRecording(callback) {\n    callback = callback || function () {};\n\n    if (!mediaRecorder) {\n      warningLog();\n      return;\n    }\n\n    if (self.state === 'paused') {\n      self.resumeRecording();\n      setTimeout(function () {\n        stopRecording(callback);\n      }, 1);\n      return;\n    }\n\n    if (self.state !== 'recording' && !config.disableLogs) {\n      console.warn('Recording state should be: \"recording\", however current state is: ', self.state);\n    }\n\n    if (!config.disableLogs) {\n      console.log('Stopped recording ' + config.type + ' stream.');\n    }\n\n    if (config.type !== 'gif') {\n      mediaRecorder.stop(_callback);\n    } else {\n      mediaRecorder.stop();\n\n      _callback();\n    }\n\n    setState('stopped');\n\n    function _callback(__blob) {\n      if (!mediaRecorder) {\n        if (typeof callback.call === 'function') {\n          callback.call(self, '');\n        } else {\n          callback('');\n        }\n\n        return;\n      }\n\n      Object.keys(mediaRecorder).forEach(function (key) {\n        if (typeof mediaRecorder[key] === 'function') {\n          return;\n        }\n\n        self[key] = mediaRecorder[key];\n      });\n      var blob = mediaRecorder.blob;\n\n      if (!blob) {\n        if (__blob) {\n          mediaRecorder.blob = blob = __blob;\n        } else {\n          throw 'Recording failed.';\n        }\n      }\n\n      if (blob && !config.disableLogs) {\n        console.log(blob.type, '->', bytesToSize(blob.size));\n      }\n\n      if (callback) {\n        var url;\n\n        try {\n          url = URL.createObjectURL(blob);\n        } catch (e) {}\n\n        if (typeof callback.call === 'function') {\n          callback.call(self, url);\n        } else {\n          callback(url);\n        }\n      }\n\n      if (!config.autoWriteToDisk) {\n        return;\n      }\n\n      getDataURL(function (dataURL) {\n        var parameter = {};\n        parameter[config.type + 'Blob'] = dataURL;\n        DiskStorage.Store(parameter);\n      });\n    }\n  }\n\n  function pauseRecording() {\n    if (!mediaRecorder) {\n      warningLog();\n      return;\n    }\n\n    if (self.state !== 'recording') {\n      if (!config.disableLogs) {\n        console.warn('Unable to pause the recording. Recording state: ', self.state);\n      }\n\n      return;\n    }\n\n    setState('paused');\n    mediaRecorder.pause();\n\n    if (!config.disableLogs) {\n      console.log('Paused recording.');\n    }\n  }\n\n  function resumeRecording() {\n    if (!mediaRecorder) {\n      warningLog();\n      return;\n    }\n\n    if (self.state !== 'paused') {\n      if (!config.disableLogs) {\n        console.warn('Unable to resume the recording. Recording state: ', self.state);\n      }\n\n      return;\n    }\n\n    setState('recording'); // not all libs have this method yet\n\n    mediaRecorder.resume();\n\n    if (!config.disableLogs) {\n      console.log('Resumed recording.');\n    }\n  }\n\n  function readFile(_blob) {\n    postMessage(new FileReaderSync().readAsDataURL(_blob));\n  }\n\n  function getDataURL(callback, _mediaRecorder) {\n    if (!callback) {\n      throw 'Pass a callback function over getDataURL.';\n    }\n\n    var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\n\n    if (!blob) {\n      if (!config.disableLogs) {\n        console.warn('Blob encoder did not finish its job yet.');\n      }\n\n      setTimeout(function () {\n        getDataURL(callback, _mediaRecorder);\n      }, 1000);\n      return;\n    }\n\n    if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\n      var webWorker = processInWebWorker(readFile);\n\n      webWorker.onmessage = function (event) {\n        callback(event.data);\n      };\n\n      webWorker.postMessage(blob);\n    } else {\n      var reader = new FileReader();\n      reader.readAsDataURL(blob);\n\n      reader.onload = function (event) {\n        callback(event.target.result);\n      };\n    }\n\n    function processInWebWorker(_function) {\n      try {\n        var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n          type: 'application/javascript'\n        }));\n        var worker = new Worker(blob);\n        URL.revokeObjectURL(blob);\n        return worker;\n      } catch (e) {}\n    }\n  }\n\n  function handleRecordingDuration(counter) {\n    counter = counter || 0;\n\n    if (self.state === 'paused') {\n      setTimeout(function () {\n        handleRecordingDuration(counter);\n      }, 1000);\n      return;\n    }\n\n    if (self.state === 'stopped') {\n      return;\n    }\n\n    if (counter >= self.recordingDuration) {\n      stopRecording(self.onRecordingStopped);\n      return;\n    }\n\n    counter += 1000; // 1-second\n\n    setTimeout(function () {\n      handleRecordingDuration(counter);\n    }, 1000);\n  }\n\n  function setState(state) {\n    if (!self) {\n      return;\n    }\n\n    self.state = state;\n\n    if (typeof self.onStateChanged.call === 'function') {\n      self.onStateChanged.call(self, state);\n    } else {\n      self.onStateChanged(state);\n    }\n  }\n\n  var WARNING = 'It seems that recorder is destroyed or \"startRecording\" is not invoked for ' + config.type + ' recorder.';\n\n  function warningLog() {\n    if (config.disableLogs === true) {\n      return;\n    }\n\n    console.warn(WARNING);\n  }\n\n  var mediaRecorder;\n  var returnObject = {\n    /**\n     * This method starts the recording.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * var recorder = RecordRTC(mediaStream, {\n     *     type: 'video'\n     * });\n     * recorder.startRecording();\n     */\n    startRecording: startRecording,\n\n    /**\n     * This method stops the recording. It is strongly recommended to get \"blob\" or \"URI\" inside the callback to make sure all recorders finished their job.\n     * @param {function} callback - Callback to get the recorded blob.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.stopRecording(function() {\n     *     // use either \"this\" or \"recorder\" object; both are identical\n     *     video.src = this.toURL();\n     *     var blob = this.getBlob();\n     * });\n     */\n    stopRecording: stopRecording,\n\n    /**\n     * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @todo Firefox is unable to pause the recording. Fix it.\n     * @example\n     * recorder.pauseRecording();  // pause the recording\n     * recorder.resumeRecording(); // resume again\n     */\n    pauseRecording: pauseRecording,\n\n    /**\n     * This method resumes the recording.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.pauseRecording();  // first of all, pause the recording\n     * recorder.resumeRecording(); // now resume it\n     */\n    resumeRecording: resumeRecording,\n\n    /**\n     * This method initializes the recording.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @todo This method should be deprecated.\n     * @example\n     * recorder.initRecorder();\n     */\n    initRecorder: initRecorder,\n\n    /**\n     * Ask RecordRTC to auto-stop the recording after 5 minutes.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * var fiveMinutes = 5 * 1000 * 60;\n     * recorder.setRecordingDuration(fiveMinutes, function() {\n     *    var blob = this.getBlob();\n     *    video.src = this.toURL();\n     * });\n     *\n     * // or otherwise\n     * recorder.setRecordingDuration(fiveMinutes).onRecordingStopped(function() {\n     *    var blob = this.getBlob();\n     *    video.src = this.toURL();\n     * });\n     */\n    setRecordingDuration: function (recordingDuration, callback) {\n      if (typeof recordingDuration === 'undefined') {\n        throw 'recordingDuration is required.';\n      }\n\n      if (typeof recordingDuration !== 'number') {\n        throw 'recordingDuration must be a number.';\n      }\n\n      self.recordingDuration = recordingDuration;\n\n      self.onRecordingStopped = callback || function () {};\n\n      return {\n        onRecordingStopped: function (callback) {\n          self.onRecordingStopped = callback;\n        }\n      };\n    },\n\n    /**\n     * This method can be used to clear/reset all the recorded data.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @todo Figure out the difference between \"reset\" and \"clearRecordedData\" methods.\n     * @example\n     * recorder.clearRecordedData();\n     */\n    clearRecordedData: function () {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      mediaRecorder.clearRecordedData();\n\n      if (!config.disableLogs) {\n        console.log('Cleared old recorded data.');\n      }\n    },\n\n    /**\n     * Get the recorded blob. Use this method inside the \"stopRecording\" callback.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.stopRecording(function() {\n     *     var blob = this.getBlob();\n     *\n     *     var file = new File([blob], 'filename.webm', {\n     *         type: 'video/webm'\n     *     });\n     *\n     *     var formData = new FormData();\n     *     formData.append('file', file); // upload \"File\" object rather than a \"Blob\"\n     *     uploadToServer(formData);\n     * });\n     * @returns {Blob} Returns recorded data as \"Blob\" object.\n     */\n    getBlob: function () {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      return mediaRecorder.blob;\n    },\n\n    /**\n     * Get data-URI instead of Blob.\n     * @param {function} callback - Callback to get the Data-URI.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.stopRecording(function() {\n     *     recorder.getDataURL(function(dataURI) {\n     *         video.src = dataURI;\n     *     });\n     * });\n     */\n    getDataURL: getDataURL,\n\n    /**\n     * Get virtual/temporary URL. Usage of this URL is limited to current tab.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.stopRecording(function() {\n     *     video.src = this.toURL();\n     * });\n     * @returns {String} Returns a virtual/temporary URL for the recorded \"Blob\".\n     */\n    toURL: function () {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      return URL.createObjectURL(mediaRecorder.blob);\n    },\n\n    /**\n     * Get internal recording object (i.e. internal module) e.g. MutliStreamRecorder, MediaStreamRecorder, StereoAudioRecorder or WhammyRecorder etc.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * var internal = recorder.getInternalRecorder();\n     * if(internal instanceof MultiStreamRecorder) {\n     *     internal.addStreams([newAudioStream]);\n     *     internal.resetVideoStreams([screenStream]);\n     * }\n     * @returns {Object} Returns internal recording object.\n     */\n    getInternalRecorder: function () {\n      return mediaRecorder;\n    },\n\n    /**\n     * Invoke save-as dialog to save the recorded blob into your disk.\n     * @param {string} fileName - Set your own file name.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.stopRecording(function() {\n     *     this.save('file-name');\n     *\n     *     // or manually:\n     *     invokeSaveAsDialog(this.getBlob(), 'filename.webm');\n     * });\n     */\n    save: function (fileName) {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      invokeSaveAsDialog(mediaRecorder.blob, fileName);\n    },\n\n    /**\n     * This method gets a blob from indexed-DB storage.\n     * @param {function} callback - Callback to get the recorded blob.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.getFromDisk(function(dataURL) {\n     *     video.src = dataURL;\n     * });\n     */\n    getFromDisk: function (callback) {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      RecordRTC.getFromDisk(config.type, callback);\n    },\n\n    /**\n     * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\n     * @type {Array.<Array>}\n     * @param {Array} arrayOfWebPImages - Array of webp images.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @todo This method should be deprecated.\n     * @example\n     * var arrayOfWebPImages = [];\n     * arrayOfWebPImages.push({\n     *     duration: index,\n     *     image: 'data:image/webp;base64,...'\n     * });\n     * recorder.setAdvertisementArray(arrayOfWebPImages);\n     */\n    setAdvertisementArray: function (arrayOfWebPImages) {\n      config.advertisement = [];\n      var length = arrayOfWebPImages.length;\n\n      for (var i = 0; i < length; i++) {\n        config.advertisement.push({\n          duration: i,\n          image: arrayOfWebPImages[i]\n        });\n      }\n    },\n\n    /**\n     * It is equivalent to <code class=\"str\">\"recorder.getBlob()\"</code> method. Usage of \"getBlob\" is recommended, though.\n     * @property {Blob} blob - Recorded Blob can be accessed using this property.\n     * @memberof RecordRTC\n     * @instance\n     * @readonly\n     * @example\n     * recorder.stopRecording(function() {\n     *     var blob = this.blob;\n     *\n     *     // below one is recommended\n     *     var blob = this.getBlob();\n     * });\n     */\n    blob: null,\n\n    /**\n     * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\n     * @property {number} bufferSize - Buffer-size used to encode the WAV container\n     * @memberof RecordRTC\n     * @instance\n     * @readonly\n     * @example\n     * recorder.stopRecording(function() {\n     *     alert('Recorder used this buffer-size: ' + this.bufferSize);\n     * });\n     */\n    bufferSize: 0,\n\n    /**\n     * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\n     * @property {number} sampleRate - Sample-rates used to encode the WAV container\n     * @memberof RecordRTC\n     * @instance\n     * @readonly\n     * @example\n     * recorder.stopRecording(function() {\n     *     alert('Recorder used these sample-rates: ' + this.sampleRate);\n     * });\n     */\n    sampleRate: 0,\n\n    /**\n     * {recorderType:StereoAudioRecorder} returns ArrayBuffer object.\n     * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\n     * @memberof RecordRTC\n     * @instance\n     * @readonly\n     * @example\n     * recorder.stopRecording(function() {\n     *     var arrayBuffer = this.buffer;\n     *     alert(arrayBuffer.byteLength);\n     * });\n     */\n    buffer: null,\n\n    /**\n     * This method resets the recorder. So that you can reuse single recorder instance many times.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.reset();\n     * recorder.startRecording();\n     */\n    reset: function () {\n      if (mediaRecorder && typeof mediaRecorder.clearRecordedData === 'function') {\n        mediaRecorder.clearRecordedData();\n      }\n\n      mediaRecorder = null;\n      setState('inactive');\n      self.blob = null;\n    },\n\n    /**\n     * This method is called whenever recorder's state changes. Use this as an \"event\".\n     * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\n     * @method\n     * @memberof RecordRTC\n     * @instance\n     * @example\n     * recorder.onStateChanged = function(state) {\n     *     console.log('Recorder state: ', state);\n     * };\n     */\n    onStateChanged: function (state) {\n      if (!config.disableLogs) {\n        console.log('Recorder state changed:', state);\n      }\n    },\n\n    /**\n     * A recorder can have inactive, recording, paused or stopped states.\n     * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\n     * @memberof RecordRTC\n     * @static\n     * @readonly\n     * @example\n     * // this looper function will keep you updated about the recorder's states.\n     * (function looper() {\n     *     document.querySelector('h1').innerHTML = 'Recorder\\'s state is: ' + recorder.state;\n     *     if(recorder.state === 'stopped') return; // ignore+stop\n     *     setTimeout(looper, 1000); // update after every 3-seconds\n     * })();\n     * recorder.startRecording();\n     */\n    state: 'inactive',\n\n    /**\n     * Get recorder's readonly state.\n     * @method\n     * @memberof RecordRTC\n     * @example\n     * var state = recorder.getState();\n     * @returns {String} Returns recording state.\n     */\n    getState: function () {\n      return self.state;\n    },\n\n    /**\n     * Destroy RecordRTC instance. Clear all recorders and objects.\n     * @method\n     * @memberof RecordRTC\n     * @example\n     * recorder.destroy();\n     */\n    destroy: function () {\n      var disableLogsCache = config.disableLogs;\n      config = {\n        disableLogs: true\n      };\n      self.reset();\n      setState('destroyed');\n      returnObject = self = null;\n\n      if (Storage.AudioContextConstructor) {\n        Storage.AudioContextConstructor.close();\n        Storage.AudioContextConstructor = null;\n      }\n\n      config.disableLogs = disableLogsCache;\n\n      if (!config.disableLogs) {\n        console.warn('RecordRTC is destroyed.');\n      }\n    },\n\n    /**\n     * RecordRTC version number\n     * @property {String} version - Release version number.\n     * @memberof RecordRTC\n     * @static\n     * @readonly\n     * @example\n     * alert(recorder.version);\n     */\n    version: '5.5.4'\n  };\n\n  if (!this) {\n    self = returnObject;\n    return returnObject;\n  } // if someone wants to use RecordRTC with the \"new\" keyword.\n\n\n  for (var prop in meteorBabelHelpers.sanitizeForInObject(returnObject)) {\n    this[prop] = returnObject[prop];\n  }\n\n  self = this;\n  return returnObject;\n}\n\nRecordRTC.version = '5.5.4';\n\nif (typeof module !== 'undefined'\n/* && !!module.exports*/\n) {\n    module.exports = RecordRTC;\n  }\n\nif (typeof define === 'function' && define.amd) {\n  define('RecordRTC', [], function () {\n    return RecordRTC;\n  });\n}\n\nRecordRTC.getFromDisk = function (type, callback) {\n  if (!callback) {\n    throw 'callback is mandatory.';\n  }\n\n  console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\n  DiskStorage.Fetch(function (dataURL, _type) {\n    if (type !== 'all' && _type === type + 'Blob' && callback) {\n      callback(dataURL);\n    }\n\n    if (type === 'all' && callback) {\n      callback(dataURL, _type.replace('Blob', ''));\n    }\n  });\n};\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof RecordRTC\n * @example\n * RecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\n\n\nRecordRTC.writeToDisk = function (options) {\n  console.log('Writing recorded blob(s) to disk!');\n  options = options || {};\n\n  if (options.audio && options.video && options.gif) {\n    options.audio.getDataURL(function (audioDataURL) {\n      options.video.getDataURL(function (videoDataURL) {\n        options.gif.getDataURL(function (gifDataURL) {\n          DiskStorage.Store({\n            audioBlob: audioDataURL,\n            videoBlob: videoDataURL,\n            gifBlob: gifDataURL\n          });\n        });\n      });\n    });\n  } else if (options.audio && options.video) {\n    options.audio.getDataURL(function (audioDataURL) {\n      options.video.getDataURL(function (videoDataURL) {\n        DiskStorage.Store({\n          audioBlob: audioDataURL,\n          videoBlob: videoDataURL\n        });\n      });\n    });\n  } else if (options.audio && options.gif) {\n    options.audio.getDataURL(function (audioDataURL) {\n      options.gif.getDataURL(function (gifDataURL) {\n        DiskStorage.Store({\n          audioBlob: audioDataURL,\n          gifBlob: gifDataURL\n        });\n      });\n    });\n  } else if (options.video && options.gif) {\n    options.video.getDataURL(function (videoDataURL) {\n      options.gif.getDataURL(function (gifDataURL) {\n        DiskStorage.Store({\n          videoBlob: videoDataURL,\n          gifBlob: gifDataURL\n        });\n      });\n    });\n  } else if (options.audio) {\n    options.audio.getDataURL(function (audioDataURL) {\n      DiskStorage.Store({\n        audioBlob: audioDataURL\n      });\n    });\n  } else if (options.video) {\n    options.video.getDataURL(function (videoDataURL) {\n      DiskStorage.Store({\n        videoBlob: videoDataURL\n      });\n    });\n  } else if (options.gif) {\n    options.gif.getDataURL(function (gifDataURL) {\n      DiskStorage.Store({\n        gifBlob: gifDataURL\n      });\n    });\n  }\n}; // __________________________\n// RecordRTC-Configuration.js\n\n/**\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTCConfiguration\n * @class\n * @example\n * var options = RecordRTCConfiguration(mediaStream, options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\n */\n\n\nfunction RecordRTCConfiguration(mediaStream, config) {\n  if (!config.recorderType && !config.type) {\n    if (!!config.audio && !!config.video) {\n      config.type = 'video';\n    } else if (!!config.audio && !config.video) {\n      config.type = 'audio';\n    }\n  }\n\n  if (config.recorderType && !config.type) {\n    if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder || typeof WebAssemblyRecorder !== 'undefined' && config.recorderType === WebAssemblyRecorder) {\n      config.type = 'video';\n    } else if (config.recorderType === GifRecorder) {\n      config.type = 'gif';\n    } else if (config.recorderType === StereoAudioRecorder) {\n      config.type = 'audio';\n    } else if (config.recorderType === MediaStreamRecorder) {\n      if (getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\n        config.type = 'video';\n      } else if (!getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\n        config.type = 'video';\n      } else if (getTracks(mediaStream, 'audio').length && !getTracks(mediaStream, 'video').length) {\n        config.type = 'audio';\n      } else {// config.type = 'UnKnown';\n      }\n    }\n  }\n\n  if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n    if (!config.mimeType) {\n      config.mimeType = 'video/webm';\n    }\n\n    if (!config.type) {\n      config.type = config.mimeType.split('/')[0];\n    }\n\n    if (!config.bitsPerSecond) {// config.bitsPerSecond = 128000;\n    }\n  } // consider default type=audio\n\n\n  if (!config.type) {\n    if (config.mimeType) {\n      config.type = config.mimeType.split('/')[0];\n    }\n\n    if (!config.type) {\n      config.type = 'audio';\n    }\n  }\n\n  return config;\n} // __________________\n// GetRecorderType.js\n\n/**\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\n * @summary It returns best recorder-type available for your browser.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GetRecorderType\n * @class\n * @example\n * var RecorderType = GetRecorderType(options);\n * var recorder = new RecorderType(options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n */\n\n\nfunction GetRecorderType(mediaStream, config) {\n  var recorder; // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\n  // todo: detect if it is Edge, then auto use: StereoAudioRecorder\n\n  if (isChrome || isEdge || isOpera) {\n    // Media Stream Recording API has not been implemented in chrome yet;\n    // That's why using WebAudio API to record stereo audio in WAV format\n    recorder = StereoAudioRecorder;\n  }\n\n  if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\n    recorder = MediaStreamRecorder;\n  } // video recorder (in WebM format)\n\n\n  if (config.type === 'video' && (isChrome || isOpera)) {\n    recorder = WhammyRecorder;\n\n    if (typeof WebAssemblyRecorder !== 'undefined' && typeof ReadableStream !== 'undefined') {\n      recorder = WebAssemblyRecorder;\n    }\n  } // video recorder (in Gif format)\n\n\n  if (config.type === 'gif') {\n    recorder = GifRecorder;\n  } // html2canvas recording!\n\n\n  if (config.type === 'canvas') {\n    recorder = CanvasRecorder;\n  }\n\n  if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n    if (getTracks(mediaStream, 'video').length || getTracks(mediaStream, 'audio').length) {\n      // audio-only recording\n      if (config.type === 'audio') {\n        if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\n          recorder = MediaStreamRecorder;\n        } // else recorder = StereoAudioRecorder;\n\n      } else {\n        // video or screen tracks\n        if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\n          recorder = MediaStreamRecorder;\n        }\n      }\n    }\n  }\n\n  if (mediaStream instanceof Array && mediaStream.length) {\n    recorder = MultiStreamRecorder;\n  }\n\n  if (config.recorderType) {\n    recorder = config.recorderType;\n  }\n\n  if (!config.disableLogs && !!recorder && !!recorder.name) {\n    console.log('Using recorderType:', recorder.name || recorder.constructor.name);\n  }\n\n  if (!recorder && isSafari) {\n    recorder = MediaStreamRecorder;\n  }\n\n  return recorder;\n} // _____________\n// MRecordRTC.js\n\n/**\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MRecordRTC\n * @class\n * @example\n * var recorder = new MRecordRTC();\n * recorder.addStream(MediaStream);\n * recorder.mediaType = {\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\n *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\n *     gif: true    // or GifRecorder\n * };\n * // mimeType is optional and should be set only in advance cases.\n * recorder.mimeType = {\n *     audio: 'audio/wav',\n *     video: 'video/webm',\n *     gif:   'image/gif'\n * };\n * recorder.startRecording();\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @requires {@link RecordRTC}\n */\n\n\nfunction MRecordRTC(mediaStream) {\n  /**\n   * This method attaches MediaStream object to {@link MRecordRTC}.\n   * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.addStream(MediaStream);\n   */\n  this.addStream = function (_mediaStream) {\n    if (_mediaStream) {\n      mediaStream = _mediaStream;\n    }\n  };\n  /**\n   * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\n   * @property {object} mediaType - {audio: true, video: true, gif: true}\n   * @memberof MRecordRTC\n   * @example\n   * var recorder = new MRecordRTC();\n   * recorder.mediaType = {\n   *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\n   *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\n   *     gif  : true  // TRUE or GifRecorder\n   * };\n   */\n\n\n  this.mediaType = {\n    audio: true,\n    video: true\n  };\n  /**\n   * This method starts recording.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.startRecording();\n   */\n\n  this.startRecording = function () {\n    var mediaType = this.mediaType;\n    var recorderType;\n    var mimeType = this.mimeType || {\n      audio: null,\n      video: null,\n      gif: null\n    };\n\n    if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'audio').length) {\n      mediaType.audio = false;\n    }\n\n    if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\n      mediaType.video = false;\n    }\n\n    if (typeof mediaType.gif !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\n      mediaType.gif = false;\n    }\n\n    if (!mediaType.audio && !mediaType.video && !mediaType.gif) {\n      throw 'MediaStream must have either audio or video tracks.';\n    }\n\n    if (!!mediaType.audio) {\n      recorderType = null;\n\n      if (typeof mediaType.audio === 'function') {\n        recorderType = mediaType.audio;\n      }\n\n      this.audioRecorder = new RecordRTC(mediaStream, {\n        type: 'audio',\n        bufferSize: this.bufferSize,\n        sampleRate: this.sampleRate,\n        numberOfAudioChannels: this.numberOfAudioChannels || 2,\n        disableLogs: this.disableLogs,\n        recorderType: recorderType,\n        mimeType: mimeType.audio,\n        timeSlice: this.timeSlice,\n        onTimeStamp: this.onTimeStamp\n      });\n\n      if (!mediaType.video) {\n        this.audioRecorder.startRecording();\n      }\n    }\n\n    if (!!mediaType.video) {\n      recorderType = null;\n\n      if (typeof mediaType.video === 'function') {\n        recorderType = mediaType.video;\n      }\n\n      var newStream = mediaStream;\n\n      if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\n        var videoTrack = getTracks(mediaStream, 'video')[0];\n\n        if (isFirefox) {\n          newStream = new MediaStream();\n          newStream.addTrack(videoTrack);\n\n          if (recorderType && recorderType === WhammyRecorder) {\n            // Firefox does NOT supports webp-encoding yet\n            // But Firefox do supports WebAssemblyRecorder\n            recorderType = MediaStreamRecorder;\n          }\n        } else {\n          newStream = new MediaStream();\n          newStream.addTrack(videoTrack);\n        }\n      }\n\n      this.videoRecorder = new RecordRTC(newStream, {\n        type: 'video',\n        video: this.video,\n        canvas: this.canvas,\n        frameInterval: this.frameInterval || 10,\n        disableLogs: this.disableLogs,\n        recorderType: recorderType,\n        mimeType: mimeType.video,\n        timeSlice: this.timeSlice,\n        onTimeStamp: this.onTimeStamp,\n        workerPath: this.workerPath,\n        webAssemblyPath: this.webAssemblyPath,\n        frameRate: this.frameRate,\n        // used by WebAssemblyRecorder; values: usually 30; accepts any.\n        bitrate: this.bitrate // used by WebAssemblyRecorder; values: 0 to 1000+\n\n      });\n\n      if (!mediaType.audio) {\n        this.videoRecorder.startRecording();\n      }\n    }\n\n    if (!!mediaType.audio && !!mediaType.video) {\n      var self = this;\n      var isSingleRecorder = isMediaRecorderCompatible() === true;\n\n      if (mediaType.audio instanceof StereoAudioRecorder && !!mediaType.video) {\n        isSingleRecorder = false;\n      } else if (mediaType.audio !== true && mediaType.video !== true && mediaType.audio !== mediaType.video) {\n        isSingleRecorder = false;\n      }\n\n      if (isSingleRecorder === true) {\n        self.audioRecorder = null;\n        self.videoRecorder.startRecording();\n      } else {\n        self.videoRecorder.initRecorder(function () {\n          self.audioRecorder.initRecorder(function () {\n            // Both recorders are ready to record things accurately\n            self.videoRecorder.startRecording();\n            self.audioRecorder.startRecording();\n          });\n        });\n      }\n    }\n\n    if (!!mediaType.gif) {\n      recorderType = null;\n\n      if (typeof mediaType.gif === 'function') {\n        recorderType = mediaType.gif;\n      }\n\n      this.gifRecorder = new RecordRTC(mediaStream, {\n        type: 'gif',\n        frameRate: this.frameRate || 200,\n        quality: this.quality || 10,\n        disableLogs: this.disableLogs,\n        recorderType: recorderType,\n        mimeType: mimeType.gif\n      });\n      this.gifRecorder.startRecording();\n    }\n  };\n  /**\n   * This method stops recording.\n   * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.stopRecording(function(recording){\n   *     var audioBlob = recording.audio;\n   *     var videoBlob = recording.video;\n   *     var gifBlob   = recording.gif;\n   * });\n   */\n\n\n  this.stopRecording = function (callback) {\n    callback = callback || function () {};\n\n    if (this.audioRecorder) {\n      this.audioRecorder.stopRecording(function (blobURL) {\n        callback(blobURL, 'audio');\n      });\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.stopRecording(function (blobURL) {\n        callback(blobURL, 'video');\n      });\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.stopRecording(function (blobURL) {\n        callback(blobURL, 'gif');\n      });\n    }\n  };\n  /**\n   * This method pauses recording.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.pauseRecording();\n   */\n\n\n  this.pauseRecording = function () {\n    if (this.audioRecorder) {\n      this.audioRecorder.pauseRecording();\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.pauseRecording();\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.pauseRecording();\n    }\n  };\n  /**\n   * This method resumes recording.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.resumeRecording();\n   */\n\n\n  this.resumeRecording = function () {\n    if (this.audioRecorder) {\n      this.audioRecorder.resumeRecording();\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.resumeRecording();\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.resumeRecording();\n    }\n  };\n  /**\n   * This method can be used to manually get all recorded blobs.\n   * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.getBlob(function(recording){\n   *     var audioBlob = recording.audio;\n   *     var videoBlob = recording.video;\n   *     var gifBlob   = recording.gif;\n   * });\n   * // or\n   * var audioBlob = recorder.getBlob().audio;\n   * var videoBlob = recorder.getBlob().video;\n   */\n\n\n  this.getBlob = function (callback) {\n    var output = {};\n\n    if (this.audioRecorder) {\n      output.audio = this.audioRecorder.getBlob();\n    }\n\n    if (this.videoRecorder) {\n      output.video = this.videoRecorder.getBlob();\n    }\n\n    if (this.gifRecorder) {\n      output.gif = this.gifRecorder.getBlob();\n    }\n\n    if (callback) {\n      callback(output);\n    }\n\n    return output;\n  };\n  /**\n   * Destroy all recorder instances.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.destroy();\n   */\n\n\n  this.destroy = function () {\n    if (this.audioRecorder) {\n      this.audioRecorder.destroy();\n      this.audioRecorder = null;\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.destroy();\n      this.videoRecorder = null;\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.destroy();\n      this.gifRecorder = null;\n    }\n  };\n  /**\n   * This method can be used to manually get all recorded blobs' DataURLs.\n   * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.getDataURL(function(recording){\n   *     var audioDataURL = recording.audio;\n   *     var videoDataURL = recording.video;\n   *     var gifDataURL   = recording.gif;\n   * });\n   */\n\n\n  this.getDataURL = function (callback) {\n    this.getBlob(function (blob) {\n      if (blob.audio && blob.video) {\n        getDataURL(blob.audio, function (_audioDataURL) {\n          getDataURL(blob.video, function (_videoDataURL) {\n            callback({\n              audio: _audioDataURL,\n              video: _videoDataURL\n            });\n          });\n        });\n      } else if (blob.audio) {\n        getDataURL(blob.audio, function (_audioDataURL) {\n          callback({\n            audio: _audioDataURL\n          });\n        });\n      } else if (blob.video) {\n        getDataURL(blob.video, function (_videoDataURL) {\n          callback({\n            video: _videoDataURL\n          });\n        });\n      }\n    });\n\n    function getDataURL(blob, callback00) {\n      if (typeof Worker !== 'undefined') {\n        var webWorker = processInWebWorker(function () {\n          function readFile(_blob) {\n            postMessage(new FileReaderSync().readAsDataURL(_blob));\n          }\n\n          return readFile;\n        }());\n\n        webWorker.onmessage = function (event) {\n          callback00(event.data);\n        };\n\n        webWorker.postMessage(blob);\n      } else {\n        var reader = new FileReader();\n        reader.readAsDataURL(blob);\n\n        reader.onload = function (event) {\n          callback00(event.target.result);\n        };\n      }\n    }\n\n    function processInWebWorker(_function) {\n      var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n        type: 'application/javascript'\n      }));\n      var worker = new Worker(blob);\n      var url;\n\n      if (typeof URL !== 'undefined') {\n        url = URL;\n      } else if (typeof webkitURL !== 'undefined') {\n        url = webkitURL;\n      } else {\n        throw 'Neither URL nor webkitURL detected.';\n      }\n\n      url.revokeObjectURL(blob);\n      return worker;\n    }\n  };\n  /**\n   * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.writeToDisk();\n   */\n\n\n  this.writeToDisk = function () {\n    RecordRTC.writeToDisk({\n      audio: this.audioRecorder,\n      video: this.videoRecorder,\n      gif: this.gifRecorder\n    });\n  };\n  /**\n   * This method can be used to invoke a save-as dialog for all recorded blobs.\n   * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\n   * @method\n   * @memberof MRecordRTC\n   * @example\n   * recorder.save({\n   *     audio: 'audio-file-name',\n   *     video: 'video-file-name',\n   *     gif  : 'gif-file-name'\n   * });\n   */\n\n\n  this.save = function (args) {\n    args = args || {\n      audio: true,\n      video: true,\n      gif: true\n    };\n\n    if (!!args.audio && this.audioRecorder) {\n      this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\n    }\n\n    if (!!args.video && this.videoRecorder) {\n      this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\n    }\n\n    if (!!args.gif && this.gifRecorder) {\n      this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\n    }\n  };\n}\n/**\n * This method can be used to get all recorded blobs from IndexedDB storage.\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\n * @param {function} callback - Callback function to get all stored blobs.\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\n *     if(type === 'audio') { }\n *     if(type === 'video') { }\n *     if(type === 'gif')   { }\n * });\n */\n\n\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\n\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.MRecordRTC = MRecordRTC;\n}\n\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n(function (that) {\n  if (!that) {\n    return;\n  }\n\n  if (typeof window !== 'undefined') {\n    return;\n  }\n\n  if (typeof global === 'undefined') {\n    return;\n  }\n\n  global.navigator = {\n    userAgent: browserFakeUserAgent,\n    getUserMedia: function () {}\n  };\n\n  if (!global.console) {\n    global.console = {};\n  }\n\n  if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\n    global.console.error = global.console.log = global.console.log || function () {\n      console.log(arguments);\n    };\n  }\n\n  if (typeof document === 'undefined') {\n    /*global document:true */\n    that.document = {};\n\n    document.createElement = document.captureStream = document.mozCaptureStream = function () {\n      var obj = {\n        getContext: function () {\n          return obj;\n        },\n        play: function () {},\n        pause: function () {},\n        drawImage: function () {},\n        toDataURL: function () {\n          return '';\n        }\n      };\n      return obj;\n    };\n\n    that.HTMLVideoElement = function () {};\n  }\n\n  if (typeof location === 'undefined') {\n    /*global location:true */\n    that.location = {\n      protocol: 'file:',\n      href: '',\n      hash: ''\n    };\n  }\n\n  if (typeof screen === 'undefined') {\n    /*global screen:true */\n    that.screen = {\n      width: 0,\n      height: 0\n    };\n  }\n\n  if (typeof URL === 'undefined') {\n    /*global screen:true */\n    that.URL = {\n      createObjectURL: function () {\n        return '';\n      },\n      revokeObjectURL: function () {\n        return '';\n      }\n    };\n  }\n  /*global window:true */\n\n\n  that.window = global;\n})(typeof global !== 'undefined' ? global : null); // _____________________________\n// Cross-Browser-Declarations.js\n// animation-frame used in WebM recording\n\n/*jshint -W079 */\n\n\nvar requestAnimationFrame = window.requestAnimationFrame;\n\nif (typeof requestAnimationFrame === 'undefined') {\n  if (typeof webkitRequestAnimationFrame !== 'undefined') {\n    /*global requestAnimationFrame:true */\n    requestAnimationFrame = webkitRequestAnimationFrame;\n  } else if (typeof mozRequestAnimationFrame !== 'undefined') {\n    /*global requestAnimationFrame:true */\n    requestAnimationFrame = mozRequestAnimationFrame;\n  } else if (typeof msRequestAnimationFrame !== 'undefined') {\n    /*global requestAnimationFrame:true */\n    requestAnimationFrame = msRequestAnimationFrame;\n  } else if (typeof requestAnimationFrame === 'undefined') {\n    // via: https://gist.github.com/paulirish/1579671\n    var lastTime = 0;\n    /*global requestAnimationFrame:true */\n\n    requestAnimationFrame = function (callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = setTimeout(function () {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n}\n/*jshint -W079 */\n\n\nvar cancelAnimationFrame = window.cancelAnimationFrame;\n\nif (typeof cancelAnimationFrame === 'undefined') {\n  if (typeof webkitCancelAnimationFrame !== 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = webkitCancelAnimationFrame;\n  } else if (typeof mozCancelAnimationFrame !== 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = mozCancelAnimationFrame;\n  } else if (typeof msCancelAnimationFrame !== 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = msCancelAnimationFrame;\n  } else if (typeof cancelAnimationFrame === 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = function (id) {\n      clearTimeout(id);\n    };\n  }\n} // WebAudio API representer\n\n\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n  if (typeof webkitAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = webkitAudioContext;\n  }\n\n  if (typeof mozAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = mozAudioContext;\n  }\n}\n/*jshint -W079 */\n\n\nvar URL = window.URL;\n\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n  /*global URL:true */\n  URL = webkitURL;\n}\n\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') {\n  // maybe window.navigator?\n  if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n\n  if (typeof navigator.mozGetUserMedia !== 'undefined') {\n    navigator.getUserMedia = navigator.mozGetUserMedia;\n  }\n}\n\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\nvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && 'netscape' in window && / rv:/.test(navigator.userAgent);\nvar isChrome = !isOpera && !isEdge && !!navigator.webkitGetUserMedia || isElectron() || navigator.userAgent.toLowerCase().indexOf('chrome/') !== -1;\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nif (isSafari && !isChrome && navigator.userAgent.indexOf('CriOS') !== -1) {\n  isSafari = false;\n  isChrome = true;\n}\n\nvar MediaStream = window.MediaStream;\n\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n  MediaStream = webkitMediaStream;\n}\n/*global MediaStream:true */\n\n\nif (typeof MediaStream !== 'undefined') {\n  // override \"stop\" method for all browsers\n  if (typeof MediaStream.prototype.stop === 'undefined') {\n    MediaStream.prototype.stop = function () {\n      this.getTracks().forEach(function (track) {\n        track.stop();\n      });\n    };\n  }\n} // below function via: http://goo.gl/B3ae8c\n\n/**\n * Return human-readable file size.\n * @param {number} bytes - Pass bytes and get formatted string.\n * @returns {string} - formatted string\n * @example\n * bytesToSize(1024*1024*5) === '5 GB'\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nfunction bytesToSize(bytes) {\n  var k = 1000;\n  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n  return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n}\n/**\n * @param {Blob} file - File or Blob object. This parameter is required.\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\n * @example\n * invokeSaveAsDialog(blob or file, [optional] fileName);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nfunction invokeSaveAsDialog(file, fileName) {\n  if (!file) {\n    throw 'Blob object is required.';\n  }\n\n  if (!file.type) {\n    try {\n      file.type = 'video/webm';\n    } catch (e) {}\n  }\n\n  var fileExtension = (file.type || 'video/webm').split('/')[1];\n\n  if (fileName && fileName.indexOf('.') !== -1) {\n    var splitted = fileName.split('.');\n    fileName = splitted[0];\n    fileExtension = splitted[1];\n  }\n\n  var fileFullName = (fileName || Math.round(Math.random() * 9999999999) + 888888888) + '.' + fileExtension;\n\n  if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n    return navigator.msSaveOrOpenBlob(file, fileFullName);\n  } else if (typeof navigator.msSaveBlob !== 'undefined') {\n    return navigator.msSaveBlob(file, fileFullName);\n  }\n\n  var hyperlink = document.createElement('a');\n  hyperlink.href = URL.createObjectURL(file);\n  hyperlink.download = fileFullName;\n  hyperlink.style = 'display:none;opacity:0;color:transparent;';\n  (document.body || document.documentElement).appendChild(hyperlink);\n\n  if (typeof hyperlink.click === 'function') {\n    hyperlink.click();\n  } else {\n    hyperlink.target = '_blank';\n    hyperlink.dispatchEvent(new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true\n    }));\n  }\n\n  URL.revokeObjectURL(hyperlink.href);\n}\n/**\n * from: https://github.com/cheton/is-electron/blob/master/index.js\n **/\n\n\nfunction isElectron() {\n  // Renderer process\n  if (typeof window !== 'undefined' && (0, _typeof2.default)(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  } // Main process\n\n\n  if (typeof process !== 'undefined' && (0, _typeof2.default)(process.versions) === 'object' && !!process.versions.electron) {\n    return true;\n  } // Detect the user agent when the `nodeIntegration` option is set to true\n\n\n  if ((typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction getTracks(stream, kind) {\n  if (!stream || !stream.getTracks) {\n    return [];\n  }\n\n  return stream.getTracks().filter(function (t) {\n    return t.kind === (kind || 'audio');\n  });\n}\n\nfunction setSrcObject(stream, element) {\n  if ('srcObject' in element) {\n    element.srcObject = stream;\n  } else if ('mozSrcObject' in element) {\n    element.mozSrcObject = stream;\n  } else {\n    element.srcObject = stream;\n  }\n}\n/**\n * @param {Blob} file - File or Blob object.\n * @param {function} callback - Callback function.\n * @example\n * getSeekableBlob(blob or file, callback);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nfunction getSeekableBlob(inputBlob, callback) {\n  // EBML.js copyrights goes to: https://github.com/legokichi/ts-ebml\n  if (typeof EBML === 'undefined') {\n    throw new Error('Please link: https://cdn.webrtc-experiment.com/EBML.js');\n  }\n\n  var reader = new EBML.Reader();\n  var decoder = new EBML.Decoder();\n  var tools = EBML.tools;\n  var fileReader = new FileReader();\n\n  fileReader.onload = function (e) {\n    var ebmlElms = decoder.decode(this.result);\n    ebmlElms.forEach(function (element) {\n      reader.read(element);\n    });\n    reader.stop();\n    var refinedMetadataBuf = tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\n    var body = this.result.slice(reader.metadataSize);\n    var newBlob = new Blob([refinedMetadataBuf, body], {\n      type: 'video/webm'\n    });\n    callback(newBlob);\n  };\n\n  fileReader.readAsArrayBuffer(inputBlob);\n} // __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// Storage.js\n\n/**\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * Storage.AudioContext === webkitAudioContext\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nvar Storage = {};\n\nif (typeof AudioContext !== 'undefined') {\n  Storage.AudioContext = AudioContext;\n} else if (typeof webkitAudioContext !== 'undefined') {\n  Storage.AudioContext = webkitAudioContext;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.Storage = Storage;\n}\n\nfunction isMediaRecorderCompatible() {\n  if (isFirefox || isSafari || isEdge) {\n    return true;\n  }\n\n  var nVer = navigator.appVersion;\n  var nAgt = navigator.userAgent;\n  var fullVersion = '' + parseFloat(navigator.appVersion);\n  var majorVersion = parseInt(navigator.appVersion, 10);\n  var nameOffset, verOffset, ix;\n\n  if (isChrome || isOpera) {\n    verOffset = nAgt.indexOf('Chrome');\n    fullVersion = nAgt.substring(verOffset + 7);\n  } // trim the fullVersion string at semicolon/space if present\n\n\n  if ((ix = fullVersion.indexOf(';')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  if ((ix = fullVersion.indexOf(' ')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  majorVersion = parseInt('' + fullVersion, 10);\n\n  if (isNaN(majorVersion)) {\n    fullVersion = '' + parseFloat(navigator.appVersion);\n    majorVersion = parseInt(navigator.appVersion, 10);\n  }\n\n  return majorVersion >= 49;\n} // ______________________\n// MediaStreamRecorder.js\n\n/**\n * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.\n * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link https://github.com/muaz-khan|Muaz Khan}\n * @typedef MediaStreamRecorder\n * @class\n * @example\n * var config = {\n *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis\n *     audioBitsPerSecond : 256 * 8 * 1024,\n *     videoBitsPerSecond : 256 * 8 * 1024,\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\n *     checkForInactiveTracks: true,\n *     timeSlice: 1000, // concatenate intervals based blobs\n *     ondataavailable: function() {} // get intervals based blobs\n * }\n * var recorder = new MediaStreamRecorder(mediaStream, config);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", timeSlice: 1000}\n * @throws Will throw an error if first argument \"MediaStream\" is missing. Also throws error if \"MediaRecorder API\" are not supported by the browser.\n */\n\n\nfunction MediaStreamRecorder(mediaStream, config) {\n  var self = this;\n\n  if (typeof mediaStream === 'undefined') {\n    throw 'First argument \"MediaStream\" is required.';\n  }\n\n  if (typeof MediaRecorder === 'undefined') {\n    throw 'Your browser does not supports Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.';\n  }\n\n  config = config || {\n    // bitsPerSecond: 256 * 8 * 1024,\n    mimeType: 'video/webm'\n  };\n\n  if (config.type === 'audio') {\n    if (getTracks(mediaStream, 'video').length && getTracks(mediaStream, 'audio').length) {\n      var stream;\n\n      if (!!navigator.mozGetUserMedia) {\n        stream = new MediaStream();\n        stream.addTrack(getTracks(mediaStream, 'audio')[0]);\n      } else {\n        // webkitMediaStream\n        stream = new MediaStream(getTracks(mediaStream, 'audio'));\n      }\n\n      mediaStream = stream;\n    }\n\n    if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\n      config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\n    }\n\n    if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\n      // forcing better codecs on Firefox (via #166)\n      config.mimeType = 'audio/ogg';\n    }\n  }\n\n  var arrayOfBlobs = [];\n  /**\n   * This method returns array of blobs. Use only with \"timeSlice\". Its useful to preview recording anytime, without using the \"stop\" method.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * var arrayOfBlobs = recorder.getArrayOfBlobs();\n   * @returns {Array} Returns array of recorded blobs.\n   */\n\n  this.getArrayOfBlobs = function () {\n    return arrayOfBlobs;\n  };\n  /**\n   * This method records MediaStream.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.record();\n   */\n\n\n  this.record = function () {\n    // set defaults\n    self.blob = null;\n    self.clearRecordedData();\n    self.timestamps = [];\n    allStates = [];\n    arrayOfBlobs = [];\n    var recorderHints = config;\n\n    if (!config.disableLogs) {\n      console.log('Passing following config over MediaRecorder API.', recorderHints);\n    }\n\n    if (mediaRecorder) {\n      // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\n      mediaRecorder = null;\n    }\n\n    if (isChrome && !isMediaRecorderCompatible()) {\n      // to support video-only recording on stable\n      recorderHints = 'video/vp8';\n    }\n\n    if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\n      if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\n        if (!config.disableLogs) {\n          console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n        }\n\n        recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\n      }\n    } // using MediaRecorder API here\n\n\n    try {\n      mediaRecorder = new MediaRecorder(mediaStream, recorderHints); // reset\n\n      config.mimeType = recorderHints.mimeType;\n    } catch (e) {\n      // chrome-based fallback\n      mediaRecorder = new MediaRecorder(mediaStream);\n    } // old hack?\n\n\n    if (recorderHints.mimeType && !MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(recorderHints.mimeType) === false) {\n      if (!config.disableLogs) {\n        console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n      }\n    } // Dispatching OnDataAvailable Handler\n\n\n    mediaRecorder.ondataavailable = function (e) {\n      if (e.data) {\n        allStates.push('ondataavailable: ' + bytesToSize(e.data.size));\n      }\n\n      if (typeof config.timeSlice === 'number') {\n        if (e.data && e.data.size && e.data.size > 100) {\n          arrayOfBlobs.push(e.data);\n          updateTimeStamp();\n\n          if (typeof config.ondataavailable === 'function') {\n            // intervals based blobs\n            var blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n              type: getMimeType(recorderHints)\n            });\n            config.ondataavailable(blob);\n          }\n        }\n\n        return;\n      }\n\n      if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\n        // make sure that stopRecording always getting fired\n        // even if there is invalid data\n        if (self.recordingCallback) {\n          self.recordingCallback(new Blob([], {\n            type: getMimeType(recorderHints)\n          }));\n          self.recordingCallback = null;\n        }\n\n        return;\n      }\n\n      self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n        type: getMimeType(recorderHints)\n      });\n\n      if (self.recordingCallback) {\n        self.recordingCallback(self.blob);\n        self.recordingCallback = null;\n      }\n    };\n\n    mediaRecorder.onstart = function () {\n      allStates.push('started');\n    };\n\n    mediaRecorder.onpause = function () {\n      allStates.push('paused');\n    };\n\n    mediaRecorder.onresume = function () {\n      allStates.push('resumed');\n    };\n\n    mediaRecorder.onstop = function () {\n      allStates.push('stopped');\n    };\n\n    mediaRecorder.onerror = function (error) {\n      if (!error) {\n        return;\n      }\n\n      if (!error.name) {\n        error.name = 'UnknownError';\n      }\n\n      allStates.push('error: ' + error);\n\n      if (!config.disableLogs) {\n        // via: https://w3c.github.io/mediacapture-record/MediaRecorder.html#exception-summary\n        if (error.name.toString().toLowerCase().indexOf('invalidstate') !== -1) {\n          console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.', error);\n        } else if (error.name.toString().toLowerCase().indexOf('notsupported') !== -1) {\n          console.error('MIME type (', recorderHints.mimeType, ') is not supported.', error);\n        } else if (error.name.toString().toLowerCase().indexOf('security') !== -1) {\n          console.error('MediaRecorder security error', error);\n        } // older code below\n        else if (error.name === 'OutOfMemory') {\n            console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n          } else if (error.name === 'IllegalStreamModification') {\n            console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n          } else if (error.name === 'OtherRecordingError') {\n            console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n          } else if (error.name === 'GenericError') {\n            console.error('The UA cannot provide the codec or recording option that has been requested.', error);\n          } else {\n            console.error('MediaRecorder Error', error);\n          }\n      }\n\n      (function (looper) {\n        if (!self.manuallyStopped && mediaRecorder && mediaRecorder.state === 'inactive') {\n          delete config.timeslice; // 10 minutes, enough?\n\n          mediaRecorder.start(10 * 60 * 1000);\n          return;\n        }\n\n        setTimeout(looper, 1000);\n      })();\n\n      if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\n        mediaRecorder.stop();\n      }\n    };\n\n    if (typeof config.timeSlice === 'number') {\n      updateTimeStamp();\n      mediaRecorder.start(config.timeSlice);\n    } else {\n      // default is 60 minutes; enough?\n      // use config => {timeSlice: 1000} otherwise\n      mediaRecorder.start(3.6e+6);\n    }\n\n    if (config.initCallback) {\n      config.initCallback(); // old code\n    }\n  };\n  /**\n   * @property {Array} timestamps - Array of time stamps\n   * @memberof MediaStreamRecorder\n   * @example\n   * console.log(recorder.timestamps);\n   */\n\n\n  this.timestamps = [];\n\n  function updateTimeStamp() {\n    self.timestamps.push(new Date().getTime());\n\n    if (typeof config.onTimeStamp === 'function') {\n      config.onTimeStamp(self.timestamps[self.timestamps.length - 1], self.timestamps);\n    }\n  }\n\n  function getMimeType(secondObject) {\n    if (mediaRecorder && mediaRecorder.mimeType) {\n      return mediaRecorder.mimeType;\n    }\n\n    return secondObject.mimeType || 'video/webm';\n  }\n  /**\n   * This method stops recording MediaStream.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n\n  this.stop = function (callback) {\n    callback = callback || function () {};\n\n    self.manuallyStopped = true; // used inside the mediaRecorder.onerror\n\n    if (!mediaRecorder) {\n      return;\n    }\n\n    this.recordingCallback = callback;\n\n    if (mediaRecorder.state === 'recording') {\n      mediaRecorder.stop();\n    }\n\n    if (typeof config.timeSlice === 'number') {\n      setTimeout(function () {\n        self.blob = new Blob(arrayOfBlobs, {\n          type: getMimeType(config)\n        });\n        self.recordingCallback(self.blob);\n      }, 100);\n    }\n  };\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.pause();\n   */\n\n\n  this.pause = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (mediaRecorder.state === 'recording') {\n      mediaRecorder.pause();\n    }\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (mediaRecorder.state === 'paused') {\n      mediaRecorder.resume();\n    }\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    if (mediaRecorder && mediaRecorder.state === 'recording') {\n      self.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    arrayOfBlobs = [];\n    mediaRecorder = null;\n    self.timestamps = [];\n  } // Reference to \"MediaRecorder\" object\n\n\n  var mediaRecorder;\n  /**\n   * Access to native MediaRecorder API\n   * @method\n   * @memberof MediaStreamRecorder\n   * @instance\n   * @example\n   * var internal = recorder.getInternalRecorder();\n   * internal.ondataavailable = function() {}; // override\n   * internal.stream, internal.onpause, internal.onstop, etc.\n   * @returns {Object} Returns internal recording object.\n   */\n\n  this.getInternalRecorder = function () {\n    return mediaRecorder;\n  };\n\n  function isMediaStreamActive() {\n    if ('active' in mediaStream) {\n      if (!mediaStream.active) {\n        return false;\n      }\n    } else if ('ended' in mediaStream) {\n      // old hack\n      if (mediaStream.ended) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n  /**\n   * @property {Blob} blob - Recorded data as \"Blob\" object.\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.stop(function() {\n   *     var blob = recorder.blob;\n   * });\n   */\n\n\n  this.blob = null;\n  /**\n   * Get MediaRecorder readonly state.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * var state = recorder.getState();\n   * @returns {String} Returns recording state.\n   */\n\n  this.getState = function () {\n    if (!mediaRecorder) {\n      return 'inactive';\n    }\n\n    return mediaRecorder.state || 'inactive';\n  }; // list of all recording states\n\n\n  var allStates = [];\n  /**\n   * Get MediaRecorder all recording states.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * var state = recorder.getAllStates();\n   * @returns {Array} Returns all recording states\n   */\n\n  this.getAllStates = function () {\n    return allStates;\n  }; // if any Track within the MediaStream is muted or not enabled at any time,\n  // the browser will only record black frames\n  // or silence since that is the content produced by the Track\n  // so we need to stopRecording as soon as any single track ends.\n\n\n  if (typeof config.checkForInactiveTracks === 'undefined') {\n    config.checkForInactiveTracks = false; // disable to minimize CPU usage\n  }\n\n  var self = this; // this method checks if media stream is stopped\n  // or if any track is ended.\n\n  (function () {\n    function looper() {\n      if (!mediaRecorder || config.checkForInactiveTracks === false) {\n        return;\n      }\n\n      if (isMediaStreamActive() === false) {\n        if (!config.disableLogs) {\n          console.log('MediaStream seems stopped.');\n        }\n\n        self.stop();\n        return;\n      }\n\n      setTimeout(looper, 1000); // check every second\n    }\n\n    return looper;\n  })()(); // for debugging\n\n  this.name = 'MediaStreamRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\n} // source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\n// https://github.com/mattdiamond/Recorderjs#license-mit\n// ______________________\n// StereoAudioRecorder.js\n\n/**\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\n * @summary JavaScript standalone object for stereo audio recording.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef StereoAudioRecorder\n * @class\n * @example\n * var recorder = new StereoAudioRecorder(MediaStream, {\n *     sampleRate: 44100,\n *     bufferSize: 4096\n * });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\n */\n\n\nfunction StereoAudioRecorder(mediaStream, config) {\n  if (!getTracks(mediaStream, 'audio').length) {\n    throw 'Your stream has no audio tracks.';\n  }\n\n  config = config || {};\n  var self = this; // variables\n\n  var leftchannel = [];\n  var rightchannel = [];\n  var recording = false;\n  var recordingLength = 0;\n  var jsAudioNode;\n  var numberOfAudioChannels = 2;\n  /**\n   * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\n   * @property {number} desiredSampRate - Desired Bits per sample * 1000\n   * @memberof StereoAudioRecorder\n   * @instance\n   * @example\n   * var recorder = StereoAudioRecorder(mediaStream, {\n   *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\n   * });\n   */\n\n  var desiredSampRate = config.desiredSampRate; // backward compatibility\n\n  if (config.leftChannel === true) {\n    numberOfAudioChannels = 1;\n  }\n\n  if (config.numberOfAudioChannels === 1) {\n    numberOfAudioChannels = 1;\n  }\n\n  if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\n    numberOfAudioChannels = 2;\n  }\n\n  if (!config.disableLogs) {\n    console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\n  } // if any Track within the MediaStream is muted or not enabled at any time,\n  // the browser will only record black frames\n  // or silence since that is the content produced by the Track\n  // so we need to stopRecording as soon as any single track ends.\n\n\n  if (typeof config.checkForInactiveTracks === 'undefined') {\n    config.checkForInactiveTracks = true;\n  }\n\n  function isMediaStreamActive() {\n    if (config.checkForInactiveTracks === false) {\n      // always return \"true\"\n      return true;\n    }\n\n    if ('active' in mediaStream) {\n      if (!mediaStream.active) {\n        return false;\n      }\n    } else if ('ended' in mediaStream) {\n      // old hack\n      if (mediaStream.ended) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n  /**\n   * This method records MediaStream.\n   * @method\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder.record();\n   */\n\n\n  this.record = function () {\n    if (isMediaStreamActive() === false) {\n      throw 'Please make sure MediaStream is active.';\n    }\n\n    resetVariables();\n    isAudioProcessStarted = isPaused = false;\n    recording = true;\n\n    if (typeof config.timeSlice !== 'undefined') {\n      looper();\n    }\n  };\n\n  function mergeLeftRightBuffers(config, callback) {\n    function mergeAudioBuffers(config, cb) {\n      var numberOfAudioChannels = config.numberOfAudioChannels; // todo: \"slice(0)\" --- is it causes loop? Should be removed?\n\n      var leftBuffers = config.leftBuffers.slice(0);\n      var rightBuffers = config.rightBuffers.slice(0);\n      var sampleRate = config.sampleRate;\n      var internalInterleavedLength = config.internalInterleavedLength;\n      var desiredSampRate = config.desiredSampRate;\n\n      if (numberOfAudioChannels === 2) {\n        leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n        rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\n\n        if (desiredSampRate) {\n          leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\n          rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\n        }\n      }\n\n      if (numberOfAudioChannels === 1) {\n        leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n\n        if (desiredSampRate) {\n          leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\n        }\n      } // set sample rate as desired sample rate\n\n\n      if (desiredSampRate) {\n        sampleRate = desiredSampRate;\n      } // for changing the sampling rate, reference:\n      // http://stackoverflow.com/a/28977136/552182\n\n\n      function interpolateArray(data, newSampleRate, oldSampleRate) {\n        var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\n        var newData = [];\n        var springFactor = Number((data.length - 1) / (fitCount - 1));\n        newData[0] = data[0];\n\n        for (var i = 1; i < fitCount - 1; i++) {\n          var tmp = i * springFactor;\n          var before = Number(Math.floor(tmp)).toFixed();\n          var after = Number(Math.ceil(tmp)).toFixed();\n          var atPoint = tmp - before;\n          newData[i] = linearInterpolate(data[before], data[after], atPoint);\n        }\n\n        newData[fitCount - 1] = data[data.length - 1];\n        return newData;\n      }\n\n      function linearInterpolate(before, after, atPoint) {\n        return before + (after - before) * atPoint;\n      }\n\n      function mergeBuffers(channelBuffer, rLength) {\n        var result = new Float64Array(rLength);\n        var offset = 0;\n        var lng = channelBuffer.length;\n\n        for (var i = 0; i < lng; i++) {\n          var buffer = channelBuffer[i];\n          result.set(buffer, offset);\n          offset += buffer.length;\n        }\n\n        return result;\n      }\n\n      function interleave(leftChannel, rightChannel) {\n        var length = leftChannel.length + rightChannel.length;\n        var result = new Float64Array(length);\n        var inputIndex = 0;\n\n        for (var index = 0; index < length;) {\n          result[index++] = leftChannel[inputIndex];\n          result[index++] = rightChannel[inputIndex];\n          inputIndex++;\n        }\n\n        return result;\n      }\n\n      function writeUTFBytes(view, offset, string) {\n        var lng = string.length;\n\n        for (var i = 0; i < lng; i++) {\n          view.setUint8(offset + i, string.charCodeAt(i));\n        }\n      } // interleave both channels together\n\n\n      var interleaved;\n\n      if (numberOfAudioChannels === 2) {\n        interleaved = interleave(leftBuffers, rightBuffers);\n      }\n\n      if (numberOfAudioChannels === 1) {\n        interleaved = leftBuffers;\n      }\n\n      var interleavedLength = interleaved.length; // create wav file\n\n      var resultingBufferLength = 44 + interleavedLength * 2;\n      var buffer = new ArrayBuffer(resultingBufferLength);\n      var view = new DataView(buffer); // RIFF chunk descriptor/identifier\n\n      writeUTFBytes(view, 0, 'RIFF'); // RIFF chunk length\n      // changed \"44\" to \"36\" via #401\n\n      view.setUint32(4, 36 + interleavedLength * 2, true); // RIFF type\n\n      writeUTFBytes(view, 8, 'WAVE'); // format chunk identifier\n      // FMT sub-chunk\n\n      writeUTFBytes(view, 12, 'fmt '); // format chunk length\n\n      view.setUint32(16, 16, true); // sample format (raw)\n\n      view.setUint16(20, 1, true); // stereo (2 channels)\n\n      view.setUint16(22, numberOfAudioChannels, true); // sample rate\n\n      view.setUint32(24, sampleRate, true); // byte rate (sample rate * block align)\n\n      view.setUint32(28, sampleRate * 2, true); // block align (channel count * bytes per sample)\n\n      view.setUint16(32, numberOfAudioChannels * 2, true); // bits per sample\n\n      view.setUint16(34, 16, true); // data sub-chunk\n      // data chunk identifier\n\n      writeUTFBytes(view, 36, 'data'); // data chunk length\n\n      view.setUint32(40, interleavedLength * 2, true); // write the PCM samples\n\n      var lng = interleavedLength;\n      var index = 44;\n      var volume = 1;\n\n      for (var i = 0; i < lng; i++) {\n        view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n        index += 2;\n      }\n\n      if (cb) {\n        return cb({\n          buffer: buffer,\n          view: view\n        });\n      }\n\n      postMessage({\n        buffer: buffer,\n        view: view\n      });\n    }\n\n    if (config.noWorker) {\n      mergeAudioBuffers(config, function (data) {\n        callback(data.buffer, data.view);\n      });\n      return;\n    }\n\n    var webWorker = processInWebWorker(mergeAudioBuffers);\n\n    webWorker.onmessage = function (event) {\n      callback(event.data.buffer, event.data.view); // release memory\n\n      URL.revokeObjectURL(webWorker.workerURL); // kill webworker (or Chrome will kill your page after ~25 calls)\n\n      webWorker.terminate();\n    };\n\n    webWorker.postMessage(config);\n  }\n\n  function processInWebWorker(_function) {\n    var workerURL = URL.createObjectURL(new Blob([_function.toString(), ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n      type: 'application/javascript'\n    }));\n    var worker = new Worker(workerURL);\n    worker.workerURL = workerURL;\n    return worker;\n  }\n  /**\n   * This method stops recording MediaStream.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n\n  this.stop = function (callback) {\n    callback = callback || function () {}; // stop recording\n\n\n    recording = false;\n    mergeLeftRightBuffers({\n      desiredSampRate: desiredSampRate,\n      sampleRate: sampleRate,\n      numberOfAudioChannels: numberOfAudioChannels,\n      internalInterleavedLength: recordingLength,\n      leftBuffers: leftchannel,\n      rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\n      noWorker: config.noWorker\n    }, function (buffer, view) {\n      /**\n       * @property {Blob} blob - The recorded blob object.\n       * @memberof StereoAudioRecorder\n       * @example\n       * recorder.stop(function(){\n       *     var blob = recorder.blob;\n       * });\n       */\n      self.blob = new Blob([view], {\n        type: 'audio/wav'\n      });\n      /**\n       * @property {ArrayBuffer} buffer - The recorded buffer object.\n       * @memberof StereoAudioRecorder\n       * @example\n       * recorder.stop(function(){\n       *     var buffer = recorder.buffer;\n       * });\n       */\n\n      self.buffer = new ArrayBuffer(view.buffer.byteLength);\n      /**\n       * @property {DataView} view - The recorded data-view object.\n       * @memberof StereoAudioRecorder\n       * @example\n       * recorder.stop(function(){\n       *     var view = recorder.view;\n       * });\n       */\n\n      self.view = view;\n      self.sampleRate = desiredSampRate || sampleRate;\n      self.bufferSize = bufferSize; // recorded audio length\n\n      self.length = recordingLength;\n      isAudioProcessStarted = false;\n\n      if (callback) {\n        callback(self.blob);\n      }\n    });\n  };\n\n  if (typeof Storage === 'undefined') {\n    var Storage = {\n      AudioContextConstructor: null,\n      AudioContext: window.AudioContext || window.webkitAudioContext\n    };\n  }\n\n  if (!Storage.AudioContextConstructor) {\n    Storage.AudioContextConstructor = new Storage.AudioContext();\n  }\n\n  var context = Storage.AudioContextConstructor; // creates an audio node from the microphone incoming stream\n\n  var audioInput = context.createMediaStreamSource(mediaStream);\n  var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\n  /**\n   * From the spec: This value controls how frequently the audioprocess event is\n   * dispatched and how many sample-frames need to be processed each call.\n   * Lower values for buffer size will result in a lower (better) latency.\n   * Higher values will be necessary to avoid audio breakup and glitches\n   * The size of the buffer (in sample-frames) which needs to\n   * be processed each time onprocessaudio is called.\n   * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\n   * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder = new StereoAudioRecorder(mediaStream, {\n   *     bufferSize: 4096\n   * });\n   */\n  // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\n\n  var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\n\n  if (legalBufferValues.indexOf(bufferSize) === -1) {\n    if (!config.disableLogs) {\n      console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\n    }\n  }\n\n  if (context.createJavaScriptNode) {\n    jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n  } else if (context.createScriptProcessor) {\n    jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n  } else {\n    throw 'WebAudio API has no support on this browser.';\n  } // connect the stream to the script processor\n\n\n  audioInput.connect(jsAudioNode);\n\n  if (!config.bufferSize) {\n    bufferSize = jsAudioNode.bufferSize; // device buffer-size\n  }\n  /**\n   * The sample rate (in sample-frames per second) at which the\n   * AudioContext handles audio. It is assumed that all AudioNodes\n   * in the context run at this rate. In making this assumption,\n   * sample-rate converters or \"varispeed\" processors are not supported\n   * in real-time processing.\n   * The sampleRate parameter describes the sample-rate of the\n   * linear PCM audio data in the buffer in sample-frames per second.\n   * An implementation must support sample-rates in at least\n   * the range 22050 to 96000.\n   * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder = new StereoAudioRecorder(mediaStream, {\n   *     sampleRate: 44100\n   * });\n   */\n\n\n  var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\n\n  if (sampleRate < 22050 || sampleRate > 96000) {\n    // Ref: http://stackoverflow.com/a/26303918/552182\n    if (!config.disableLogs) {\n      console.log('sample-rate must be under range 22050 and 96000.');\n    }\n  }\n\n  if (!config.disableLogs) {\n    if (config.desiredSampRate) {\n      console.log('Desired sample-rate: ' + config.desiredSampRate);\n    }\n  }\n\n  var isPaused = false;\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder.pause();\n   */\n\n  this.pause = function () {\n    isPaused = true;\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    if (isMediaStreamActive() === false) {\n      throw 'Please make sure MediaStream is active.';\n    }\n\n    if (!recording) {\n      if (!config.disableLogs) {\n        console.log('Seems recording has been restarted.');\n      }\n\n      this.record();\n      return;\n    }\n\n    isPaused = false;\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof StereoAudioRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    config.checkForInactiveTracks = false;\n\n    if (recording) {\n      this.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function resetVariables() {\n    leftchannel = [];\n    rightchannel = [];\n    recordingLength = 0;\n    isAudioProcessStarted = false;\n    recording = false;\n    isPaused = false;\n    context = null;\n    self.leftchannel = leftchannel;\n    self.rightchannel = rightchannel;\n    self.numberOfAudioChannels = numberOfAudioChannels;\n    self.desiredSampRate = desiredSampRate;\n    self.sampleRate = sampleRate;\n    self.recordingLength = recordingLength;\n    intervalsBasedBuffers = {\n      left: [],\n      right: [],\n      recordingLength: 0\n    };\n  }\n\n  function clearRecordedDataCB() {\n    if (jsAudioNode) {\n      jsAudioNode.onaudioprocess = null;\n      jsAudioNode.disconnect();\n      jsAudioNode = null;\n    }\n\n    if (audioInput) {\n      audioInput.disconnect();\n      audioInput = null;\n    }\n\n    resetVariables();\n  } // for debugging\n\n\n  this.name = 'StereoAudioRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  var isAudioProcessStarted = false;\n\n  function onAudioProcessDataAvailable(e) {\n    if (isPaused) {\n      return;\n    }\n\n    if (isMediaStreamActive() === false) {\n      if (!config.disableLogs) {\n        console.log('MediaStream seems stopped.');\n      }\n\n      jsAudioNode.disconnect();\n      recording = false;\n    }\n\n    if (!recording) {\n      if (audioInput) {\n        audioInput.disconnect();\n        audioInput = null;\n      }\n\n      return;\n    }\n    /**\n     * This method is called on \"onaudioprocess\" event's first invocation.\n     * @method {function} onAudioProcessStarted\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.onAudioProcessStarted: function() { };\n     */\n\n\n    if (!isAudioProcessStarted) {\n      isAudioProcessStarted = true;\n\n      if (config.onAudioProcessStarted) {\n        config.onAudioProcessStarted();\n      }\n\n      if (config.initCallback) {\n        config.initCallback();\n      }\n    }\n\n    var left = e.inputBuffer.getChannelData(0); // we clone the samples\n\n    var chLeft = new Float32Array(left);\n    leftchannel.push(chLeft);\n\n    if (numberOfAudioChannels === 2) {\n      var right = e.inputBuffer.getChannelData(1);\n      var chRight = new Float32Array(right);\n      rightchannel.push(chRight);\n    }\n\n    recordingLength += bufferSize; // export raw PCM\n\n    self.recordingLength = recordingLength;\n\n    if (typeof config.timeSlice !== 'undefined') {\n      intervalsBasedBuffers.recordingLength += bufferSize;\n      intervalsBasedBuffers.left.push(chLeft);\n\n      if (numberOfAudioChannels === 2) {\n        intervalsBasedBuffers.right.push(chRight);\n      }\n    }\n  }\n\n  jsAudioNode.onaudioprocess = onAudioProcessDataAvailable; // to prevent self audio to be connected with speakers\n\n  if (context.createMediaStreamDestination) {\n    jsAudioNode.connect(context.createMediaStreamDestination());\n  } else {\n    jsAudioNode.connect(context.destination);\n  } // export raw PCM\n\n\n  this.leftchannel = leftchannel;\n  this.rightchannel = rightchannel;\n  this.numberOfAudioChannels = numberOfAudioChannels;\n  this.desiredSampRate = desiredSampRate;\n  this.sampleRate = sampleRate;\n  self.recordingLength = recordingLength; // helper for intervals based blobs\n\n  var intervalsBasedBuffers = {\n    left: [],\n    right: [],\n    recordingLength: 0\n  }; // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\n\n  function looper() {\n    if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\n      return;\n    }\n\n    if (intervalsBasedBuffers.left.length) {\n      mergeLeftRightBuffers({\n        desiredSampRate: desiredSampRate,\n        sampleRate: sampleRate,\n        numberOfAudioChannels: numberOfAudioChannels,\n        internalInterleavedLength: intervalsBasedBuffers.recordingLength,\n        leftBuffers: intervalsBasedBuffers.left,\n        rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\n      }, function (buffer, view) {\n        var blob = new Blob([view], {\n          type: 'audio/wav'\n        });\n        config.ondataavailable(blob);\n        setTimeout(looper, config.timeSlice);\n      });\n      intervalsBasedBuffers = {\n        left: [],\n        right: [],\n        recordingLength: 0\n      };\n    } else {\n      setTimeout(looper, config.timeSlice);\n    }\n  }\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\n} // _________________\n// CanvasRecorder.js\n\n/**\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\n * @summary HTML2Canvas recording into video WebM.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef CanvasRecorder\n * @class\n * @example\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\n * @param {object} config - {disableLogs:true, initCallback: function}\n */\n\n\nfunction CanvasRecorder(htmlElement, config) {\n  if (typeof html2canvas === 'undefined') {\n    throw 'Please link: https://cdn.webrtc-experiment.com/screenshot.js';\n  }\n\n  config = config || {};\n\n  if (!config.frameInterval) {\n    config.frameInterval = 10;\n  } // via DetectRTC.js\n\n\n  var isCanvasSupportsStreamCapturing = false;\n  ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function (item) {\n    if (item in document.createElement('canvas')) {\n      isCanvasSupportsStreamCapturing = true;\n    }\n  });\n\n  var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\n\n  var chromeVersion = 50;\n  var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n\n  if (_isChrome && matchArray && matchArray[2]) {\n    chromeVersion = parseInt(matchArray[2], 10);\n  }\n\n  if (_isChrome && chromeVersion < 52) {\n    isCanvasSupportsStreamCapturing = false;\n  }\n\n  if (config.useWhammyRecorder) {\n    isCanvasSupportsStreamCapturing = false;\n  }\n\n  var globalCanvas, mediaStreamRecorder;\n\n  if (isCanvasSupportsStreamCapturing) {\n    if (!config.disableLogs) {\n      console.log('Your browser supports both MediRecorder API and canvas.captureStream!');\n    }\n\n    if (htmlElement instanceof HTMLCanvasElement) {\n      globalCanvas = htmlElement;\n    } else if (htmlElement instanceof CanvasRenderingContext2D) {\n      globalCanvas = htmlElement.canvas;\n    } else {\n      throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\n    }\n  } else if (!!navigator.mozGetUserMedia) {\n    if (!config.disableLogs) {\n      console.error('Canvas recording is NOT supported in Firefox.');\n    }\n  }\n\n  var isRecording;\n  /**\n   * This method records Canvas.\n   * @method\n   * @memberof CanvasRecorder\n   * @example\n   * recorder.record();\n   */\n\n  this.record = function () {\n    isRecording = true;\n\n    if (isCanvasSupportsStreamCapturing && !config.useWhammyRecorder) {\n      // CanvasCaptureMediaStream\n      var canvasMediaStream;\n\n      if ('captureStream' in globalCanvas) {\n        canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\n      } else if ('mozCaptureStream' in globalCanvas) {\n        canvasMediaStream = globalCanvas.mozCaptureStream(25);\n      } else if ('webkitCaptureStream' in globalCanvas) {\n        canvasMediaStream = globalCanvas.webkitCaptureStream(25);\n      }\n\n      try {\n        var mdStream = new MediaStream();\n        mdStream.addTrack(getTracks(canvasMediaStream, 'video')[0]);\n        canvasMediaStream = mdStream;\n      } catch (e) {}\n\n      if (!canvasMediaStream) {\n        throw 'captureStream API are NOT available.';\n      } // Note: Jan 18, 2016 status is that,\n      // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\n\n\n      mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\n        mimeType: config.mimeType || 'video/webm'\n      });\n      mediaStreamRecorder.record();\n    } else {\n      whammy.frames = [];\n      lastTime = new Date().getTime();\n      drawCanvasFrame();\n    }\n\n    if (config.initCallback) {\n      config.initCallback();\n    }\n  };\n\n  this.getWebPImages = function (callback) {\n    if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\n      callback();\n      return;\n    }\n\n    var framesLength = whammy.frames.length;\n    whammy.frames.forEach(function (frame, idx) {\n      var framesRemaining = framesLength - idx;\n\n      if (!config.disableLogs) {\n        console.log(framesRemaining + '/' + framesLength + ' frames remaining');\n      }\n\n      if (config.onEncodingCallback) {\n        config.onEncodingCallback(framesRemaining, framesLength);\n      }\n\n      var webp = frame.image.toDataURL('image/webp', 1);\n      whammy.frames[idx].image = webp;\n    });\n\n    if (!config.disableLogs) {\n      console.log('Generating WebM');\n    }\n\n    callback();\n  };\n  /**\n   * This method stops recording Canvas.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof CanvasRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n\n  this.stop = function (callback) {\n    isRecording = false;\n    var that = this;\n\n    if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\n      mediaStreamRecorder.stop(callback);\n      return;\n    }\n\n    this.getWebPImages(function () {\n      /**\n       * @property {Blob} blob - Recorded frames in video/webm blob.\n       * @memberof CanvasRecorder\n       * @example\n       * recorder.stop(function() {\n       *     var blob = recorder.blob;\n       * });\n       */\n      whammy.compile(function (blob) {\n        if (!config.disableLogs) {\n          console.log('Recording finished!');\n        }\n\n        that.blob = blob;\n\n        if (that.blob.forEach) {\n          that.blob = new Blob([], {\n            type: 'video/webm'\n          });\n        }\n\n        if (callback) {\n          callback(that.blob);\n        }\n\n        whammy.frames = [];\n      });\n    });\n  };\n\n  var isPausedRecording = false;\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof CanvasRecorder\n   * @example\n   * recorder.pause();\n   */\n\n  this.pause = function () {\n    isPausedRecording = true;\n\n    if (mediaStreamRecorder instanceof MediaStreamRecorder) {\n      mediaStreamRecorder.pause();\n      return;\n    }\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof CanvasRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    isPausedRecording = false;\n\n    if (mediaStreamRecorder instanceof MediaStreamRecorder) {\n      mediaStreamRecorder.resume();\n      return;\n    }\n\n    if (!isRecording) {\n      this.record();\n    }\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof CanvasRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    if (isRecording) {\n      this.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    whammy.frames = [];\n    isRecording = false;\n    isPausedRecording = false;\n  } // for debugging\n\n\n  this.name = 'CanvasRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  function cloneCanvas() {\n    //create a new canvas\n    var newCanvas = document.createElement('canvas');\n    var context = newCanvas.getContext('2d'); //set dimensions\n\n    newCanvas.width = htmlElement.width;\n    newCanvas.height = htmlElement.height; //apply the old canvas to the new one\n\n    context.drawImage(htmlElement, 0, 0); //return the new canvas\n\n    return newCanvas;\n  }\n\n  function drawCanvasFrame() {\n    if (isPausedRecording) {\n      lastTime = new Date().getTime();\n      return setTimeout(drawCanvasFrame, 500);\n    }\n\n    if (htmlElement.nodeName.toLowerCase() === 'canvas') {\n      var duration = new Date().getTime() - lastTime; // via #206, by Jack i.e. @Seymourr\n\n      lastTime = new Date().getTime();\n      whammy.frames.push({\n        image: cloneCanvas(),\n        duration: duration\n      });\n\n      if (isRecording) {\n        setTimeout(drawCanvasFrame, config.frameInterval);\n      }\n\n      return;\n    }\n\n    html2canvas(htmlElement, {\n      grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\n      onrendered: function (canvas) {\n        var duration = new Date().getTime() - lastTime;\n\n        if (!duration) {\n          return setTimeout(drawCanvasFrame, config.frameInterval);\n        } // via #206, by Jack i.e. @Seymourr\n\n\n        lastTime = new Date().getTime();\n        whammy.frames.push({\n          image: canvas.toDataURL('image/webp', 1),\n          duration: duration\n        });\n\n        if (isRecording) {\n          setTimeout(drawCanvasFrame, config.frameInterval);\n        }\n      }\n    });\n  }\n\n  var lastTime = new Date().getTime();\n  var whammy = new Whammy.Video(100);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.CanvasRecorder = CanvasRecorder;\n} // _________________\n// WhammyRecorder.js\n\n/**\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\n * @summary Video recording feature in Chrome.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef WhammyRecorder\n * @class\n * @example\n * var recorder = new WhammyRecorder(mediaStream);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\n */\n\n\nfunction WhammyRecorder(mediaStream, config) {\n  config = config || {};\n\n  if (!config.frameInterval) {\n    config.frameInterval = 10;\n  }\n\n  if (!config.disableLogs) {\n    console.log('Using frames-interval:', config.frameInterval);\n  }\n  /**\n   * This method records video.\n   * @method\n   * @memberof WhammyRecorder\n   * @example\n   * recorder.record();\n   */\n\n\n  this.record = function () {\n    if (!config.width) {\n      config.width = 320;\n    }\n\n    if (!config.height) {\n      config.height = 240;\n    }\n\n    if (!config.video) {\n      config.video = {\n        width: config.width,\n        height: config.height\n      };\n    }\n\n    if (!config.canvas) {\n      config.canvas = {\n        width: config.width,\n        height: config.height\n      };\n    }\n\n    canvas.width = config.canvas.width || 320;\n    canvas.height = config.canvas.height || 240;\n    context = canvas.getContext('2d'); // setting defaults\n\n    if (config.video && config.video instanceof HTMLVideoElement) {\n      video = config.video.cloneNode();\n\n      if (config.initCallback) {\n        config.initCallback();\n      }\n    } else {\n      video = document.createElement('video');\n      setSrcObject(mediaStream, video);\n\n      video.onloadedmetadata = function () {\n        // \"onloadedmetadata\" may NOT work in FF?\n        if (config.initCallback) {\n          config.initCallback();\n        }\n      };\n\n      video.width = config.video.width;\n      video.height = config.video.height;\n    }\n\n    video.muted = true;\n    video.play();\n    lastTime = new Date().getTime();\n    whammy = new Whammy.Video();\n\n    if (!config.disableLogs) {\n      console.log('canvas resolutions', canvas.width, '*', canvas.height);\n      console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\n    }\n\n    drawFrames(config.frameInterval);\n  };\n  /**\n   * Draw and push frames to Whammy\n   * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\n   */\n\n\n  function drawFrames(frameInterval) {\n    frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\n    var duration = new Date().getTime() - lastTime;\n\n    if (!duration) {\n      return setTimeout(drawFrames, frameInterval, frameInterval);\n    }\n\n    if (isPausedRecording) {\n      lastTime = new Date().getTime();\n      return setTimeout(drawFrames, 100);\n    } // via #206, by Jack i.e. @Seymourr\n\n\n    lastTime = new Date().getTime();\n\n    if (video.paused) {\n      // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n      // Tweak for Android Chrome\n      video.play();\n    }\n\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    whammy.frames.push({\n      duration: duration,\n      image: canvas.toDataURL('image/webp')\n    });\n\n    if (!isStopDrawing) {\n      setTimeout(drawFrames, frameInterval, frameInterval);\n    }\n  }\n\n  function asyncLoop(o) {\n    var i = -1,\n        length = o.length;\n    (function () {\n      function loop() {\n        i++;\n\n        if (i === length) {\n          o.callback();\n          return;\n        } // \"setTimeout\" added by Jim McLeod\n\n\n        setTimeout(function () {\n          o.functionToLoop(loop, i);\n        }, 1);\n      }\n\n      return loop;\n    })()();\n  }\n  /**\n   * remove black frames from the beginning to the specified frame\n   * @param {Array} _frames - array of frames to be checked\n   * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\n   * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\n   * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\n   * @returns {Array} - array of frames\n   */\n  // pull#293 by @volodalexey\n\n\n  function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\n    var localCanvas = document.createElement('canvas');\n    localCanvas.width = canvas.width;\n    localCanvas.height = canvas.height;\n    var context2d = localCanvas.getContext('2d');\n    var resultFrames = [];\n    var checkUntilNotBlack = _framesToCheck === -1;\n    var endCheckFrame = _framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length ? _framesToCheck : _frames.length;\n    var sampleColor = {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n    var maxColorDifference = Math.sqrt(Math.pow(255, 2) + Math.pow(255, 2) + Math.pow(255, 2));\n    var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n    var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n    var doNotCheckNext = false;\n    asyncLoop({\n      length: endCheckFrame,\n      functionToLoop: function (loop, f) {\n        var matchPixCount, endPixCheck, maxPixCount;\n\n        var finishImage = function () {\n          if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {// console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\n          } else {\n            // console.log('frame is passed : ' + f);\n            if (checkUntilNotBlack) {\n              doNotCheckNext = true;\n            }\n\n            resultFrames.push(_frames[f]);\n          }\n\n          loop();\n        };\n\n        if (!doNotCheckNext) {\n          var image = new Image();\n\n          image.onload = function () {\n            context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n            var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n            matchPixCount = 0;\n            endPixCheck = imageData.data.length;\n            maxPixCount = imageData.data.length / 4;\n\n            for (var pix = 0; pix < endPixCheck; pix += 4) {\n              var currentColor = {\n                r: imageData.data[pix],\n                g: imageData.data[pix + 1],\n                b: imageData.data[pix + 2]\n              };\n              var colorDifference = Math.sqrt(Math.pow(currentColor.r - sampleColor.r, 2) + Math.pow(currentColor.g - sampleColor.g, 2) + Math.pow(currentColor.b - sampleColor.b, 2)); // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n\n              if (colorDifference <= maxColorDifference * pixTolerance) {\n                matchPixCount++;\n              }\n            }\n\n            finishImage();\n          };\n\n          image.src = _frames[f].image;\n        } else {\n          finishImage();\n        }\n      },\n      callback: function () {\n        resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\n\n        if (resultFrames.length <= 0) {\n          // at least one last frame should be available for next manipulation\n          // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\n          resultFrames.push(_frames[_frames.length - 1]);\n        }\n\n        callback(resultFrames);\n      }\n    });\n  }\n\n  var isStopDrawing = false;\n  /**\n   * This method stops recording video.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof WhammyRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n  this.stop = function (callback) {\n    callback = callback || function () {};\n\n    isStopDrawing = true;\n\n    var _this = this; // analyse of all frames takes some time!\n\n\n    setTimeout(function () {\n      // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\n      // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\n      // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\n      dropBlackFrames(whammy.frames, -1, null, null, function (frames) {\n        whammy.frames = frames; // to display advertisement images!\n\n        if (config.advertisement && config.advertisement.length) {\n          whammy.frames = config.advertisement.concat(whammy.frames);\n        }\n        /**\n         * @property {Blob} blob - Recorded frames in video/webm blob.\n         * @memberof WhammyRecorder\n         * @example\n         * recorder.stop(function() {\n         *     var blob = recorder.blob;\n         * });\n         */\n\n\n        whammy.compile(function (blob) {\n          _this.blob = blob;\n\n          if (_this.blob.forEach) {\n            _this.blob = new Blob([], {\n              type: 'video/webm'\n            });\n          }\n\n          if (callback) {\n            callback(_this.blob);\n          }\n        });\n      });\n    }, 10);\n  };\n\n  var isPausedRecording = false;\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof WhammyRecorder\n   * @example\n   * recorder.pause();\n   */\n\n  this.pause = function () {\n    isPausedRecording = true;\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof WhammyRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    isPausedRecording = false;\n\n    if (isStopDrawing) {\n      this.record();\n    }\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof WhammyRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    if (!isStopDrawing) {\n      this.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    whammy.frames = [];\n    isStopDrawing = true;\n    isPausedRecording = false;\n  } // for debugging\n\n\n  this.name = 'WhammyRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var video;\n  var lastTime;\n  var whammy;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.WhammyRecorder = WhammyRecorder;\n} // https://github.com/antimatter15/whammy/blob/master/LICENSE\n// _________\n// Whammy.js\n// todo: Firefox now supports webp for webm containers!\n// their MediaRecorder implementation works well!\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\n\n/**\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\n * @summary A real time javascript webm encoder based on a canvas hack.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef Whammy\n * @class\n * @example\n * var recorder = new Whammy().Video(15);\n * recorder.add(context || canvas || dataURL);\n * var output = recorder.compile();\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nvar Whammy = function () {\n  // a more abstract-ish API\n  function WhammyVideo(duration) {\n    this.frames = [];\n    this.duration = duration || 1;\n    this.quality = 0.8;\n  }\n  /**\n   * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\n   * @method\n   * @memberof Whammy\n   * @example\n   * recorder = new Whammy().Video(0.8, 100);\n   * recorder.add(canvas || context || 'image/webp');\n   * @param {string} frame - Canvas || Context || image/webp\n   * @param {number} duration - Stick a duration (in milliseconds)\n   */\n\n\n  WhammyVideo.prototype.add = function (frame, duration) {\n    if ('canvas' in frame) {\n      //CanvasRenderingContext2D\n      frame = frame.canvas;\n    }\n\n    if ('toDataURL' in frame) {\n      frame = frame.toDataURL('image/webp', this.quality);\n    }\n\n    if (!/^data:image\\/webp;base64,/ig.test(frame)) {\n      throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\n    }\n\n    this.frames.push({\n      image: frame,\n      duration: duration || this.duration\n    });\n  };\n\n  function processInWebWorker(_function) {\n    var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n      type: 'application/javascript'\n    }));\n    var worker = new Worker(blob);\n    URL.revokeObjectURL(blob);\n    return worker;\n  }\n\n  function whammyInWebWorker(frames) {\n    function ArrayToWebM(frames) {\n      var info = checkFrames(frames);\n\n      if (!info) {\n        return [];\n      }\n\n      var clusterMaxDuration = 30000;\n      var EBML = [{\n        'id': 0x1a45dfa3,\n        // EBML\n        'data': [{\n          'data': 1,\n          'id': 0x4286 // EBMLVersion\n\n        }, {\n          'data': 1,\n          'id': 0x42f7 // EBMLReadVersion\n\n        }, {\n          'data': 4,\n          'id': 0x42f2 // EBMLMaxIDLength\n\n        }, {\n          'data': 8,\n          'id': 0x42f3 // EBMLMaxSizeLength\n\n        }, {\n          'data': 'webm',\n          'id': 0x4282 // DocType\n\n        }, {\n          'data': 2,\n          'id': 0x4287 // DocTypeVersion\n\n        }, {\n          'data': 2,\n          'id': 0x4285 // DocTypeReadVersion\n\n        }]\n      }, {\n        'id': 0x18538067,\n        // Segment\n        'data': [{\n          'id': 0x1549a966,\n          // Info\n          'data': [{\n            'data': 1e6,\n            //do things in millisecs (num of nanosecs for duration scale)\n            'id': 0x2ad7b1 // TimecodeScale\n\n          }, {\n            'data': 'whammy',\n            'id': 0x4d80 // MuxingApp\n\n          }, {\n            'data': 'whammy',\n            'id': 0x5741 // WritingApp\n\n          }, {\n            'data': doubleToString(info.duration),\n            'id': 0x4489 // Duration\n\n          }]\n        }, {\n          'id': 0x1654ae6b,\n          // Tracks\n          'data': [{\n            'id': 0xae,\n            // TrackEntry\n            'data': [{\n              'data': 1,\n              'id': 0xd7 // TrackNumber\n\n            }, {\n              'data': 1,\n              'id': 0x73c5 // TrackUID\n\n            }, {\n              'data': 0,\n              'id': 0x9c // FlagLacing\n\n            }, {\n              'data': 'und',\n              'id': 0x22b59c // Language\n\n            }, {\n              'data': 'V_VP8',\n              'id': 0x86 // CodecID\n\n            }, {\n              'data': 'VP8',\n              'id': 0x258688 // CodecName\n\n            }, {\n              'data': 1,\n              'id': 0x83 // TrackType\n\n            }, {\n              'id': 0xe0,\n              // Video\n              'data': [{\n                'data': info.width,\n                'id': 0xb0 // PixelWidth\n\n              }, {\n                'data': info.height,\n                'id': 0xba // PixelHeight\n\n              }]\n            }]\n          }]\n        }]\n      }]; //Generate clusters (max duration)\n\n      var frameNumber = 0;\n      var clusterTimecode = 0;\n\n      while (frameNumber < frames.length) {\n        var clusterFrames = [];\n        var clusterDuration = 0;\n\n        do {\n          clusterFrames.push(frames[frameNumber]);\n          clusterDuration += frames[frameNumber].duration;\n          frameNumber++;\n        } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\n\n        var clusterCounter = 0;\n        var cluster = {\n          'id': 0x1f43b675,\n          // Cluster\n          'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\n        }; //Add cluster to segment\n\n        EBML[1].data.push(cluster);\n        clusterTimecode += clusterDuration;\n      }\n\n      return generateEBML(EBML);\n    }\n\n    function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\n      return [{\n        'data': clusterTimecode,\n        'id': 0xe7 // Timecode\n\n      }].concat(clusterFrames.map(function (webp) {\n        var block = makeSimpleBlock({\n          discardable: 0,\n          frame: webp.data.slice(4),\n          invisible: 0,\n          keyframe: 1,\n          lacing: 0,\n          trackNum: 1,\n          timecode: Math.round(clusterCounter)\n        });\n        clusterCounter += webp.duration;\n        return {\n          data: block,\n          id: 0xa3\n        };\n      }));\n    } // sums the lengths of all the frames and gets the duration\n\n\n    function checkFrames(frames) {\n      if (!frames[0]) {\n        postMessage({\n          error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\n        });\n        return;\n      }\n\n      var width = frames[0].width,\n          height = frames[0].height,\n          duration = frames[0].duration;\n\n      for (var i = 1; i < frames.length; i++) {\n        duration += frames[i].duration;\n      }\n\n      return {\n        duration: duration,\n        width: width,\n        height: height\n      };\n    }\n\n    function numToBuffer(num) {\n      var parts = [];\n\n      while (num > 0) {\n        parts.push(num & 0xff);\n        num = num >> 8;\n      }\n\n      return new Uint8Array(parts.reverse());\n    }\n\n    function strToBuffer(str) {\n      return new Uint8Array(str.split('').map(function (e) {\n        return e.charCodeAt(0);\n      }));\n    }\n\n    function bitsToBuffer(bits) {\n      var data = [];\n      var pad = bits.length % 8 ? new Array(1 + 8 - bits.length % 8).join('0') : '';\n      bits = pad + bits;\n\n      for (var i = 0; i < bits.length; i += 8) {\n        data.push(parseInt(bits.substr(i, 8), 2));\n      }\n\n      return new Uint8Array(data);\n    }\n\n    function generateEBML(json) {\n      var ebml = [];\n\n      for (var i = 0; i < json.length; i++) {\n        var data = json[i].data;\n\n        if ((0, _typeof2.default)(data) === 'object') {\n          data = generateEBML(data);\n        }\n\n        if (typeof data === 'number') {\n          data = bitsToBuffer(data.toString(2));\n        }\n\n        if (typeof data === 'string') {\n          data = strToBuffer(data);\n        }\n\n        var len = data.size || data.byteLength || data.length;\n        var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\n        var sizeToString = len.toString(2);\n        var padded = new Array(zeroes * 7 + 7 + 1 - sizeToString.length).join('0') + sizeToString;\n        var size = new Array(zeroes).join('0') + '1' + padded;\n        ebml.push(numToBuffer(json[i].id));\n        ebml.push(bitsToBuffer(size));\n        ebml.push(data);\n      }\n\n      return new Blob(ebml, {\n        type: 'video/webm'\n      });\n    }\n\n    function toBinStrOld(bits) {\n      var data = '';\n      var pad = bits.length % 8 ? new Array(1 + 8 - bits.length % 8).join('0') : '';\n      bits = pad + bits;\n\n      for (var i = 0; i < bits.length; i += 8) {\n        data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\n      }\n\n      return data;\n    }\n\n    function makeSimpleBlock(data) {\n      var flags = 0;\n\n      if (data.keyframe) {\n        flags |= 128;\n      }\n\n      if (data.invisible) {\n        flags |= 8;\n      }\n\n      if (data.lacing) {\n        flags |= data.lacing << 1;\n      }\n\n      if (data.discardable) {\n        flags |= 1;\n      }\n\n      if (data.trackNum > 127) {\n        throw 'TrackNumber > 127 not supported';\n      }\n\n      var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function (e) {\n        return String.fromCharCode(e);\n      }).join('') + data.frame;\n      return out;\n    }\n\n    function parseWebP(riff) {\n      var VP8 = riff.RIFF[0].WEBP[0];\n      var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\n\n      for (var i = 0, c = []; i < 4; i++) {\n        c[i] = VP8.charCodeAt(frameStart + 3 + i);\n      }\n\n      var width, height, tmp; //the code below is literally copied verbatim from the bitstream spec\n\n      tmp = c[1] << 8 | c[0];\n      width = tmp & 0x3FFF;\n      tmp = c[3] << 8 | c[2];\n      height = tmp & 0x3FFF;\n      return {\n        width: width,\n        height: height,\n        data: VP8,\n        riff: riff\n      };\n    }\n\n    function getStrLength(string, offset) {\n      return parseInt(string.substr(offset + 4, 4).split('').map(function (i) {\n        var unpadded = i.charCodeAt(0).toString(2);\n        return new Array(8 - unpadded.length + 1).join('0') + unpadded;\n      }).join(''), 2);\n    }\n\n    function parseRIFF(string) {\n      var offset = 0;\n      var chunks = {};\n\n      while (offset < string.length) {\n        var id = string.substr(offset, 4);\n        var len = getStrLength(string, offset);\n        var data = string.substr(offset + 4 + 4, len);\n        offset += 4 + 4 + len;\n        chunks[id] = chunks[id] || [];\n\n        if (id === 'RIFF' || id === 'LIST') {\n          chunks[id].push(parseRIFF(data));\n        } else {\n          chunks[id].push(data);\n        }\n      }\n\n      return chunks;\n    }\n\n    function doubleToString(num) {\n      return [].slice.call(new Uint8Array(new Float64Array([num]).buffer), 0).map(function (e) {\n        return String.fromCharCode(e);\n      }).reverse().join('');\n    }\n\n    var webm = new ArrayToWebM(frames.map(function (frame) {\n      var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\n      webp.duration = frame.duration;\n      return webp;\n    }));\n    postMessage(webm);\n  }\n  /**\n   * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof Whammy\n   * @example\n   * recorder = new Whammy().Video(0.8, 100);\n   * recorder.compile(function(blob) {\n   *    // blob.size - blob.type\n   * });\n   */\n\n\n  WhammyVideo.prototype.compile = function (callback) {\n    var webWorker = processInWebWorker(whammyInWebWorker);\n\n    webWorker.onmessage = function (event) {\n      if (event.data.error) {\n        console.error(event.data.error);\n        return;\n      }\n\n      callback(event.data);\n    };\n\n    webWorker.postMessage(this.frames);\n  };\n\n  return {\n    /**\n     * A more abstract-ish API.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * @param {?number} speed - 0.8\n     * @param {?number} quality - 100\n     */\n    Video: WhammyVideo\n  };\n}();\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.Whammy = Whammy;\n} // ______________ (indexed-db)\n// DiskStorage.js\n\n/**\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\n * @summary Writing blobs into IndexedDB.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * DiskStorage.Store({\n *     audioBlob: yourAudioBlob,\n *     videoBlob: yourVideoBlob,\n *     gifBlob  : yourGifBlob\n * });\n * DiskStorage.Fetch(function(dataURL, type) {\n *     if(type === 'audioBlob') { }\n *     if(type === 'videoBlob') { }\n *     if(type === 'gifBlob')   { }\n * });\n * // DiskStorage.dataStoreName = 'recordRTC';\n * // DiskStorage.onError = function(error) { };\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\n * @property {function} Store - This method stores blobs in IndexedDB.\n * @property {function} onError - This function is invoked for any known/unknown error.\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nvar DiskStorage = {\n  /**\n   * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n   * @method\n   * @memberof DiskStorage\n   * @internal\n   * @example\n   * DiskStorage.init();\n   */\n  init: function () {\n    var self = this;\n\n    if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\n      console.error('IndexedDB API are not available in this browser.');\n      return;\n    }\n\n    var dbVersion = 1;\n    var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\n        db;\n    var request = indexedDB.open(dbName, dbVersion);\n\n    function createObjectStore(dataBase) {\n      dataBase.createObjectStore(self.dataStoreName);\n    }\n\n    function putInDB() {\n      var transaction = db.transaction([self.dataStoreName], 'readwrite');\n\n      if (self.videoBlob) {\n        transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\n      }\n\n      if (self.gifBlob) {\n        transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\n      }\n\n      if (self.audioBlob) {\n        transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\n      }\n\n      function getFromStore(portionName) {\n        transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function (event) {\n          if (self.callback) {\n            self.callback(event.target.result, portionName);\n          }\n        };\n      }\n\n      getFromStore('audioBlob');\n      getFromStore('videoBlob');\n      getFromStore('gifBlob');\n    }\n\n    request.onerror = self.onError;\n\n    request.onsuccess = function () {\n      db = request.result;\n      db.onerror = self.onError;\n\n      if (db.setVersion) {\n        if (db.version !== dbVersion) {\n          var setVersion = db.setVersion(dbVersion);\n\n          setVersion.onsuccess = function () {\n            createObjectStore(db);\n            putInDB();\n          };\n        } else {\n          putInDB();\n        }\n      } else {\n        putInDB();\n      }\n    };\n\n    request.onupgradeneeded = function (event) {\n      createObjectStore(event.target.result);\n    };\n  },\n\n  /**\n   * This method fetches stored blobs from IndexedDB.\n   * @method\n   * @memberof DiskStorage\n   * @internal\n   * @example\n   * DiskStorage.Fetch(function(dataURL, type) {\n   *     if(type === 'audioBlob') { }\n   *     if(type === 'videoBlob') { }\n   *     if(type === 'gifBlob')   { }\n   * });\n   */\n  Fetch: function (callback) {\n    this.callback = callback;\n    this.init();\n    return this;\n  },\n\n  /**\n   * This method stores blobs in IndexedDB.\n   * @method\n   * @memberof DiskStorage\n   * @internal\n   * @example\n   * DiskStorage.Store({\n   *     audioBlob: yourAudioBlob,\n   *     videoBlob: yourVideoBlob,\n   *     gifBlob  : yourGifBlob\n   * });\n   */\n  Store: function (config) {\n    this.audioBlob = config.audioBlob;\n    this.videoBlob = config.videoBlob;\n    this.gifBlob = config.gifBlob;\n    this.init();\n    return this;\n  },\n\n  /**\n   * This function is invoked for any known/unknown error.\n   * @method\n   * @memberof DiskStorage\n   * @internal\n   * @example\n   * DiskStorage.onError = function(error){\n   *     alerot( JSON.stringify(error) );\n   * };\n   */\n  onError: function (error) {\n    console.error(JSON.stringify(error, null, '\\t'));\n  },\n\n  /**\n   * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n   * @memberof DiskStorage\n   * @internal\n   * @example\n   * DiskStorage.dataStoreName = 'recordRTC';\n   */\n  dataStoreName: 'recordRTC',\n  dbName: null\n};\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.DiskStorage = DiskStorage;\n} // ______________\n// GifRecorder.js\n\n/**\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GifRecorder\n * @class\n * @example\n * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     img.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\n */\n\n\nfunction GifRecorder(mediaStream, config) {\n  if (typeof GIFEncoder === 'undefined') {\n    var script = document.createElement('script');\n    script.src = 'https://cdn.webrtc-experiment.com/gif-recorder.js';\n    (document.body || document.documentElement).appendChild(script);\n  }\n\n  config = config || {};\n  var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\n  /**\n   * This method records MediaStream.\n   * @method\n   * @memberof GifRecorder\n   * @example\n   * recorder.record();\n   */\n\n  this.record = function () {\n    if (typeof GIFEncoder === 'undefined') {\n      setTimeout(self.record, 1000);\n      return;\n    }\n\n    if (!isLoadedMetaData) {\n      setTimeout(self.record, 1000);\n      return;\n    }\n\n    if (!isHTMLObject) {\n      if (!config.width) {\n        config.width = video.offsetWidth || 320;\n      }\n\n      if (!config.height) {\n        config.height = video.offsetHeight || 240;\n      }\n\n      if (!config.video) {\n        config.video = {\n          width: config.width,\n          height: config.height\n        };\n      }\n\n      if (!config.canvas) {\n        config.canvas = {\n          width: config.width,\n          height: config.height\n        };\n      }\n\n      canvas.width = config.canvas.width || 320;\n      canvas.height = config.canvas.height || 240;\n      video.width = config.video.width || 320;\n      video.height = config.video.height || 240;\n    } // external library to record as GIF images\n\n\n    gifEncoder = new GIFEncoder(); // void setRepeat(int iter)\n    // Sets the number of times the set of GIF frames should be played.\n    // Default is 1; 0 means play indefinitely.\n\n    gifEncoder.setRepeat(0); // void setFrameRate(Number fps)\n    // Sets frame rate in frames per second.\n    // Equivalent to setDelay(1000/fps).\n    // Using \"setDelay\" instead of \"setFrameRate\"\n\n    gifEncoder.setDelay(config.frameRate || 200); // void setQuality(int quality)\n    // Sets quality of color quantization (conversion of images to the\n    // maximum 256 colors allowed by the GIF specification).\n    // Lower values (minimum = 1) produce better colors,\n    // but slow processing significantly. 10 is the default,\n    // and produces good color mapping at reasonable speeds.\n    // Values greater than 20 do not yield significant improvements in speed.\n\n    gifEncoder.setQuality(config.quality || 10); // Boolean start()\n    // This writes the GIF Header and returns false if it fails.\n\n    gifEncoder.start();\n\n    if (typeof config.onGifRecordingStarted === 'function') {\n      config.onGifRecordingStarted();\n    }\n\n    startTime = Date.now();\n\n    function drawVideoFrame(time) {\n      if (self.clearedRecordedData === true) {\n        return;\n      }\n\n      if (isPausedRecording) {\n        return setTimeout(function () {\n          drawVideoFrame(time);\n        }, 100);\n      }\n\n      lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n      if ((0, _typeof2.default)(lastFrameTime) === undefined) {\n        lastFrameTime = time;\n      } // ~10 fps\n\n\n      if (time - lastFrameTime < 90) {\n        return;\n      }\n\n      if (!isHTMLObject && video.paused) {\n        // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n        // Tweak for Android Chrome\n        video.play();\n      }\n\n      if (!isHTMLObject) {\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n      }\n\n      if (config.onGifPreview) {\n        config.onGifPreview(canvas.toDataURL('image/png'));\n      }\n\n      gifEncoder.addFrame(context);\n      lastFrameTime = time;\n    }\n\n    lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n    if (config.initCallback) {\n      config.initCallback();\n    }\n  };\n  /**\n   * This method stops recording MediaStream.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof GifRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     img.src = URL.createObjectURL(blob);\n   * });\n   */\n\n\n  this.stop = function (callback) {\n    callback = callback || function () {};\n\n    if (lastAnimationFrame) {\n      cancelAnimationFrame(lastAnimationFrame);\n    }\n\n    endTime = Date.now();\n    /**\n     * @property {Blob} blob - The recorded blob object.\n     * @memberof GifRecorder\n     * @example\n     * recorder.stop(function(){\n     *     var blob = recorder.blob;\n     * });\n     */\n\n    this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\n      type: 'image/gif'\n    });\n    callback(this.blob); // bug: find a way to clear old recorded blobs\n\n    gifEncoder.stream().bin = [];\n  };\n\n  var isPausedRecording = false;\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof GifRecorder\n   * @example\n   * recorder.pause();\n   */\n\n  this.pause = function () {\n    isPausedRecording = true;\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof GifRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    isPausedRecording = false;\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof GifRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    self.clearedRecordedData = true;\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    if (gifEncoder) {\n      gifEncoder.stream().bin = [];\n    }\n  } // for debugging\n\n\n  this.name = 'GifRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n\n  if (isHTMLObject) {\n    if (mediaStream instanceof CanvasRenderingContext2D) {\n      context = mediaStream;\n      canvas = context.canvas;\n    } else if (mediaStream instanceof HTMLCanvasElement) {\n      context = mediaStream.getContext('2d');\n      canvas = mediaStream;\n    }\n  }\n\n  var isLoadedMetaData = true;\n\n  if (!isHTMLObject) {\n    var video = document.createElement('video');\n    video.muted = true;\n    video.autoplay = true;\n    isLoadedMetaData = false;\n\n    video.onloadedmetadata = function () {\n      isLoadedMetaData = true;\n    };\n\n    setSrcObject(mediaStream, video);\n    video.play();\n  }\n\n  var lastAnimationFrame = null;\n  var startTime, endTime, lastFrameTime;\n  var gifEncoder;\n  var self = this;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.GifRecorder = GifRecorder;\n} // Last time updated: 2018-12-22 9:13:29 AM UTC\n// ________________________\n// MultiStreamsMixer v1.0.7\n// Open-Sourced: https://github.com/muaz-khan/MultiStreamsMixer\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\n\nfunction MultiStreamsMixer(arrayOfMediaStreams) {\n  // requires: chrome://flags/#enable-experimental-web-platform-features\n  var videos = [];\n  var isStopDrawingFrames = false;\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  canvas.style = 'opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;';\n  (document.body || document.documentElement).appendChild(canvas);\n  this.disableLogs = false;\n  this.frameInterval = 10;\n  this.width = 360;\n  this.height = 240; // use gain node to prevent echo\n\n  this.useGainNode = true;\n  var self = this; // _____________________________\n  // Cross-Browser-Declarations.js\n  // WebAudio API representer\n\n  var AudioContext = window.AudioContext;\n\n  if (typeof AudioContext === 'undefined') {\n    if (typeof webkitAudioContext !== 'undefined') {\n      /*global AudioContext:true */\n      AudioContext = webkitAudioContext;\n    }\n\n    if (typeof mozAudioContext !== 'undefined') {\n      /*global AudioContext:true */\n      AudioContext = mozAudioContext;\n    }\n  }\n  /*jshint -W079 */\n\n\n  var URL = window.URL;\n\n  if (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n    /*global URL:true */\n    URL = webkitURL;\n  }\n\n  if (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') {\n    // maybe window.navigator?\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n      navigator.getUserMedia = navigator.webkitGetUserMedia;\n    }\n\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\n      navigator.getUserMedia = navigator.mozGetUserMedia;\n    }\n  }\n\n  var MediaStream = window.MediaStream;\n\n  if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n    MediaStream = webkitMediaStream;\n  }\n  /*global MediaStream:true */\n\n\n  if (typeof MediaStream !== 'undefined') {\n    // override \"stop\" method for all browsers\n    if (typeof MediaStream.prototype.stop === 'undefined') {\n      MediaStream.prototype.stop = function () {\n        this.getTracks().forEach(function (track) {\n          track.stop();\n        });\n      };\n    }\n  }\n\n  var Storage = {};\n\n  if (typeof AudioContext !== 'undefined') {\n    Storage.AudioContext = AudioContext;\n  } else if (typeof webkitAudioContext !== 'undefined') {\n    Storage.AudioContext = webkitAudioContext;\n  }\n\n  function setSrcObject(stream, element) {\n    if ('srcObject' in element) {\n      element.srcObject = stream;\n    } else if ('mozSrcObject' in element) {\n      element.mozSrcObject = stream;\n    } else {\n      element.srcObject = stream;\n    }\n  }\n\n  this.startDrawingFrames = function () {\n    drawVideosToCanvas();\n  };\n\n  function drawVideosToCanvas() {\n    if (isStopDrawingFrames) {\n      return;\n    }\n\n    var videosLength = videos.length;\n    var fullcanvas = false;\n    var remaining = [];\n    videos.forEach(function (video) {\n      if (!video.stream) {\n        video.stream = {};\n      }\n\n      if (video.stream.fullcanvas) {\n        fullcanvas = video;\n      } else {\n        remaining.push(video);\n      }\n    });\n\n    if (fullcanvas) {\n      canvas.width = fullcanvas.stream.width;\n      canvas.height = fullcanvas.stream.height;\n    } else if (remaining.length) {\n      canvas.width = videosLength > 1 ? remaining[0].width * 2 : remaining[0].width;\n      var height = 1;\n\n      if (videosLength === 3 || videosLength === 4) {\n        height = 2;\n      }\n\n      if (videosLength === 5 || videosLength === 6) {\n        height = 3;\n      }\n\n      if (videosLength === 7 || videosLength === 8) {\n        height = 4;\n      }\n\n      if (videosLength === 9 || videosLength === 10) {\n        height = 5;\n      }\n\n      canvas.height = remaining[0].height * height;\n    } else {\n      canvas.width = self.width || 360;\n      canvas.height = self.height || 240;\n    }\n\n    if (fullcanvas && fullcanvas instanceof HTMLVideoElement) {\n      drawImage(fullcanvas);\n    }\n\n    remaining.forEach(function (video, idx) {\n      drawImage(video, idx);\n    });\n    setTimeout(drawVideosToCanvas, self.frameInterval);\n  }\n\n  function drawImage(video, idx) {\n    if (isStopDrawingFrames) {\n      return;\n    }\n\n    var x = 0;\n    var y = 0;\n    var width = video.width;\n    var height = video.height;\n\n    if (idx === 1) {\n      x = video.width;\n    }\n\n    if (idx === 2) {\n      y = video.height;\n    }\n\n    if (idx === 3) {\n      x = video.width;\n      y = video.height;\n    }\n\n    if (idx === 4) {\n      y = video.height * 2;\n    }\n\n    if (idx === 5) {\n      x = video.width;\n      y = video.height * 2;\n    }\n\n    if (idx === 6) {\n      y = video.height * 3;\n    }\n\n    if (idx === 7) {\n      x = video.width;\n      y = video.height * 3;\n    }\n\n    if (typeof video.stream.left !== 'undefined') {\n      x = video.stream.left;\n    }\n\n    if (typeof video.stream.top !== 'undefined') {\n      y = video.stream.top;\n    }\n\n    if (typeof video.stream.width !== 'undefined') {\n      width = video.stream.width;\n    }\n\n    if (typeof video.stream.height !== 'undefined') {\n      height = video.stream.height;\n    }\n\n    context.drawImage(video, x, y, width, height);\n\n    if (typeof video.stream.onRender === 'function') {\n      video.stream.onRender(context, x, y, width, height, idx);\n    }\n  }\n\n  function getMixedStream() {\n    isStopDrawingFrames = false;\n    var mixedVideoStream = getMixedVideoStream();\n    var mixedAudioStream = getMixedAudioStream();\n\n    if (mixedAudioStream) {\n      mixedAudioStream.getTracks().filter(function (t) {\n        return t.kind === 'audio';\n      }).forEach(function (track) {\n        mixedVideoStream.addTrack(track);\n      });\n    }\n\n    var fullcanvas;\n    arrayOfMediaStreams.forEach(function (stream) {\n      if (stream.fullcanvas) {\n        fullcanvas = true;\n      }\n    });\n    return mixedVideoStream;\n  }\n\n  function getMixedVideoStream() {\n    resetVideoStreams();\n    var capturedStream;\n\n    if ('captureStream' in canvas) {\n      capturedStream = canvas.captureStream();\n    } else if ('mozCaptureStream' in canvas) {\n      capturedStream = canvas.mozCaptureStream();\n    } else if (!self.disableLogs) {\n      console.error('Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features');\n    }\n\n    var videoStream = new MediaStream();\n    capturedStream.getTracks().filter(function (t) {\n      return t.kind === 'video';\n    }).forEach(function (track) {\n      videoStream.addTrack(track);\n    });\n    canvas.stream = videoStream;\n    return videoStream;\n  }\n\n  function getMixedAudioStream() {\n    // via: @pehrsons\n    if (!Storage.AudioContextConstructor) {\n      Storage.AudioContextConstructor = new Storage.AudioContext();\n    }\n\n    self.audioContext = Storage.AudioContextConstructor;\n    self.audioSources = [];\n\n    if (self.useGainNode === true) {\n      self.gainNode = self.audioContext.createGain();\n      self.gainNode.connect(self.audioContext.destination);\n      self.gainNode.gain.value = 0; // don't hear self\n    }\n\n    var audioTracksLength = 0;\n    arrayOfMediaStreams.forEach(function (stream) {\n      if (!stream.getTracks().filter(function (t) {\n        return t.kind === 'audio';\n      }).length) {\n        return;\n      }\n\n      audioTracksLength++;\n      var audioSource = self.audioContext.createMediaStreamSource(stream);\n\n      if (self.useGainNode === true) {\n        audioSource.connect(self.gainNode);\n      }\n\n      self.audioSources.push(audioSource);\n    });\n\n    if (!audioTracksLength) {\n      return;\n    }\n\n    self.audioDestination = self.audioContext.createMediaStreamDestination();\n    self.audioSources.forEach(function (audioSource) {\n      audioSource.connect(self.audioDestination);\n    });\n    return self.audioDestination.stream;\n  }\n\n  function getVideo(stream) {\n    var video = document.createElement('video');\n    setSrcObject(stream, video);\n    video.muted = true;\n    video.volume = 0;\n    video.width = stream.width || self.width || 360;\n    video.height = stream.height || self.height || 240;\n    video.play();\n    return video;\n  }\n\n  this.appendStreams = function (streams) {\n    if (!streams) {\n      throw 'First parameter is required.';\n    }\n\n    if (!(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    arrayOfMediaStreams.concat(streams);\n    streams.forEach(function (stream) {\n      if (stream.getTracks().filter(function (t) {\n        return t.kind === 'video';\n      }).length) {\n        var video = getVideo(stream);\n        video.stream = stream;\n        videos.push(video);\n      }\n\n      if (stream.getTracks().filter(function (t) {\n        return t.kind === 'audio';\n      }).length && self.audioContext) {\n        var audioSource = self.audioContext.createMediaStreamSource(stream);\n        audioSource.connect(self.audioDestination);\n        self.audioSources.push(audioSource);\n      }\n    });\n  };\n\n  this.releaseStreams = function () {\n    videos = [];\n    isStopDrawingFrames = true;\n\n    if (self.gainNode) {\n      self.gainNode.disconnect();\n      self.gainNode = null;\n    }\n\n    if (self.audioSources.length) {\n      self.audioSources.forEach(function (source) {\n        source.disconnect();\n      });\n      self.audioSources = [];\n    }\n\n    if (self.audioDestination) {\n      self.audioDestination.disconnect();\n      self.audioDestination = null;\n    }\n\n    if (self.audioContext) {\n      self.audioContext.close();\n    }\n\n    self.audioContext = null;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    if (canvas.stream) {\n      canvas.stream.stop();\n      canvas.stream = null;\n    }\n  };\n\n  this.resetVideoStreams = function (streams) {\n    if (streams && !(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    resetVideoStreams(streams);\n  };\n\n  function resetVideoStreams(streams) {\n    videos = [];\n    streams = streams || arrayOfMediaStreams; // via: @adrian-ber\n\n    streams.forEach(function (stream) {\n      if (!stream.getTracks().filter(function (t) {\n        return t.kind === 'video';\n      }).length) {\n        return;\n      }\n\n      var video = getVideo(stream);\n      video.stream = stream;\n      videos.push(video);\n    });\n  } // for debugging\n\n\n  this.name = 'MultiStreamsMixer';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  this.getMixedStream = getMixedStream;\n} // ______________________\n// MultiStreamRecorder.js\n\n/*\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\n */\n\n/**\n * MultiStreamRecorder can record multiple videos in single container.\n * @summary Multi-videos recorder.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MultiStreamRecorder\n * @class\n * @example\n * var options = {\n *     mimeType: 'video/webm'\n * }\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\n * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: \"video/webm\"}\n */\n\n\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\n  arrayOfMediaStreams = arrayOfMediaStreams || [];\n  var self = this;\n  var mixer;\n  var mediaRecorder;\n  options = options || {\n    mimeType: 'video/webm',\n    video: {\n      width: 360,\n      height: 240\n    }\n  };\n\n  if (!options.frameInterval) {\n    options.frameInterval = 10;\n  }\n\n  if (!options.video) {\n    options.video = {};\n  }\n\n  if (!options.video.width) {\n    options.video.width = 360;\n  }\n\n  if (!options.video.height) {\n    options.video.height = 240;\n  }\n  /**\n   * This method records all MediaStreams.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @example\n   * recorder.record();\n   */\n\n\n  this.record = function () {\n    // github/muaz-khan/MultiStreamsMixer\n    mixer = new MultiStreamsMixer(arrayOfMediaStreams);\n\n    if (getAllVideoTracks().length) {\n      mixer.frameInterval = options.frameInterval || 10;\n      mixer.width = options.video.width || 360;\n      mixer.height = options.video.height || 240;\n      mixer.startDrawingFrames();\n    }\n\n    if (options.previewStream && typeof options.previewStream === 'function') {\n      options.previewStream(mixer.getMixedStream());\n    } // record using MediaRecorder API\n\n\n    mediaRecorder = new MediaStreamRecorder(mixer.getMixedStream(), options);\n    mediaRecorder.record();\n  };\n\n  function getAllVideoTracks() {\n    var tracks = [];\n    arrayOfMediaStreams.forEach(function (stream) {\n      getTracks(stream, 'video').forEach(function (track) {\n        tracks.push(track);\n      });\n    });\n    return tracks;\n  }\n  /**\n   * This method stops recording MediaStream.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n\n  this.stop = function (callback) {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.stop(function (blob) {\n      self.blob = blob;\n      callback(blob);\n      self.clearRecordedData();\n    });\n  };\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @example\n   * recorder.pause();\n   */\n\n\n  this.pause = function () {\n    if (mediaRecorder) {\n      mediaRecorder.pause();\n    }\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    if (mediaRecorder) {\n      mediaRecorder.resume();\n    }\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    if (mediaRecorder) {\n      mediaRecorder.clearRecordedData();\n      mediaRecorder = null;\n    }\n\n    if (mixer) {\n      mixer.releaseStreams();\n      mixer = null;\n    }\n  };\n  /**\n   * Add extra media-streams to existing recordings.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @param {MediaStreams} mediaStreams - Array of MediaStreams\n   * @example\n   * recorder.addStreams([newAudioStream, newVideoStream]);\n   */\n\n\n  this.addStreams = function (streams) {\n    if (!streams) {\n      throw 'First parameter is required.';\n    }\n\n    if (!(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    arrayOfMediaStreams.concat(streams);\n\n    if (!mediaRecorder || !mixer) {\n      return;\n    }\n\n    mixer.appendStreams(streams);\n  };\n  /**\n   * Reset videos during live recording. Replace old videos e.g. replace cameras with full-screen.\n   * @method\n   * @memberof MultiStreamRecorder\n   * @param {MediaStreams} mediaStreams - Array of MediaStreams\n   * @example\n   * recorder.resetVideoStreams([newVideo1, newVideo2]);\n   */\n\n\n  this.resetVideoStreams = function (streams) {\n    if (!mixer) {\n      return;\n    }\n\n    if (streams && !(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    mixer.resetVideoStreams(streams);\n  }; // for debugging\n\n\n  this.name = 'MultiStreamRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\n} // _____________________\n// RecordRTC.promises.js\n\n/**\n * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}\n * @summary Promises for {@link RecordRTC}\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTCPromisesHandler\n * @class\n * @example\n * var recorder = new RecordRTCPromisesHandler(mediaStream, options);\n * recorder.startRecording()\n *         .then(successCB)\n *         .catch(errorCB);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n * @throws Will throw an error if \"new\" keyword is not used to initiate \"RecordRTCPromisesHandler\". Also throws error if first argument \"MediaStream\" is missing.\n * @requires {@link RecordRTC}\n */\n\n\nfunction RecordRTCPromisesHandler(mediaStream, options) {\n  if (!this) {\n    throw 'Use \"new RecordRTCPromisesHandler()\"';\n  }\n\n  if (typeof mediaStream === 'undefined') {\n    throw 'First argument \"MediaStream\" is required.';\n  }\n\n  var self = this;\n  /**\n   * @property {Blob} blob - Access/reach the native {@link RecordRTC} object.\n   * @memberof RecordRTCPromisesHandler\n   * @example\n   * var internal = recorder.recordRTC.getInternalRecorder();\n   * alert(internal instanceof MediaStreamRecorder);\n   */\n\n  self.recordRTC = new RecordRTC(mediaStream, options);\n  /**\n   * This method records MediaStream.\n   * @method\n   * @memberof RecordRTCPromisesHandler\n   * @example\n   * recorder.startRecording()\n   *         .then(successCB)\n   *         .catch(errorCB);\n   */\n\n  this.startRecording = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.startRecording();\n        resolve();\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\n   * This method stops the recording.\n   * @method\n   * @memberof RecordRTCPromisesHandler\n   * @example\n   * recorder.stopRecording().then(function() {\n   *     var blob = recorder.getBlob();\n   * }).catch(errorCB);\n   */\n\n\n  this.stopRecording = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.stopRecording(function (url) {\n          self.blob = self.recordRTC.getBlob();\n\n          if (!self.blob || !self.blob.size) {\n            reject('Empty blob.', self.blob);\n            return;\n          }\n\n          resolve(url);\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\n   * This method returns data-url for the recorded blob.\n   * @method\n   * @memberof RecordRTCPromisesHandler\n   * @example\n   * recorder.stopRecording().then(function() {\n   *     recorder.getDataURL().then(function(dataURL) {\n   *         window.open(dataURL);\n   *     }).catch(errorCB);;\n   * }).catch(errorCB);\n   */\n\n\n  this.getDataURL = function (callback) {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.getDataURL(function (dataURL) {\n          resolve(dataURL);\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\n   * This method returns the recorded blob.\n   * @method\n   * @memberof RecordRTCPromisesHandler\n   * @example\n   * recorder.stopRecording().then(function() {\n   *     recorder.getBlob().then(function(blob) {})\n   * }).catch(errorCB);\n   */\n\n\n  this.getBlob = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(self.recordRTC.getBlob());\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\n   * @property {Blob} blob - Recorded data as \"Blob\" object.\n   * @memberof RecordRTCPromisesHandler\n   * @example\n   * recorder.stopRecording().then(function() {\n   *     var blob = recorder.getBlob();\n   * }).catch(errorCB);\n   */\n\n\n  this.blob = null;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler;\n} // ______________________\n// WebAssemblyRecorder.js\n\n/**\n * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.\n * @summary Video recording feature in Chrome, Firefox and maybe Edge.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef WebAssemblyRecorder\n * @class\n * @example\n * var recorder = new WebAssemblyRecorder(mediaStream);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024}\n */\n\n\nfunction WebAssemblyRecorder(stream, config) {\n  // based on: github.com/GoogleChromeLabs/webm-wasm\n  if (typeof ReadableStream === 'undefined' || typeof WritableStream === 'undefined') {\n    // because it fixes readable/writable streams issues\n    console.error('Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js');\n  }\n\n  config = config || {};\n  config.width = config.width || 640;\n  config.height = config.height || 480;\n  config.frameRate = config.frameRate || 30;\n  config.bitrate = config.bitrate || 1200;\n\n  function createBufferURL(buffer, type) {\n    return URL.createObjectURL(new Blob([buffer], {\n      type: type || ''\n    }));\n  }\n\n  function cameraStream() {\n    return new ReadableStream({\n      start: function (controller) {\n        var cvs = document.createElement('canvas');\n        var video = document.createElement('video');\n        video.srcObject = stream;\n\n        video.onplaying = function () {\n          cvs.width = config.width;\n          cvs.height = config.height;\n          var ctx = cvs.getContext('2d');\n          var frameTimeout = 1000 / config.frameRate;\n          setTimeout(function () {\n            function f() {\n              ctx.drawImage(video, 0, 0);\n              controller.enqueue(ctx.getImageData(0, 0, config.width, config.height));\n              setTimeout(f, frameTimeout);\n            }\n\n            return f;\n          }(), frameTimeout);\n        };\n\n        video.play();\n      }\n    });\n  }\n\n  var worker;\n\n  function startRecording(stream, buffer) {\n    if (!config.workerPath && !buffer) {\n      // is it safe to use @latest ?\n      fetch('https://unpkg.com/webm-wasm@latest/dist/webm-worker.js').then(function (r) {\n        r.arrayBuffer().then(function (buffer) {\n          startRecording(stream, buffer);\n        });\n      });\n      return;\n    }\n\n    if (!config.workerPath && buffer instanceof ArrayBuffer) {\n      var blob = new Blob([buffer], {\n        type: 'text/javascript'\n      });\n      config.workerPath = URL.createObjectURL(blob);\n    }\n\n    if (!config.workerPath) {\n      console.error('workerPath parameter is missing.');\n    }\n\n    worker = new Worker(config.workerPath);\n    worker.postMessage(config.webAssemblyPath || 'https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm');\n    worker.addEventListener('message', function (event) {\n      if (event.data === 'READY') {\n        worker.postMessage({\n          width: config.width,\n          height: config.height,\n          bitrate: config.bitrate || 1200,\n          timebaseDen: config.frameRate || 30,\n          realtime: true\n        });\n        cameraStream().pipeTo(new WritableStream({\n          write: function (image) {\n            if (!worker) {\n              return;\n            }\n\n            worker.postMessage(image.data.buffer, [image.data.buffer]);\n          }\n        }));\n      } else if (!!event.data) {\n        if (!isPaused) {\n          arrayOfBuffers.push(event.data);\n        }\n      }\n    });\n  }\n  /**\n   * This method records video.\n   * @method\n   * @memberof WebAssemblyRecorder\n   * @example\n   * recorder.record();\n   */\n\n\n  this.record = function () {\n    arrayOfBuffers = [];\n    isPaused = false;\n    this.blob = null;\n    startRecording(stream);\n\n    if (typeof config.initCallback === 'function') {\n      config.initCallback();\n    }\n  };\n\n  var isPaused;\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof WebAssemblyRecorder\n   * @example\n   * recorder.pause();\n   */\n\n  this.pause = function () {\n    isPaused = true;\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof WebAssemblyRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    isPaused = false;\n  };\n\n  function terminate() {\n    if (!worker) {\n      return;\n    }\n\n    worker.postMessage(null);\n    worker.terminate();\n    worker = null;\n  }\n\n  var arrayOfBuffers = [];\n  /**\n   * This method stops recording video.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof WebAssemblyRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n  this.stop = function (callback) {\n    terminate();\n    this.blob = new Blob(arrayOfBuffers, {\n      type: 'video/webm'\n    });\n    callback(this.blob);\n  }; // for debugging\n\n\n  this.name = 'WebAssemblyRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof WebAssemblyRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    arrayOfBuffers = [];\n    isPaused = false;\n    this.blob = null; // todo: if recording-ON then STOP it first\n  };\n  /**\n   * @property {Blob} blob - The recorded blob object.\n   * @memberof WebAssemblyRecorder\n   * @example\n   * recorder.stop(function(){\n   *     var blob = recorder.blob;\n   * });\n   */\n\n\n  this.blob = null;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.WebAssemblyRecorder = WebAssemblyRecorder;\n}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"messenger.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/messenger/messenger.js                                                                            //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./messenger.html\");\nvar User;\nmodule.link(\"/imports/api/user/user.js\", {\n  User: function (v) {\n    User = v;\n  }\n}, 0);\nvar Message;\nmodule.link(\"/imports/api/messages/messages.js\", {\n  Message: function (v) {\n    Message = v;\n  }\n}, 1);\nvar Video;\nmodule.link(\"/imports/api/video/video.js\", {\n  Video: function (v) {\n    Video = v;\n  }\n}, 2);\nvar GroupMessage;\nmodule.link(\"/imports/api/groupMessenger/groupMessage.js\", {\n  GroupMessage: function (v) {\n    GroupMessage = v;\n  }\n}, 3);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 4);\nmodule.link(\"./RecordRTC.js\");\nvar selectedUser = new ReactiveVar(undefined);\nvar searchUser = new ReactiveVar(\"\");\nTemplate.App_messenger.onCreated(function () {\n  var self = this;\n  self.autorun(function () {\n    Meteor.subscribe('users');\n    Meteor.subscribe('messages');\n    Meteor.subscribe('groupMessage');\n  });\n});\nTemplate.App_messenger.helpers({\n  getUsers: function () {\n    var user_id = Session.get('u_l');\n    if (!user_id) return [];\n    var keywords = searchUser.get();\n    var query = {\n      _id: {\n        $ne: user_id\n      },\n      name: new RegExp('.*' + keywords + '.*', 'i')\n    };\n    return User.find(query);\n  },\n  startup: function () {\n    Status.setTemplate('semantic_ui');\n  },\n  getUserById: function (id) {\n    return User.findOne({\n      _id: id\n    });\n  },\n  getMessages: function () {\n    var user_id = Session.get('u_l');\n    if (!user_id) return [];\n    var query = {\n      $and: [{\n        $or: [{\n          sid: user_id\n        }, {\n          rid: user_id\n        }]\n      }]\n    };\n\n    var _selected_user = selectedUser.get();\n\n    if (_selected_user) _selected_user = _selected_user[0];\n\n    if (!_selected_user) {\n      var fst = User.findOne({\n        _id: {\n          $ne: user_id\n        }\n      });\n      if (fst) _selected_user = fst._id;\n    }\n\n    if (_selected_user) query.$and.push({\n      $or: [{\n        sid: _selected_user\n      }, {\n        rid: _selected_user\n      }]\n    });\n    Meteor.setTimeout(function () {\n      jQuery(\".msg-wrap\").stop().animate({\n        scrollTop: jQuery(\".msg-wrap\")[0].scrollHeight\n      }, 500, 'swing');\n    }, 500);\n    return Message.find(query);\n  },\n  getLines: function (message) {\n    return message.split('\\n');\n  },\n  isFile: function (type) {\n    return type == \"files\";\n  },\n  isImage: function (message) {\n    return /.+(png|jpg|jpeg|gif)/ig.test(message);\n  },\n  viewMessage: function (rid, message_id, viewed) {\n    var user_id = Session.get('u_l');\n\n    if (user_id === rid && !viewed) {\n      Meteor.call(\"message.update\", message_id, {\n        viewed: true\n      }, function () {\n        jQuery(\"#audio\")[0].play();\n        jQuery(\".msg-wrap\").stop().animate({\n          scrollTop: jQuery(\".msg-wrap\")[0].scrollHeight\n        }, 500, 'swing');\n      });\n    }\n  },\n  result: function () {\n    return Collection.find({\n      name: Session.get('name')\n    });\n  }\n});\nTemplate.App_messenger.events({\n  \"click #logout\": function (evt) {\n    evt.preventDefault();\n    Session.clear('u_l');\n    return FlowRouter.go(\"/\");\n  },\n  \"click #send-message\": function (evt, template) {\n    evt.preventDefault();\n    var selected_user_id = jQuery(\"#users\").val();\n    var group = false;\n\n    if (selected_user_id.length > 1) {\n      //multiple (group)\n      var _group = GroupMessage.findOne({\n        users: _.sortBy(selected_user_id).join(\"-\")\n      });\n\n      if (_group) group = _group._id;\n    } else selected_user_id = selected_user_id[0]; //single user message\n\n\n    var message = jQuery(\"#message\").val();\n    var sender_id = Session.get('u_l');\n    var upload = jQuery(\"#upload\")[0].files;\n    if (!sender_id || !selected_user_id) return;\n    var update = jQuery(\"#send-message\").attr('update');\n\n    if (update && update != \"\") {\n      Meteor.call(\"message.update\", update, {\n        message: message\n      });\n    } else {\n      var type = \"text\";\n\n      if (upload.length) {\n        type = \"files\";\n        message = [];\n        Array.from(upload).forEach(function (file) {\n          uploadFile(file);\n          message.push(file.name);\n        });\n        message = message.join(\";\");\n      }\n\n      if (group) {\n        selected_user_id.forEach(function (uid) {\n          Meteor.call(\"message.insert\", sender_id, uid, message, type, group);\n        });\n      } else Meteor.call(\"message.insert\", sender_id, selected_user_id, message, type, false);\n    }\n\n    jQuery(\"#message\").val('');\n    jQuery(\"#send-message\").text('Send');\n    jQuery(\"#send-message\").removeAttr('update');\n  },\n  \"click .remove\": function () {\n    Meteor.call('message.remove', this._id);\n  },\n  \"change #users\": function (evt) {\n    selectedUser.set(jQuery(\"#users\").val());\n  },\n  \"keyup #message\": function (evt) {\n    if (!evt.enterKey && (evt.keyCode === 13 || evt.which === 13)) {\n      jQuery(\"#send-message\").click();\n      evt.preventDefault();\n    }\n  },\n  \"keyup #search\": function (evt) {\n    if (!evt.shiftKey && (evt.keyCode === 13 || evt.which === 13)) {\n      jQuery(\"#submit\").click();\n      evt.preventDefault();\n    }\n  },\n  \"click .update\": function () {\n    jQuery(\"#message\").val(this.message);\n    jQuery(\"#send-message\").text('Update');\n    jQuery(\"#send-message\").attr('update', this._id);\n  },\n  \"click .submit\": function () {\n    searchUser.set(jQuery(\".search\").val());\n  },\n  \"click .recordbutton\": function () {\n    var session = {\n      audio: true,\n      video: true\n    };\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n    var aCtx;\n    var analyser;\n    var microphone;\n    var video = document.querySelector('video');\n    var streamRecorder;\n    var webcamstream;\n\n    if (navigator.getUserMedia) {\n      navigator.getUserMedia({\n        audio: true,\n        video: true\n      }, function (stream) {\n        aCtx = new AudioContext();\n        analyser = aCtx.createAnalyser();\n        microphone = aCtx.createMediaStreamSource(stream);\n        microphone.connect(analyser);\n        analyser.connect(aCtx.destination);\n      }, function () {\n        console.warn(\"Error getting audio stream from getUserMedia\");\n      });\n    }\n\n    ;\n  }\n});\n\nfunction uploadFile(file) {\n  var formData = new FormData();\n  formData.append(\"file\", file, file.name);\n  jQuery.ajax({\n    type: \"POST\",\n    url: \"http://172.16.1.143:3333/upload\",\n    success: function (data) {\n      jQuery(\"#upload[type=file]\").val(\"\");\n    },\n    error: function (error) {},\n    async: true,\n    data: formData,\n    cache: false,\n    contentType: false,\n    processData: false,\n    timeout: 60000\n  });\n} // window.URL = window.URL || window.webkitURL;\n// navigator.getUserMedia  = navigator.getUserMedia ||\n//                          navigator.webkitGetUserMedia ||\n//                           navigator.mozGetUserMedia ||\n//                            navigator.msGetUserMedia;\n//\n// var video = document.querySelector('video');\n// var streamRecorder;\n// var webcamstream;\n//\n// if (navigator.getUserMedia) {\n//   navigator.getUserMedia({audio: true, video: true}, function(stream) {\n//     video.src = window.URL.createObjectURL(stream);\n//     webcamstream = stream;\n// //  streamrecorder = webcamstream.record();\n//   }, onVideoFail);\n// } else {\n//     alert ('failed');\n// }\n//\n// function startRecording() {\n//     streamRecorder = webcamstream.record();\n//     setTimeout(stopRecording, 10000);\n// }\n// function stopRecording() {\n//     streamRecorder.getRecordedData(postVideoToServer);\n// }\n// function postVideoToServer(videoblob) {\n//\n//     var data = {};\n//     data.video = videoblob;\n//     data.metadata = 'test metadata';\n//     data.action = \"upload_video\";\n//     jQuery.post(\"http://www.foundthru.co.uk/uploadvideo.php\", data, onUploadSuccess);\n// }\n// function onUploadSuccess() {\n//     alert ('video uploaded');\n// }\n//\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"page2\":{\"page.html\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/page.html                                                                                   //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./template.page.js\", { \"*\": \"*+\" });\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.page.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/template.page.js                                                                            //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n\nTemplate.__checkName(\"App_page2\");\nTemplate[\"App_page2\"] = new Template(\"Template.App_page2\", (function() {\n  var view = this;\n  return [ HTML.Raw('<link rel=\"shortcut icon\" type=\"image/png\" href=\"/media/images/favicon.png\">\\n  <link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS 2.0\" href=\"http://www.datatables.net/rss.xml\">\\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/media/css/site-examples.css?_=8ffc0b31bc8d9ff82fbb94689dd1d7ff\">\\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css\">\\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css\">\\n  '), HTML.H4(Blaze.View(\"lookup:reactiveVarHelper\", function() {\n    return Spacebars.mustache(view.lookup(\"reactiveVarHelper\"));\n  })), HTML.Raw(\"\\n<!-- DataTable start -->\\n\"), HTML.DIV({\n    class: \"container\"\n  }, \"\\n  \", HTML.TABLE({\n    class: \"table table-striped table-bordered dataTable\",\n    id: \"table\",\n    style: \"width:100%\",\n    role: \"grid\",\n    \"aria-describedby\": \"example_info\"\n  }, \"\\n    \", HTML.THEAD(\"\\n      \", HTML.TR({\n    role: \"row\",\n    class: \"odd \"\n  }, \"\\n        \", HTML.TH({\n    scope: \"col\"\n  }, \"Id\"), \"\\n        \", HTML.TH({\n    id: \"sort\",\n    class: \"sorting_asc\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-sort\": \"ascending\",\n    \"aria-label\": \"Name: activate to sort column descending\",\n    style: \"width: 102.067px; \"\n  }, \"Name\"), \"\\n        \", HTML.TH({\n    id: \"sort\",\n    class: \"sorting_asc\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-sort\": \"ascending\",\n    \"aria-label\": \"Name: activate to sort column descending\",\n    style: \"width: 102.067px; \"\n  }, \"Last Name\"), \"\\n        \", HTML.TH({\n    class: \"sorting\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-label\": \"Position: activate to sort column ascending\",\n    style: \"width: 175.133px;\"\n  }, \"password\"), \"\\n        \", HTML.TH({\n    class: \"sorting\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-label\": \"Office: activate to sort column ascending\",\n    style: \"width: 73.8px;\"\n  }, \"Phone\"), \"\\n        \", HTML.TH({\n    class: \"sorting\",\n    tabindex: \"0\",\n    \"aria-controls\": \"example\",\n    rowspan: \"1\",\n    colspan: \"1\",\n    \"aria-label\": \"Start date: activate to sort column ascending\",\n    style: \"width: 61.5333px;\"\n  }, \"Email\"), \"\\n        \", HTML.TH({\n    tabindex: \"0\",\n    \"aria-controls\": \"table\",\n    rowspan: \"1\",\n    colspan: \"1\"\n  }, \"Remove\"), \"\\n\"), \"\\n    \"), \"\\n    \", HTML.TBODY(\"\\n\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getUsers\"));\n  }, function() {\n    return [ \"\\n\", HTML.TR(\"\\n  \", HTML.TD(Blaze.View(\"lookup:_id\", function() {\n      return Spacebars.mustache(view.lookup(\"_id\"));\n    })), \"\\n  \", HTML.TD(Blaze.View(\"lookup:name\", function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    })), \"\\n  \", HTML.TD(Blaze.View(\"lookup:lastName\", function() {\n      return Spacebars.mustache(view.lookup(\"lastName\"));\n    })), \"\\n  \", HTML.TD(Blaze.View(\"lookup:password\", function() {\n      return Spacebars.mustache(view.lookup(\"password\"));\n    })), \"\\n  \", HTML.TD(Blaze.View(\"lookup:phone\", function() {\n      return Spacebars.mustache(view.lookup(\"phone\"));\n    })), \"\\n  \", HTML.TD(Blaze.View(\"lookup:email\", function() {\n      return Spacebars.mustache(view.lookup(\"email\"));\n    })), \"\\n  \", HTML.TD(HTML.BUTTON({\n      class: \"remove dtr-data\",\n      \"data-position\": \"bottom\",\n      \"data-tooltip\": \"Remove Record\"\n    }, \"Remove\")), \"\\n\"), \"\\n\" ];\n  }), \"\\n\"), \"\\n\"), \"\\n\", HTML.Raw(\"<!-- end of Datatable -->\"), \"\\n\\n\", HTML.Raw(\"<!-- Going to chat -->\"), \"\\n\", HTML.Raw('<a style=\"width: 100px;\" rel=\"stylesheet\" href=\"/messenger\">Chat</a>'), \"\\n\\n\", HTML.Raw(\"<!-- send email -->\"), \"\\n\", HTML.DIV({\n    class: \"modal fade\",\n    id: \"modalContactForm\",\n    tabindex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"myModalLabel\",\n    \"aria-hidden\": \"true\"\n  }, \"\\n  \", HTML.DIV({\n    class: \"modal-dialog\",\n    role: \"document\"\n  }, \"\\n    \", HTML.DIV({\n    class: \"modal-content\"\n  }, \"\\n      \", HTML.Raw('<div class=\"modal-header text-center\">\\n        <h4 class=\"modal-title w-100 font-weight-bold\">Email</h4>\\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n          <span aria-hidden=\"true\">&times;</span>\\n        </button>\\n      </div>'), \"\\n      \", HTML.DIV({\n    class: \"modal-body mx-3\"\n  }, \"\\n        \", HTML.Raw('<div class=\"md-form mb-5\">\\n          <i class=\"fas fa-envelope prefix grey-text\"></i>\\n          <label data-error=\"wrong\" data-success=\"right\" for=\"to\">To:</label>\\n          <input type=\"email\" id=\"to\" class=\"to form-control validate\" placeholder=\"email@example.com\">\\n        </div>'), \"\\n\\n        \", HTML.Raw('<div class=\"md-form mb-5\">\\n          <i class=\"fas fa-tag prefix grey-text\"></i>\\n          <label data-error=\"wrong\" data-success=\"right\" for=\"subject\">Subject:</label>\\n          <input type=\"text\" id=\"subject\" class=\"subject form-control validate\" placeholder=\"Add a subject\">\\n        </div>'), \"\\n\\n        \", HTML.DIV({\n    class: \"md-form\"\n  }, \"\\n          \", HTML.Raw('<i class=\"fas fa-pencil prefix grey-text\"></i>'), \"\\n          \", HTML.Raw('<label data-error=\"wrong\" data-success=\"right\" for=\"ymsg\">Your message:</label>'), \"\\n          \", HTML.TEXTAREA({\n    type: \"text\",\n    id: \"ymsg\",\n    class: \"ymsg md-textarea form-control\",\n    rows: \"4\",\n    placeholder: \"Message\"\n  }), \"\\n        \"), \"\\n\\n      \"), \"\\n      \", HTML.Raw('<div class=\"modal-footer d-flex justify-content-center\">\\n        <button class=\"send btn btn-unique text-white \" id=\"send\" data-dismiss=\"modal\" style=\"background:grey\">Send</button>\\n      </div>'), \"\\n    \"), \"\\n  \"), \"\\n\"), \"\\n\", HTML.Raw('<button type=\"button\" name=\"sendEmail\" class=\"sendEmail btn btn-primary\" data-toggle=\"modal\" data-target=\"#modalContactForm\">Send Email</button>'), \"\\n\", HTML.Raw(\"<!-- end of send email -->\"), \"\\n\\n\", HTML.Raw(\"<!-- Add user button and Modal -->\"), \"\\n\", HTML.Raw('<button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModalLong\">Add Users</button>'), \"\\n\", HTML.Raw(\"<!-- Modal -->\"), \"\\n\", HTML.Raw('<div class=\"addMore modal fade\" id=\"exampleModalLong\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLongTitle\" aria-hidden=\"true\">\\n  <div class=\"modal-dialog\" role=\"document\">\\n    <div class=\"modal-content\">\\n      <div class=\"modal-header\">\\n        <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Add More User</h5>\\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n          <span aria-hidden=\"true\">&times;</span>\\n        </button>\\n      </div>\\n      <div class=\"modal-body\">\\n<form>\\n  <div class=\"form-group\">\\n    <label>Name</label>\\n    <input type=\"text\" class=\"namee form-control\" id=\"namee\" aria-describedby=\"namee\" placeholder=\"John\">\\n  </div>\\n  <div class=\"form-group\">\\n    <label>Last Name</label>\\n    <input type=\"text\" class=\"namee form-control\" id=\"namee\" aria-describedby=\"namee\" placeholder=\"Lil\">\\n  </div>\\n  <div class=\"form-group\">\\n    <label>Email address</label>\\n    <input type=\"email\" class=\"email form-control\" id=\"email\" aria-describedby=\"email\" placeholder=\"email@example.com\">\\n  </div>\\n  <div class=\"form-group\">\\n    <label for=\"phone\">Phone</label>\\n    <input type=\"number\" min=\"1\" class=\"phone form-control\" id=\"phone\" aria-describedby=\"phone\" placeholder=\"+359987415\">\\n  </div>\\n  <div class=\"form-group\">\\n    <label>Password</label>\\n    <input type=\"password\" class=\"passwordd form-control\" id=\"exampleInputPassword1\">\\n  </div>\\n</form>\\n      </div>\\n      <div class=\"modal-footer\">\\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\\n        <button type=\"button\" class=\"save btn btn-primary\">Save changes</button>\\n      </div>\\n    </div>\\n  </div>\\n</div>'), \"\\n\", HTML.Raw(\"<!-- End of user modal -->\"), \"\\n\", HTML.Raw('<button type=\"button\" id=\"logout\" class=\"logout btn btn-default btn-sm\"><span class=\"glyphicon glyphicon-log-out\"></span> Log out</button>'), \"\\n\\n\") ];\n}));\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.bootstrap4.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/dataTables.bootstrap4.min.js                                                                //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables Bootstrap 4 integration\n ©2011-2017 SpryMedia Ltd - datatables.net/license\n*/\n(function(b){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(a){return b(a,window,document)}):\"object\"===typeof exports?module.exports=function(a,d){a||(a=window);if(!d||!d.fn.dataTable)d=require(\"datatables.net\")(a,d).$;return b(d,a,a.document)}:b(jQuery,window,document)})(function(b,a,d,m){var f=b.fn.dataTable;b.extend(!0,f.defaults,{dom:\"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\",\nrenderer:\"bootstrap\"});b.extend(f.ext.classes,{sWrapper:\"dataTables_wrapper dt-bootstrap4\",sFilterInput:\"form-control form-control-sm\",sLengthSelect:\"custom-select custom-select-sm form-control form-control-sm\",sProcessing:\"dataTables_processing card\",sPageButton:\"paginate_button page-item\"});f.ext.renderer.pageButton.bootstrap=function(a,h,r,s,j,n){var o=new f.Api(a),t=a.oClasses,k=a.oLanguage.oPaginate,u=a.oLanguage.oAria.paginate||{},e,g,p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault();\n!b(a.currentTarget).hasClass(\"disabled\")&&o.page()!=a.data.action&&o.page(a.data.action).draw(\"page\")};l=0;for(h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{g=e=\"\";switch(c){case \"ellipsis\":e=\"&#x2026;\";g=\"disabled\";break;case \"first\":e=k.sFirst;g=c+(0<j?\"\":\" disabled\");break;case \"previous\":e=k.sPrevious;g=c+(0<j?\"\":\" disabled\");break;case \"next\":e=k.sNext;g=c+(j<n-1?\"\":\" disabled\");break;case \"last\":e=k.sLast;g=c+(j<n-1?\"\":\" disabled\");break;default:e=c+1,g=j===c?\"active\":\"\"}e&&(i=b(\"<li>\",\n{\"class\":t.sPageButton+\" \"+g,id:0===r&&\"string\"===typeof c?a.sTableId+\"_\"+c:null}).append(b(\"<a>\",{href:\"#\",\"aria-controls\":a.sTableId,\"aria-label\":u[c],\"data-dt-idx\":p,tabindex:a.iTabIndex,\"class\":\"page-link\"}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}},i;try{i=b(h).find(d.activeElement).data(\"dt-idx\")}catch(v){}q(b(h).empty().html('<ul class=\"pagination\"/>').children(\"ul\"),s);i!==m&&b(h).find(\"[data-dt-idx=\"+i+\"]\").focus()};return f});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.foundation.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/dataTables.foundation.min.js                                                                //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables Foundation integration\n ©2011-2015 SpryMedia Ltd - datatables.net/license\n*/\n(function(d){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(a){return d(a,window,document)}):\"object\"===typeof exports?module.exports=function(a,b){a||(a=window);if(!b||!b.fn.dataTable)b=require(\"datatables.net\")(a,b).$;return d(b,a,a.document)}:d(jQuery,window,document)})(function(d){var a=d.fn.dataTable,b=d('<meta class=\"foundation-mq\"/>').appendTo(\"head\");a.ext.foundationVersion=b.css(\"font-family\").match(/small|medium|large/)?6:5;b.remove();d.extend(a.ext.classes,\n{sWrapper:\"dataTables_wrapper dt-foundation\",sProcessing:\"dataTables_processing panel callout\"});d.extend(!0,a.defaults,{dom:\"<'row grid-x'<'small-6 columns cell'l><'small-6 columns cell'f>r>t<'row grid-x'<'small-6 columns cell'i><'small-6 columns cell'p>>\",renderer:\"foundation\"});a.ext.renderer.pageButton.foundation=function(b,l,r,s,e,i){var m=new a.Api(b),t=b.oClasses,j=b.oLanguage.oPaginate,u=b.oLanguage.oAria.paginate||{},f,h,g,v=5===a.ext.foundationVersion,q=function(a,n){var k,o,p,c,l=function(a){a.preventDefault();\n!d(a.currentTarget).hasClass(\"unavailable\")&&m.page()!=a.data.action&&m.page(a.data.action).draw(\"page\")};k=0;for(o=n.length;k<o;k++)if(c=n[k],d.isArray(c))q(a,c);else{h=f=\"\";g=null;switch(c){case \"ellipsis\":f=\"&#x2026;\";h=\"unavailable disabled\";g=null;break;case \"first\":f=j.sFirst;h=c+(0<e?\"\":\" unavailable disabled\");g=0<e?\"a\":null;break;case \"previous\":f=j.sPrevious;h=c+(0<e?\"\":\" unavailable disabled\");g=0<e?\"a\":null;break;case \"next\":f=j.sNext;h=c+(e<i-1?\"\":\" unavailable disabled\");g=e<i-1?\"a\":\nnull;break;case \"last\":f=j.sLast;h=c+(e<i-1?\"\":\" unavailable disabled\");g=e<i-1?\"a\":null;break;default:f=c+1,h=e===c?\"current\":\"\",g=e===c?null:\"a\"}v&&(g=\"a\");f&&(p=d(\"<li>\",{\"class\":t.sPageButton+\" \"+h,\"aria-controls\":b.sTableId,\"aria-label\":u[c],tabindex:b.iTabIndex,id:0===r&&\"string\"===typeof c?b.sTableId+\"_\"+c:null}).append(g?d(\"<\"+g+\"/>\",{href:\"#\"}).html(f):f).appendTo(a),b.oApi._fnBindAction(p,{action:c},l))}};q(d(l).empty().html('<ul class=\"pagination\"/>').children(\"ul\"),s)};return a});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.jqueryui.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/dataTables.jqueryui.min.js                                                                  //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables jQuery UI integration\n ©2011-2014 SpryMedia Ltd - datatables.net/license\n*/\n(function(a){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(b){return a(b,window,document)}):\"object\"===typeof exports?module.exports=function(b,d){b||(b=window);if(!d||!d.fn.dataTable)d=require(\"datatables.net\")(b,d).$;return a(d,b,b.document)}:a(jQuery,window,document)})(function(a){var b=a.fn.dataTable;a.extend(!0,b.defaults,{dom:'<\"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix ui-corner-tl ui-corner-tr\"lfr>t<\"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix ui-corner-bl ui-corner-br\"ip>',\nrenderer:\"jqueryui\"});a.extend(b.ext.classes,{sWrapper:\"dataTables_wrapper dt-jqueryui\",sPageButton:\"fg-button ui-button ui-state-default\",sPageButtonActive:\"ui-state-disabled\",sPageButtonDisabled:\"ui-state-disabled\",sPaging:\"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_\",sSortAsc:\"ui-state-default sorting_asc\",sSortDesc:\"ui-state-default sorting_desc\",sSortable:\"ui-state-default sorting\",sSortableAsc:\"ui-state-default sorting_asc_disabled\",sSortableDesc:\"ui-state-default sorting_desc_disabled\",\nsSortableNone:\"ui-state-default sorting_disabled\",sSortIcon:\"DataTables_sort_icon\",sScrollHead:\"dataTables_scrollHead ui-state-default\",sScrollFoot:\"dataTables_scrollFoot ui-state-default\",sHeaderTH:\"ui-state-default\",sFooterTH:\"ui-state-default\"});b.ext.renderer.header.jqueryui=function(b,h,e,c){var f=\"css_right ui-icon ui-icon-caret-2-n-s\",g=-1!==a.inArray(\"asc\",e.asSorting),i=-1!==a.inArray(\"desc\",e.asSorting);!e.bSortable||!g&&!i?f=\"\":g&&!i?f=\"css_right ui-icon ui-icon-caret-1-n\":!g&&i&&(f=\"css_right ui-icon ui-icon-caret-1-s\");\na(\"<div/>\").addClass(\"DataTables_sort_wrapper\").append(h.contents()).append(a(\"<span/>\").addClass(c.sSortIcon+\" \"+f)).appendTo(h);a(b.nTable).on(\"order.dt\",function(a,g,i,j){b===g&&(a=e.idx,h.removeClass(c.sSortAsc+\" \"+c.sSortDesc).addClass(\"asc\"==j[a]?c.sSortAsc:\"desc\"==j[a]?c.sSortDesc:e.sSortingClass),h.find(\"span.\"+c.sSortIcon).removeClass(\"css_right ui-icon ui-icon-triangle-1-n css_right ui-icon ui-icon-triangle-1-s css_right ui-icon ui-icon-caret-2-n-s css_right ui-icon ui-icon-caret-1-n css_right ui-icon ui-icon-caret-1-s\").addClass(\"asc\"==\nj[a]?\"css_right ui-icon ui-icon-triangle-1-n\":\"desc\"==j[a]?\"css_right ui-icon ui-icon-triangle-1-s\":f))})};b.TableTools&&a.extend(!0,b.TableTools.classes,{container:\"DTTT_container ui-buttonset ui-buttonset-multi\",buttons:{normal:\"DTTT_button ui-button ui-state-default\"},collection:{container:\"DTTT_collection ui-buttonset ui-buttonset-multi\"}});return b});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dataTables.semanticui.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/dataTables.semanticui.min.js                                                                //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables Bootstrap 3 integration\n ©2011-2015 SpryMedia Ltd - datatables.net/license\n*/\n(function(b){\"function\"===typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(a){return b(a,window,document)}):\"object\"===typeof exports?module.exports=function(a,e){a||(a=window);if(!e||!e.fn.dataTable)e=require(\"datatables.net\")(a,e).$;return b(e,a,a.document)}:b(jQuery,window,document)})(function(b,a,e,m){var c=b.fn.dataTable;b.extend(!0,c.defaults,{dom:\"<'ui stackable grid'<'row'<'eight wide column'l><'right aligned eight wide column'f>><'row dt-table'<'sixteen wide column'tr>><'row'<'seven wide column'i><'right aligned nine wide column'p>>>\",\nrenderer:\"semanticUI\"});b.extend(c.ext.classes,{sWrapper:\"dataTables_wrapper dt-semanticUI\",sFilter:\"dataTables_filter ui input\",sProcessing:\"dataTables_processing ui segment\",sPageButton:\"paginate_button item\"});c.ext.renderer.pageButton.semanticUI=function(h,a,r,s,j,n){var o=new c.Api(h),t=h.oClasses,k=h.oLanguage.oPaginate,u=h.oLanguage.oAria.paginate||{},f,g,p=0,q=function(a,e){var c,i,l,d,m=function(a){a.preventDefault();!b(a.currentTarget).hasClass(\"disabled\")&&o.page()!=a.data.action&&o.page(a.data.action).draw(\"page\")};\nc=0;for(i=e.length;c<i;c++)if(d=e[c],b.isArray(d))q(a,d);else{g=f=\"\";switch(d){case \"ellipsis\":f=\"&#x2026;\";g=\"disabled\";break;case \"first\":f=k.sFirst;g=d+(0<j?\"\":\" disabled\");break;case \"previous\":f=k.sPrevious;g=d+(0<j?\"\":\" disabled\");break;case \"next\":f=k.sNext;g=d+(j<n-1?\"\":\" disabled\");break;case \"last\":f=k.sLast;g=d+(j<n-1?\"\":\" disabled\");break;default:f=d+1,g=j===d?\"active\":\"\"}l=-1===g.indexOf(\"disabled\")?\"a\":\"div\";f&&(l=b(\"<\"+l+\">\",{\"class\":t.sPageButton+\" \"+g,id:0===r&&\"string\"===typeof d?\nh.sTableId+\"_\"+d:null,href:\"#\",\"aria-controls\":h.sTableId,\"aria-label\":u[d],\"data-dt-idx\":p,tabindex:h.iTabIndex}).html(f).appendTo(a),h.oApi._fnBindAction(l,{action:d},m),p++)}},i;try{i=b(a).find(e.activeElement).data(\"dt-idx\")}catch(v){}q(b(a).empty().html('<div class=\"ui stackable pagination menu\"/>').children(),s);i!==m&&b(a).find(\"[data-dt-idx=\"+i+\"]\").focus()};b(e).on(\"init.dt\",function(a,e){if(\"dt\"===a.namespace){var c=new b.fn.dataTable.Api(e);b.fn.dropdown&&b(\"div.dataTables_length select\",\nc.table().container()).dropdown();b(\"div.dataTables_filter.ui.input\",c.table().container()).removeClass(\"input\").addClass(\"form\");b(\"div.dataTables_filter input\",c.table().container()).wrap('<span class=\"ui input\" />')}});return c});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"jquery.dataTables.min.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/jquery.dataTables.min.js                                                                    //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/*!\n DataTables 1.10.18\n ©2008-2018 SpryMedia Ltd - datatables.net/license\n*/\n(function(h){\"function\"===typeof define&&define.amd?define([\"jquery\"],function(E){return h(E,window,document)}):\"object\"===typeof exports?module.exports=function(E,H){E||(E=window);H||(H=\"undefined\"!==typeof window?require(\"jquery\"):require(\"jquery\")(E));return h(H,E,E.document)}:h(jQuery,window,document)})(function(h,E,H,k){function Z(a){var b,c,d={};h.each(a,function(e){if((b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!==\"a aa ai ao as b fn i m o s \".indexOf(b[1]+\" \"))c=e.replace(b[0],b[2].toLowerCase()),\nd[c]=e,\"o\"===b[1]&&Z(a[e])});a._hungarianMap=d}function J(a,b,c){a._hungarianMap||Z(a);var d;h.each(b,function(e){d=a._hungarianMap[e];if(d!==k&&(c||b[d]===k))\"o\"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),J(a[d],b[d],c)):b[d]=b[e]})}function Ca(a){var b=n.defaults.oLanguage,c=b.sDecimal;c&&Da(c);if(a){var d=a.sZeroRecords;!a.sEmptyTable&&(d&&\"No data available in table\"===b.sEmptyTable)&&F(a,a,\"sZeroRecords\",\"sEmptyTable\");!a.sLoadingRecords&&(d&&\"Loading...\"===b.sLoadingRecords)&&F(a,\na,\"sZeroRecords\",\"sLoadingRecords\");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&c!==a&&Da(a)}}function eb(a){A(a,\"ordering\",\"bSort\");A(a,\"orderMulti\",\"bSortMulti\");A(a,\"orderClasses\",\"bSortClasses\");A(a,\"orderCellsTop\",\"bSortCellsTop\");A(a,\"order\",\"aaSorting\");A(a,\"orderFixed\",\"aaSortingFixed\");A(a,\"paging\",\"bPaginate\");A(a,\"pagingType\",\"sPaginationType\");A(a,\"pageLength\",\"iDisplayLength\");A(a,\"searching\",\"bFilter\");\"boolean\"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?\"100%\":\n\"\");\"boolean\"===typeof a.scrollX&&(a.scrollX=a.scrollX?\"100%\":\"\");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&J(n.models.oSearch,a[b])}function fb(a){A(a,\"orderable\",\"bSortable\");A(a,\"orderData\",\"aDataSort\");A(a,\"orderSequence\",\"asSorting\");A(a,\"orderDataType\",\"sortDataType\");var b=a.aDataSort;\"number\"===typeof b&&!h.isArray(b)&&(a.aDataSort=[b])}function gb(a){if(!n.__browser){var b={};n.__browser=b;var c=h(\"<div/>\").css({position:\"fixed\",top:0,left:-1*h(E).scrollLeft(),height:1,width:1,\noverflow:\"hidden\"}).append(h(\"<div/>\").css({position:\"absolute\",top:1,left:1,width:100,overflow:\"scroll\"}).append(h(\"<div/>\").css({width:\"100%\",height:10}))).appendTo(\"body\"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(e.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}h.extend(a.oBrowser,n.__browser);a.oScroll.iBarWidth=n.__browser.barWidth}\nfunction hb(a,b,c,d,e,f){var g,j=!1;c!==k&&(g=c,j=!0);for(;d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Ea(a,b){var c=n.defaults.column,d=a.aoColumns.length,c=h.extend({},n.models.oColumn,c,{nTh:b?b:H.createElement(\"th\"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:\"\",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=h.extend({},n.models.oSearch,c[d]);ka(a,d,h(b).data())}function ka(a,b,c){var b=a.aoColumns[b],\nd=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr(\"width\")||null;var f=(e.attr(\"style\")||\"\").match(/width:\\s*(\\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(fb(c),J(n.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&e.addClass(c.sClass),h.extend(b,c),F(b,c,\"sWidth\",\"sWidthOrig\"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),F(b,c,\"aDataSort\"));var g=b.mData,j=S(g),i=b.mRender?\nS(b.mRender):null,c=function(a){return\"string\"===typeof a&&-1!==a.indexOf(\"@\")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d};b.fnSetData=function(a,b,c){return N(g)(a,b,c)};\"number\"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));a=-1!==h.inArray(\"asc\",b.asSorting);c=-1!==h.inArray(\"desc\",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=d.sSortableNone,\nb.sSortingClassJUI=\"\"):a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI)}function $(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Fa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(\"\"!==b.sY||\"\"!==b.sX)&&la(a);r(a,null,\"column-sizing\",[a])}function aa(a,b){var c=ma(a,\"bVisible\");return\"number\"===\ntypeof c[b]?c[b]:null}function ba(a,b){var c=ma(a,\"bVisible\"),c=h.inArray(b,c);return-1!==c?c:null}function V(a){var b=0;h.each(a.aoColumns,function(a,d){d.bVisible&&\"none\"!==h(d.nTh).css(\"display\")&&b++});return b}function ma(a,b){var c=[];h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Ga(a){var b=a.aoColumns,c=a.aoData,d=n.ext.type.detect,e,f,g,j,i,h,l,q,t;e=0;for(f=b.length;e<f;e++)if(l=b[e],t=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){g=0;for(j=d.length;g<\nj;g++){i=0;for(h=c.length;i<h;i++){t[i]===k&&(t[i]=B(a,i,e,\"type\"));q=d[g](t[i],a);if(!q&&g!==d.length-1)break;if(\"html\"===q)break}if(q){l.sType=q;break}}l.sType||(l.sType=\"string\")}}function ib(a,b,c,d){var e,f,g,j,i,m,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){m=b[e];var q=m.targets!==k?m.targets:m.aTargets;h.isArray(q)||(q=[q]);f=0;for(g=q.length;f<g;f++)if(\"number\"===typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Ea(a);d(q[f],m)}else if(\"number\"===typeof q[f]&&0>q[f])d(l.length+q[f],m);else if(\"string\"===\ntypeof q[f]){j=0;for(i=l.length;j<i;j++)(\"_all\"==q[f]||h(l[j].nTh).hasClass(q[f]))&&d(j,m)}}if(c){e=0;for(a=c.length;e<a;e++)d(e,c[e])}}function O(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},n.models.oRow,{src:c?\"dom\":\"data\",idx:e});f._aData=b;a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;a.aiDisplayMaster.push(e);b=a.rowIdFn(b);b!==k&&(a.aIds[b]=f);(c||!a.oFeatures.bDeferRender)&&Ha(a,e,c,d);return e}function na(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,\ne){c=Ia(a,e);return O(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(K(a,0,\"Requested unknown parameter \"+(\"function\"==typeof f.mData?\"{function}\":\"'\"+f.mData+\"'\")+\" for row \"+b+\", column \"+c,4),a.iDrawError=e),j;if((i===g||null===i)&&null!==j&&d!==k)i=j;else if(\"function\"===typeof i)return i.call(g);return null===i&&\"display\"==d?\"\":i}function jb(a,\nb,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Ja(a){return h.map(a.match(/(\\\\.|[^\\.])+/g)||[\"\"],function(a){return a.replace(/\\\\\\./g,\".\")})}function S(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=S(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if(\"function\"===typeof a)return function(b,c,f,g){return a(b,c,f,g)};if(\"string\"===typeof a&&(-1!==a.indexOf(\".\")||-1!==a.indexOf(\"[\")||\n-1!==a.indexOf(\"(\"))){var c=function(a,b,f){var g,j;if(\"\"!==f){j=Ja(f);for(var i=0,m=j.length;i<m;i++){f=j[i].match(ca);g=j[i].match(W);if(f){j[i]=j[i].replace(ca,\"\");\"\"!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(\".\");if(h.isArray(a)){i=0;for(m=a.length;i<m;i++)g.push(c(a[i],b,j))}a=f[0].substring(1,f[0].length-1);a=\"\"===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(W,\"\");a=a[j[i]]();continue}if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}\nfunction N(a){if(h.isPlainObject(a))return N(a._);if(null===a)return function(){};if(\"function\"===typeof a)return function(b,d,e){a(b,\"set\",d,e)};if(\"string\"===typeof a&&(-1!==a.indexOf(\".\")||-1!==a.indexOf(\"[\")||-1!==a.indexOf(\"(\"))){var b=function(a,d,e){var e=Ja(e),f;f=e[e.length-1];for(var g,j,i=0,m=e.length-1;i<m;i++){g=e[i].match(ca);j=e[i].match(W);if(g){e[i]=e[i].replace(ca,\"\");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(\".\");if(h.isArray(d)){j=0;for(m=d.length;j<m;j++)f={},b(f,d[j],g),\na[e[i]].push(f)}else a[e[i]]=d;return}j&&(e[i]=e[i].replace(W,\"\"),a=a[e[i]](d));if(null===a[e[i]]||a[e[i]]===k)a[e[i]]={};a=a[e[i]]}if(f.match(W))a[f.replace(W,\"\")](d);else a[f.replace(ca,\"\")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ka(a){return D(a.aoData,\"_aData\")}function oa(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function pa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===k&&a.splice(d,\n1)}function da(a,b,c,d){var e=a.aoData[b],f,g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=B(a,b,d,\"display\")};if(\"dom\"===c||(!c||\"auto\"===c)&&\"dom\"===e.src)e._aData=Ia(a,e,d,d===k?k:e._aData).data;else{var j=e.anCells;if(j)if(d!==k)g(j[d],d);else{c=0;for(f=j.length;c<f;c++)g(j[c],c)}}e._aSortData=null;e._aFilterData=null;g=a.aoColumns;if(d!==k)g[d].sType=null;else{c=0;for(f=g.length;c<f;c++)g[c].sType=null;La(a,e)}}function Ia(a,b,c,d){var e=[],f=b.firstChild,g,\nj,i=0,m,l=a.aoColumns,q=a._rowReadObject,d=d!==k?d:q?{}:[],t=function(a,b){if(\"string\"===typeof a){var c=a.indexOf(\"@\");-1!==c&&(c=a.substring(c+1),N(a)(d,b.getAttribute(c)))}},G=function(a){if(c===k||c===i)j=l[i],m=h.trim(a.innerHTML),j&&j._bAttrSrc?(N(j.mData._)(d,m),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=N(j.mData)),j._setter(d,m)):d[i]=m;i++};if(f)for(;f;){g=f.nodeName.toUpperCase();if(\"TD\"==g||\"TH\"==g)G(f),e.push(f);f=f.nextSibling}else{e=b.anCells;\nf=0;for(g=e.length;f<g;f++)G(e[f])}if(b=b.firstChild?b:b.nTr)(b=b.getAttribute(\"id\"))&&N(a.rowId)(d,b);return{data:d,cells:e}}function Ha(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],j,i,m,l,q;if(null===e.nTr){j=c||H.createElement(\"tr\");e.nTr=j;e.anCells=g;j._DT_RowIndex=b;La(a,e);l=0;for(q=a.aoColumns.length;l<q;l++){m=a.aoColumns[l];i=c?d[l]:H.createElement(m.sCellType);i._DT_CellIndex={row:b,column:l};g.push(i);if((!c||m.mRender||m.mData!==l)&&(!h.isPlainObject(m.mData)||m.mData._!==l+\".display\"))i.innerHTML=\nB(a,b,l,\"display\");m.sClass&&(i.className+=\" \"+m.sClass);m.bVisible&&!c?j.appendChild(i):!m.bVisible&&c&&i.parentNode.removeChild(i);m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l)}r(a,\"aoRowCreatedCallback\",null,[j,f,b,g])}e.nTr.setAttribute(\"role\",\"row\")}function La(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e);d.DT_RowClass&&(e=d.DT_RowClass.split(\" \"),b.__rowc=b.__rowc?qa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(\" \")).addClass(d.DT_RowClass));\nd.DT_RowAttr&&h(c).attr(d.DT_RowAttr);d.DT_RowData&&h(c).data(d.DT_RowData)}}function kb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h(\"th, td\",g).length,m=a.oClasses,l=a.aoColumns;i&&(e=h(\"<tr/>\").appendTo(g));b=0;for(c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr(\"tabindex\",a.iTabIndex).attr(\"aria-controls\",a.sTableId),Ma(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Na(a,\"header\")(a,d,\nf,m);i&&ea(a.aoHeader,g);h(g).find(\">tr\").attr(\"role\",\"row\");h(g).find(\">tr>th, >tr>td\").addClass(m.sHeaderTH);h(j).find(\">tr>th, >tr>td\").addClass(m.sFooterTH);if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=l[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function fa(a,b,c){var d,e,f,g=[],j=[],i=a.aoColumns.length,m;if(b){c===k&&(c=!1);d=0;for(e=b.length;d<e;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}d=\n0;for(e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[d].length;f<b;f++)if(m=i=1,j[d][f]===k){a.appendChild(g[d][f].cell);for(j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+m]!==k&&g[d][f].cell==g[d][f+m].cell;){for(c=0;c<i;c++)j[d+c][f+m]=1;m++}h(g[d][f].cell).attr(\"rowspan\",i).attr(\"colspan\",m)}}}}function P(a){var b=r(a,\"aoPreDrawCallback\",\"preDraw\",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{var b=[],c=0,d=a.asStripeClasses,e=\nd.length,f=a.oLanguage,g=a.iInitDisplayStart,j=\"ssp\"==y(a),i=a.aiDisplay;a.bDrawing=!0;g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);var g=a._iDisplayStart,m=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!lb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:m;for(j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];null===q.nTr&&Ha(a,l);var t=q.nTr;if(0!==e){var G=d[c%e];q._sRowStripe!=G&&(h(t).removeClass(q._sRowStripe).addClass(G),\nq._sRowStripe=G)}r(a,\"aoRowCallback\",null,[t,q._aData,c,j,l]);b.push(t);c++}}else c=f.sZeroRecords,1==a.iDraw&&\"ajax\"==y(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h(\"<tr/>\",{\"class\":e?d[0]:\"\"}).append(h(\"<td />\",{valign:\"top\",colSpan:V(a),\"class\":a.oClasses.sRowEmpty}).html(c))[0];r(a,\"aoHeaderCallback\",\"header\",[h(a.nTHead).children(\"tr\")[0],Ka(a),g,m,i]);r(a,\"aoFooterCallback\",\"footer\",[h(a.nTFoot).children(\"tr\")[0],Ka(a),g,m,i]);d=h(a.nTBody);d.children().detach();\nd.append(h(b));r(a,\"aoDrawCallback\",\"draw\",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function T(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&mb(a);d?ga(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;P(a);a._drawHold=!1}function nb(a){var b=a.oClasses,c=h(a.nTable),c=h(\"<div/>\").insertBefore(c),d=a.oFeatures,e=h(\"<div/>\",{id:a.sTableId+\"_wrapper\",\"class\":b.sWrapper+(a.nTFoot?\"\":\" \"+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=\na.nTable.nextSibling;for(var f=a.sDom.split(\"\"),g,j,i,m,l,q,k=0;k<f.length;k++){g=null;j=f[k];if(\"<\"==j){i=h(\"<div/>\")[0];m=f[k+1];if(\"'\"==m||'\"'==m){l=\"\";for(q=2;f[k+q]!=m;)l+=f[k+q],q++;\"H\"==l?l=b.sJUIHeader:\"F\"==l&&(l=b.sJUIFooter);-1!=l.indexOf(\".\")?(m=l.split(\".\"),i.id=m[0].substr(1,m[0].length-1),i.className=m[1]):\"#\"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l;k+=q}e.append(i);e=h(i)}else if(\">\"==j)e=e.parent();else if(\"l\"==j&&d.bPaginate&&d.bLengthChange)g=ob(a);else if(\"f\"==j&&\nd.bFilter)g=pb(a);else if(\"r\"==j&&d.bProcessing)g=qb(a);else if(\"t\"==j)g=rb(a);else if(\"i\"==j&&d.bInfo)g=sb(a);else if(\"p\"==j&&d.bPaginate)g=tb(a);else if(0!==n.ext.feature.length){i=n.ext.feature;q=0;for(m=i.length;q<m;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e);a.nHolding=null}function ea(a,b){var c=h(b).children(\"tr\"),d,e,f,g,j,i,m,l,q,k;a.splice(0,a.length);f=0;for(i=c.length;f<i;f++)a.push([]);f=0;for(i=c.length;f<\ni;f++){d=c[f];for(e=d.firstChild;e;){if(\"TD\"==e.nodeName.toUpperCase()||\"TH\"==e.nodeName.toUpperCase()){l=1*e.getAttribute(\"colspan\");q=1*e.getAttribute(\"rowspan\");l=!l||0===l||1===l?1:l;q=!q||0===q||1===q?1:q;g=0;for(j=a[f];j[g];)g++;m=g;k=1===l?!0:!1;for(j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][m+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}}function ra(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],ea(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!d[f]||\n!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function sa(a,b,c){r(a,\"aoServerParams\",\"serverParams\",[b]);if(b&&h.isArray(b)){var d={},e=/(.*?)\\[\\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){r(a,null,\"xhr\",[a,b,a.jqXHR]);c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var m=\"function\"===typeof f?f(b,a):f,b=\"function\"===typeof f&&m?m:h.extend(!0,b,m);delete g.data}m={data:b,success:function(b){var c=\nb.error||b.sError;c&&K(a,0,c);a.json=b;i(b)},dataType:\"json\",cache:!1,type:a.sServerMethod,error:function(b,c){var d=r(a,null,\"xhr\",[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&(\"parsererror\"==c?K(a,0,\"Invalid JSON response\",1):4===b.readyState&&K(a,0,\"Ajax error\",7));C(a,!1)}};a.oAjaxData=b;r(a,null,\"preXhr\",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||\"string\"===typeof g?a.jqXHR=h.ajax(h.extend(m,{url:g||a.sAjaxSource})):\n\"function\"===typeof g?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(m,g)),g.data=f)}function lb(a){return a.bAjaxDataGet?(a.iDraw++,C(a,!0),sa(a,ub(a),function(b){vb(a,b)}),!1):!0}function ub(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,m,l,k=X(a);g=a._iDisplayStart;i=!1!==d.bPaginate?a._iDisplayLength:-1;var t=function(a,b){j.push({name:a,value:b})};t(\"sEcho\",a.iDraw);t(\"iColumns\",c);t(\"sColumns\",D(b,\"sName\").join(\",\"));t(\"iDisplayStart\",g);t(\"iDisplayLength\",\ni);var G={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)m=b[g],l=f[g],i=\"function\"==typeof m.mData?\"function\":m.mData,G.columns.push({data:i,name:m.sName,searchable:m.bSearchable,orderable:m.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),t(\"mDataProp_\"+g,i),d.bFilter&&(t(\"sSearch_\"+g,l.sSearch),t(\"bRegex_\"+g,l.bRegex),t(\"bSearchable_\"+g,m.bSearchable)),d.bSort&&t(\"bSortable_\"+g,m.bSortable);d.bFilter&&(t(\"sSearch\",e.sSearch),t(\"bRegex\",\ne.bRegex));d.bSort&&(h.each(k,function(a,b){G.order.push({column:b.col,dir:b.dir});t(\"iSortCol_\"+a,b.col);t(\"sSortDir_\"+a,b.dir)}),t(\"iSortingCols\",k.length));b=n.ext.legacy.ajax;return null===b?a.sAjaxSource?j:G:b?j:G}function vb(a,b){var c=ta(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}oa(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(f,\n10);d=0;for(e=c.length;d<e;d++)O(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;P(a);a._bInitComplete||ua(a,b);a.bAjaxDataGet=!0;C(a,!1)}function ta(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return\"data\"===c?b.aaData||b[c]:\"\"!==c?S(c)(b):b}function pb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type=\"search\" class=\"'+b.sFilterInput+'\"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace(\"_INPUT_\",\ng):j+g,b=h(\"<div/>\",{id:!f.f?c+\"_filter\":null,\"class\":b.sFilter}).append(h(\"<label/>\").append(j)),f=function(){var b=!this.value?\"\":this.value;b!=e.sSearch&&(ga(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,P(a))},g=null!==a.searchDelay?a.searchDelay:\"ssp\"===y(a)?400:0,i=h(\"input\",b).val(e.sSearch).attr(\"placeholder\",d.sSearchPlaceholder).on(\"keyup.DT search.DT input.DT paste.DT cut.DT\",g?Oa(f,g):f).on(\"keypress.DT\",function(a){if(13==a.keyCode)return!1}).attr(\"aria-controls\",\nc);h(a.nTable).on(\"search.dt.DT\",function(b,c){if(a===c)try{i[0]!==H.activeElement&&i.val(e.sSearch)}catch(d){}});return b[0]}function ga(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};Ga(a);if(\"ssp\"!=y(a)){wb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)xb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,\ne[b].bSmart,e[b].bCaseInsensitive);yb(a)}else f(b);a.bFiltered=!0;r(a,null,\"search\",[a])}function yb(a){for(var b=n.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var j=[],i=0,m=c.length;i<m;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0;h.merge(c,j)}}function xb(a,b,c,d,e,f){if(\"\"!==b){for(var g=[],j=a.aiDisplay,d=Pa(b,d,e,f),e=0;e<j.length;e++)b=a.aoData[j[e]]._aFilterData[c],d.test(b)&&g.push(j[e]);a.aiDisplay=g}}function wb(a,b,c,d,e,f){var d=Pa(b,\nd,e,f),f=a.oPreviousSearch.sSearch,g=a.aiDisplayMaster,j,e=[];0!==n.ext.search.length&&(c=!0);j=zb(a);if(0>=b.length)a.aiDisplay=g.slice();else{if(j||c||f.length>b.length||0!==b.indexOf(f)||a.bSorted)a.aiDisplay=g.slice();b=a.aiDisplay;for(c=0;c<b.length;c++)d.test(a.aoData[b[c]]._sFilterRow)&&e.push(b[c]);a.aiDisplay=e}}function Pa(a,b,c,d){a=b?a:Qa(a);c&&(a=\"^(?=.*?\"+h.map(a.match(/\"[^\"]+\"|[^ ]+/g)||[\"\"],function(a){if('\"'===a.charAt(0))var b=a.match(/^\"(.*)\"$/),a=b?b[1]:a;return a.replace('\"',\n\"\")}).join(\")(?=.*?\")+\").*$\");return RegExp(a,d?\"i\":\"\")}function zb(a){var b=a.aoColumns,c,d,e,f,g,j,i,h,l=n.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<f;d++)if(h=a.aoData[d],!h._aFilterData){j=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=B(a,d,e,\"filter\"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=\"\"),\"string\"!==typeof i&&i.toString&&(i=i.toString())):i=\"\",i.indexOf&&-1!==i.indexOf(\"&\")&&(va.innerHTML=i,i=Wb?va.textContent:va.innerText),i.replace&&(i=i.replace(/[\\r\\n]/g,\"\")),j.push(i);\nh._aFilterData=j;h._sFilterRow=j.join(\"  \");c=!0}return c}function Ab(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Bb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function sb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h(\"<div/>\",{\"class\":a.oClasses.sInfo,id:!c?b+\"_info\":null});c||(a.aoDrawCallback.push({fn:Cb,sName:\"information\"}),d.attr(\"role\",\"status\").attr(\"aria-live\",\"polite\"),h(a.nTable).attr(\"aria-describedby\",\nb+\"_info\"));return d[0]}function Cb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=\" \"+c.sInfoFiltered);j+=c.sInfoPostFix;j=Db(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j));h(b).html(j)}}function Db(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,\nc.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ha(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){nb(a);kb(a);fa(a,a.aoHeader);fa(a,a.aoFooter);C(a,!0);c.bAutoWidth&&Fa(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&(f.nTh.style.width=v(f.sWidth));r(a,null,\"preInit\",[a]);T(a);e=\ny(a);if(\"ssp\"!=e||g)\"ajax\"==e?sa(a,[],function(c){var f=ta(a,c);for(b=0;b<f.length;b++)O(a,f[b]);a.iInitDisplayStart=d;T(a);C(a,!1);ua(a,c)},a):(C(a,!1),ua(a))}else setTimeout(function(){ha(a)},200)}function ua(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&$(a);r(a,null,\"plugin-init\",[a,b]);r(a,\"aoInitComplete\",\"init\",[a,b])}function Ra(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Sa(a);r(a,null,\"length\",[a,c])}function ob(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=\ne?d[0]:d,d=e?d[1]:d,e=h(\"<select/>\",{name:c+\"_length\",\"aria-controls\":c,\"class\":b.sLengthSelect}),g=0,j=f.length;g<j;g++)e[0][g]=new Option(\"number\"===typeof d[g]?a.fnFormatNumber(d[g]):d[g],f[g]);var i=h(\"<div><label/></div>\").addClass(b.sLength);a.aanFeatures.l||(i[0].id=c+\"_length\");i.children().append(a.oLanguage.sLengthMenu.replace(\"_MENU_\",e[0].outerHTML));h(\"select\",i).val(a._iDisplayLength).on(\"change.DT\",function(){Ra(a,h(this).val());P(a)});h(a.nTable).on(\"length.dt.DT\",function(b,c,d){a===\nc&&h(\"select\",i).val(d)});return i[0]}function tb(a){var b=a.sPaginationType,c=n.ext.pager[b],d=\"function\"===typeof c,e=function(a){P(a)},b=h(\"<div/>\").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;d||c.fnInit(a,b,e);f.p||(b.id=a.sTableId+\"_paginate\",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=-1===i,b=l?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),k,l=0;for(k=f.p.length;l<k;l++)Na(a,\"pageButton\")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,\ne)},sName:\"pagination\"}));return b}function Ta(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:\"number\"===typeof b?(d=b*e,d>f&&(d=0)):\"first\"==b?d=0:\"previous\"==b?(d=0<=e?d-e:0,0>d&&(d=0)):\"next\"==b?d+e<f&&(d+=e):\"last\"==b?d=Math.floor((f-1)/e)*e:K(a,0,\"Unknown paging action: \"+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(r(a,null,\"page\",[a]),c&&P(a));return b}function qb(a){return h(\"<div/>\",{id:!a.aanFeatures.r?a.sTableId+\"_processing\":null,\"class\":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}\nfunction C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css(\"display\",b?\"block\":\"none\");r(a,null,\"processing\",[a,b])}function rb(a){var b=h(a.nTable);b.attr(\"role\",\"grid\");var c=a.oScroll;if(\"\"===c.sX&&\"\"===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children(\"caption\"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),m=h(b[0].cloneNode(!1)),l=b.children(\"tfoot\");l.length||(l=null);i=h(\"<div/>\",{\"class\":f.sScrollWrapper}).append(h(\"<div/>\",{\"class\":f.sScrollHead}).css({overflow:\"hidden\",\nposition:\"relative\",border:0,width:d?!d?null:v(d):\"100%\"}).append(h(\"<div/>\",{\"class\":f.sScrollHeadInner}).css({\"box-sizing\":\"content-box\",width:c.sXInner||\"100%\"}).append(i.removeAttr(\"id\").css(\"margin-left\",0).append(\"top\"===j?g:null).append(b.children(\"thead\"))))).append(h(\"<div/>\",{\"class\":f.sScrollBody}).css({position:\"relative\",overflow:\"auto\",width:!d?null:v(d)}).append(b));l&&i.append(h(\"<div/>\",{\"class\":f.sScrollFoot}).css({overflow:\"hidden\",border:0,width:d?!d?null:v(d):\"100%\"}).append(h(\"<div/>\",\n{\"class\":f.sScrollFootInner}).append(m.removeAttr(\"id\").css(\"margin-left\",0).append(\"bottom\"===j?g:null).append(b.children(\"tfoot\")))));var b=i.children(),k=b[0],f=b[1],t=l?b[2]:null;if(d)h(f).on(\"scroll.DT\",function(){var a=this.scrollLeft;k.scrollLeft=a;l&&(t.scrollLeft=a)});h(f).css(e&&c.bCollapse?\"max-height\":\"height\",e);a.nScrollHead=k;a.nScrollBody=f;a.nScrollFoot=t;a.aoDrawCallback.push({fn:la,sName:\"scrolling\"});return i[0]}function la(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,\nf=h(a.nScrollHead),g=f[0].style,j=f.children(\"div\"),i=j[0].style,m=j.children(\"table\"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children(\"div\"),n=t.children(\"table\"),o=h(a.nTHead),p=h(a.nTable),s=p[0],r=s.style,u=a.nTFoot?h(a.nTFoot):null,x=a.oBrowser,U=x.bScrollOversize,Xb=D(a.aoColumns,\"nTh\"),Q,L,R,w,Ua=[],y=[],z=[],A=[],B,C=function(a){a=a.style;a.paddingTop=\"0\";a.paddingBottom=\"0\";a.borderTopWidth=\"0\";a.borderBottomWidth=\"0\";a.height=0};L=j.scrollHeight>j.clientHeight;if(a.scrollBarVis!==\nL&&a.scrollBarVis!==k)a.scrollBarVis=L,$(a);else{a.scrollBarVis=L;p.children(\"thead, tfoot\").remove();u&&(R=u.clone().prependTo(p),Q=u.find(\"tr\"),R=R.find(\"tr\"));w=o.clone().prependTo(p);o=o.find(\"tr\");L=w.find(\"tr\");w.find(\"th, td\").removeAttr(\"tabindex\");c||(q.width=\"100%\",f[0].style.width=\"100%\");h.each(ra(a,w),function(b,c){B=aa(a,b);c.style.width=a.aoColumns[B].sWidth});u&&I(function(a){a.style.width=\"\"},R);f=p.outerWidth();if(\"\"===c){r.width=\"100%\";if(U&&(p.find(\"tbody\").height()>j.offsetHeight||\n\"scroll\"==l.css(\"overflow-y\")))r.width=v(p.outerWidth()-b);f=p.outerWidth()}else\"\"!==d&&(r.width=v(d),f=p.outerWidth());I(C,L);I(function(a){z.push(a.innerHTML);Ua.push(v(h(a).css(\"width\")))},L);I(function(a,b){if(h.inArray(a,Xb)!==-1)a.style.width=Ua[b]},o);h(L).height(0);u&&(I(C,R),I(function(a){A.push(a.innerHTML);y.push(v(h(a).css(\"width\")))},R),I(function(a,b){a.style.width=y[b]},Q),h(R).height(0));I(function(a,b){a.innerHTML='<div class=\"dataTables_sizing\">'+z[b]+\"</div>\";a.childNodes[0].style.height=\n\"0\";a.childNodes[0].style.overflow=\"hidden\";a.style.width=Ua[b]},L);u&&I(function(a,b){a.innerHTML='<div class=\"dataTables_sizing\">'+A[b]+\"</div>\";a.childNodes[0].style.height=\"0\";a.childNodes[0].style.overflow=\"hidden\";a.style.width=y[b]},R);if(p.outerWidth()<f){Q=j.scrollHeight>j.offsetHeight||\"scroll\"==l.css(\"overflow-y\")?f+b:f;if(U&&(j.scrollHeight>j.offsetHeight||\"scroll\"==l.css(\"overflow-y\")))r.width=v(Q-b);(\"\"===c||\"\"!==d)&&K(a,1,\"Possible column misalignment\",6)}else Q=\"100%\";q.width=v(Q);\ng.width=v(Q);u&&(a.nScrollFoot.style.width=v(Q));!e&&U&&(q.height=v(s.offsetHeight+b));c=p.outerWidth();m[0].style.width=v(c);i.width=v(c);d=p.height()>j.clientHeight||\"scroll\"==l.css(\"overflow-y\");e=\"padding\"+(x.bScrollbarLeft?\"Left\":\"Right\");i[e]=d?b+\"px\":\"0px\";u&&(n[0].style.width=v(c),t[0].style.width=v(c),t[0].style[e]=d?b+\"px\":\"0px\");p.children(\"colgroup\").insertBefore(p.children(\"thead\"));l.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)j.scrollTop=0}}function I(a,b,c){for(var d=0,e=0,\nf=b.length,g,j;e<f;){g=b[e].firstChild;for(j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Fa(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,j=c.length,i=ma(a,\"bVisible\"),m=h(\"th\",a.nTHead),l=b.getAttribute(\"width\"),k=b.parentNode,t=!1,n,o,p=a.oBrowser,d=p.bScrollOversize;(n=b.style.width)&&-1!==n.indexOf(\"%\")&&(l=n);for(n=0;n<i.length;n++)o=c[i[n]],null!==o.sWidth&&(o.sWidth=Eb(o.sWidthOrig,k),t=!0);if(d||\n!t&&!f&&!e&&j==V(a)&&j==m.length)for(n=0;n<j;n++)i=aa(a,n),null!==i&&(c[i].sWidth=v(m.eq(n).width()));else{j=h(b).clone().css(\"visibility\",\"hidden\").removeAttr(\"id\");j.find(\"tbody tr\").remove();var s=h(\"<tr/>\").appendTo(j.find(\"tbody\"));j.find(\"thead, tfoot\").remove();j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone());j.find(\"tfoot th, tfoot td\").css(\"width\",\"\");m=ra(a,j.find(\"thead\")[0]);for(n=0;n<i.length;n++)o=c[i[n]],m[n].style.width=null!==o.sWidthOrig&&\"\"!==o.sWidthOrig?v(o.sWidthOrig):\n\"\",o.sWidthOrig&&f&&h(m[n]).append(h(\"<div/>\").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(n=0;n<i.length;n++)t=i[n],o=c[t],h(Fb(a,t)).clone(!1).append(o.sContentPadding).appendTo(s);h(\"[name]\",j).removeAttr(\"name\");o=h(\"<div/>\").css(f||e?{position:\"absolute\",top:0,left:0,height:1,right:0,overflow:\"hidden\"}:{}).append(j).appendTo(k);f&&g?j.width(g):f?(j.css(\"width\",\"auto\"),j.removeAttr(\"width\"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):\nl&&j.width(l);for(n=e=0;n<i.length;n++)k=h(m[n]),g=k.outerWidth()-k.width(),k=p.bBounding?Math.ceil(m[n].getBoundingClientRect().width):k.outerWidth(),e+=k,c[i[n]].sWidth=v(k-g);b.style.width=v(e);o.remove()}l&&(b.style.width=v(l));if((l||f)&&!a._reszEvt)b=function(){h(E).on(\"resize.DT-\"+a.sInstance,Oa(function(){$(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0}function Eb(a,b){if(!a)return 0;var c=h(\"<div/>\").css(\"width\",v(a)).appendTo(b||H.body),d=c[0].offsetWidth;c.remove();return d}function Fb(a,\nb){var c=Gb(a,b);if(0>c)return null;var d=a.aoData[c];return!d.nTr?h(\"<td/>\").html(B(a,c,b,\"display\"))[0]:d.anCells[b]}function Gb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=B(a,f,b,\"display\")+\"\",c=c.replace(Yb,\"\"),c=c.replace(/&nbsp;/g,\" \"),c.length>d&&(d=c.length,e=f);return e}function v(a){return null===a?\"0px\":\"number\"==typeof a?0>a?\"0px\":a+\"px\":a.match(/\\d$/)?a+\"px\":a}function X(a){var b,c,d=[],e=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var m=[];f=function(a){a.length&&\n!h.isArray(a[0])?m.push(a):h.merge(m,a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<m.length;a++){i=m[a][0];f=e[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=e[g].sType||\"string\",m[a]._idx===k&&(m[a]._idx=h.inArray(m[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:m[a][1],index:m[a]._idx,type:j,formatter:n.ext.type.order[j+\"-pre\"]})}return d}function mb(a){var b,c,d=[],e=n.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;Ga(a);h=X(a);b=0;for(c=h.length;b<\nc;b++)j=h[b],j.formatter&&g++,Hb(a,j.col);if(\"ssp\"!=y(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,n=f[b]._aSortData;for(g=0;g<i;g++)if(j=h[g],c=k[j.col],e=n[j.col],c=c<e?-1:c>e?1:0,0!==c)return\"asc\"===j.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,n=f[a]._aSortData,o=f[b]._aSortData;for(j=0;j<k;j++)if(i=h[j],c=n[i.col],g=o[i.col],i=e[i.type+\"-\"+i.dir]||e[\"string-\"+i.dir],\nc=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Ib(a){for(var b,c,d=a.aoColumns,e=X(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,\"\");var i=c.nTh;i.removeAttribute(\"aria-sort\");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute(\"aria-sort\",\"asc\"==e[0].dir?\"ascending\":\"descending\"),c=j[e[0].index+1]||j[0]):c=j[0],b+=\"asc\"===c?a.sSortAscending:a.sSortDescending);i.setAttribute(\"aria-label\",b)}}function Va(a,\nb,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===k&&(c=h.inArray(a[1],f));return c+1<f.length?c+1:b?null:0};\"number\"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,D(e,\"0\")),-1!==c?(b=g(e[c],!0),null===b&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0);T(a);\"function\"==\ntypeof d&&d(a)}function Ma(a,b,c,d){var e=a.aoColumns[c];Wa(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Va(a,c,b.shiftKey,d);\"ssp\"!==y(a)&&C(a,!1)},0)):Va(a,c,b.shiftKey,d))})}function wa(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=X(a),e=a.oFeatures,f,g;if(e.bSort&&e.bSortClasses){e=0;for(f=b.length;e<f;e++)g=b[e].src,h(D(a.aoData,\"anCells\",g)).removeClass(c+(2>e?e+1:3));e=0;for(f=d.length;e<f;e++)g=d[e].src,h(D(a.aoData,\"anCells\",g)).addClass(c+\n(2>e?e+1:3))}a.aLastSort=d}function Hb(a,b){var c=a.aoColumns[b],d=n.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,ba(a,b)));for(var f,g=n.ext.type.order[c.sType+\"-pre\"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[j]:B(a,j,b,\"sort\"),c._aSortData[b]=g?g(f):f}function xa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:Ab(a.oPreviousSearch),\ncolumns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:Ab(a.aoPreSearchCols[d])}})};r(a,\"aoStateSaveParams\",\"stateSaveParams\",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Jb(a,b,c){var d,e,f=a.aoColumns,b=function(b){if(b&&b.time){var g=r(a,\"aoStateLoadParams\",\"stateLoadParams\",[a,b]);if(-1===h.inArray(!1,g)&&(g=a.iStateDuration,!(0<g&&b.time<+new Date-1E3*g)&&!(b.columns&&f.length!==b.columns.length))){a.oLoadedState=h.extend(!0,{},b);b.start!==k&&\n(a._iDisplayStart=b.start,a.iInitDisplayStart=b.start);b.length!==k&&(a._iDisplayLength=b.length);b.order!==k&&(a.aaSorting=[],h.each(b.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)}));b.search!==k&&h.extend(a.oPreviousSearch,Bb(b.search));if(b.columns){d=0;for(e=b.columns.length;d<e;d++)g=b.columns[d],g.visible!==k&&(f[d].bVisible=g.visible),g.search!==k&&h.extend(a.aoPreSearchCols[d],Bb(g.search))}r(a,\"aoStateLoaded\",\"stateLoaded\",[a,b])}}c()};if(a.oFeatures.bStateSave){var g=\na.fnStateLoadCallback.call(a.oInstance,a,b);g!==k&&b(g)}else c()}function ya(a){var b=n.settings,a=h.inArray(a,D(b,\"nTable\"));return-1!==a?b[a]:null}function K(a,b,c,d){c=\"DataTables warning: \"+(a?\"table id=\"+a.sTableId+\" - \":\"\")+c;d&&(c+=\". For more information about this error, please see http://datatables.net/tn/\"+d);if(b)E.console&&console.log&&console.log(c);else if(b=n.ext,b=b.sErrMode||b.errMode,a&&r(a,null,\"error\",[a,d,c]),\"alert\"==b)alert(c);else{if(\"throw\"==b)throw Error(c);\"function\"==\ntypeof b&&b(a,d,c)}}function F(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?F(a,b,d[0],d[1]):F(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Xa(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&\"data\"!==e&&\"aaData\"!==e&&h.isArray(d)?d.slice():d);return a}function Wa(a,b,c){h(a).on(\"click.DT\",b,function(b){h(a).blur();c(b)}).on(\"keypress.DT\",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).on(\"selectstart.DT\",\nfunction(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function r(a,b,c,d){var e=[];b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)}));null!==c&&(b=h.Event(c+\".dt\"),h(a.nTable).trigger(b,d),e.push(b.result));return e}function Sa(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function Na(a,b){var c=a.renderer,d=n.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:\"string\"===\ntypeof c?d[c]||d._:d._}function y(a){return a.oFeatures.bServerSide?\"ssp\":a.ajax||a.sAjaxSource?\"ajax\":\"dom\"}function ia(a,b){var c=[],c=Kb.numbers_length,d=Math.floor(c/2);b<=c?c=Y(0,b):a<=d?(c=Y(0,c-2),c.push(\"ellipsis\"),c.push(b-1)):(a>=b-1-d?c=Y(b-(c-2),b):(c=Y(a-d+2,a+d-1),c.push(\"ellipsis\"),c.push(b-1)),c.splice(0,0,\"ellipsis\"),c.splice(0,0,0));c.DT_el=\"span\";return c}function Da(a){h.each({num:function(b){return za(b,a)},\"num-fmt\":function(b){return za(b,a,Ya)},\"html-num\":function(b){return za(b,\na,Aa)},\"html-num-fmt\":function(b){return za(b,a,Aa,Ya)}},function(b,c){x.type.order[b+a+\"-pre\"]=c;b.match(/^html\\-/)&&(x.type.search[b+a]=x.type.search.html)})}function Lb(a){return function(){var b=[ya(this[n.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return n.ext.internal[a].apply(this,b)}}var n=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new s(ya(this[x.iApiIndex])):new s(this)};\nthis.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===k||b)&&c.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):(\"\"!==d.sX||\"\"!==d.sY)&&la(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,\nb,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===k||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0);null===b||b===k?e.search(a,c,d,h):e.column(b).search(a,c,d,h);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==k){var d=a.nodeName?a.nodeName.toLowerCase():\"\";return b!==k||\"td\"==d||\"th\"==d?c.cell(a,b).data():\nc.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return\"TR\"==c?b.row(a).index():\"TD\"==c||\"TH\"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};\nthis.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===k||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return ya(this[x.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===k||e)&&h.columns.adjust();\n(d===k||d)&&h.draw();return 0};this.fnVersionCheck=x.fnVersionCheck;var b=this,c=a===k,d=this.length;c&&(a={});this.oApi=this.internal=x.internal;for(var e in n.ext.internal)e&&(this[e]=Lb(e));this.each(function(){var e={},g=1<d?Xa(e,a,!0):a,j=0,i,e=this.getAttribute(\"id\"),m=!1,l=n.defaults,q=h(this);if(\"table\"!=this.nodeName.toLowerCase())K(null,0,\"Non-table node initialisation (\"+this.nodeName+\")\",2);else{eb(l);fb(l.column);J(l,l,!0);J(l.column,l.column,!0);J(l,h.extend(g,q.data()));var t=n.settings,\nj=0;for(i=t.length;j<i;j++){var o=t[j];if(o.nTable==this||o.nTHead&&o.nTHead.parentNode==this||o.nTFoot&&o.nTFoot.parentNode==this){var s=g.bRetrieve!==k?g.bRetrieve:l.bRetrieve;if(c||s)return o.oInstance;if(g.bDestroy!==k?g.bDestroy:l.bDestroy){o.oInstance.fnDestroy();break}else{K(o,0,\"Cannot reinitialise DataTable\",3);return}}if(o.sTableId==this.id){t.splice(j,1);break}}if(null===e||\"\"===e)this.id=e=\"DataTables_Table_\"+n.ext._unique++;var p=h.extend(!0,{},n.models.oSettings,{sDestroyWidth:q[0].style.width,\nsInstance:e,sTableId:e});p.nTable=this;p.oApi=b.internal;p.oInit=g;t.push(p);p.oInstance=1===b.length?b:q.dataTable();eb(g);Ca(g.oLanguage);g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]);g=Xa(h.extend(!0,{},l),g);F(p.oFeatures,g,\"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender\".split(\" \"));F(p,g,[\"asStripeClasses\",\"ajax\",\"fnServerData\",\"fnFormatNumber\",\"sServerMethod\",\n\"aaSorting\",\"aaSortingFixed\",\"aLengthMenu\",\"sPaginationType\",\"sAjaxSource\",\"sAjaxDataProp\",\"iStateDuration\",\"sDom\",\"bSortCellsTop\",\"iTabIndex\",\"fnStateLoadCallback\",\"fnStateSaveCallback\",\"renderer\",\"searchDelay\",\"rowId\",[\"iCookieDuration\",\"iStateDuration\"],[\"oSearch\",\"oPreviousSearch\"],[\"aoSearchCols\",\"aoPreSearchCols\"],[\"iDisplayLength\",\"_iDisplayLength\"]]);F(p.oScroll,g,[[\"sScrollX\",\"sX\"],[\"sScrollXInner\",\"sXInner\"],[\"sScrollY\",\"sY\"],[\"bScrollCollapse\",\"bCollapse\"]]);F(p.oLanguage,g,\"fnInfoCallback\");\nz(p,\"aoDrawCallback\",g.fnDrawCallback,\"user\");z(p,\"aoServerParams\",g.fnServerParams,\"user\");z(p,\"aoStateSaveParams\",g.fnStateSaveParams,\"user\");z(p,\"aoStateLoadParams\",g.fnStateLoadParams,\"user\");z(p,\"aoStateLoaded\",g.fnStateLoaded,\"user\");z(p,\"aoRowCallback\",g.fnRowCallback,\"user\");z(p,\"aoRowCreatedCallback\",g.fnCreatedRow,\"user\");z(p,\"aoHeaderCallback\",g.fnHeaderCallback,\"user\");z(p,\"aoFooterCallback\",g.fnFooterCallback,\"user\");z(p,\"aoInitComplete\",g.fnInitComplete,\"user\");z(p,\"aoPreDrawCallback\",\ng.fnPreDrawCallback,\"user\");p.rowIdFn=S(g.rowId);gb(p);var u=p.oClasses;h.extend(u,n.ext.classes,g.oClasses);q.addClass(u.sTable);p.iInitDisplayStart===k&&(p.iInitDisplayStart=g.iDisplayStart,p._iDisplayStart=g.iDisplayStart);null!==g.iDeferLoading&&(p.bDeferLoading=!0,e=h.isArray(g.iDeferLoading),p._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,p._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var v=p.oLanguage;h.extend(!0,v,g.oLanguage);v.sUrl&&(h.ajax({dataType:\"json\",url:v.sUrl,success:function(a){Ca(a);\nJ(l.oLanguage,a);h.extend(true,v,a);ha(p)},error:function(){ha(p)}}),m=!0);null===g.asStripeClasses&&(p.asStripeClasses=[u.sStripeOdd,u.sStripeEven]);var e=p.asStripeClasses,x=q.children(\"tbody\").find(\"tr\").eq(0);-1!==h.inArray(!0,h.map(e,function(a){return x.hasClass(a)}))&&(h(\"tbody tr\",this).removeClass(e.join(\" \")),p.asDestroyStripes=e.slice());e=[];t=this.getElementsByTagName(\"thead\");0!==t.length&&(ea(p.aoHeader,t[0]),e=ra(p));if(null===g.aoColumns){t=[];j=0;for(i=e.length;j<i;j++)t.push(null)}else t=\ng.aoColumns;j=0;for(i=t.length;j<i;j++)Ea(p,e?e[j]:null);ib(p,g.aoColumnDefs,t,function(a,b){ka(p,a,b)});if(x.length){var w=function(a,b){return a.getAttribute(\"data-\"+b)!==null?b:null};h(x[0]).children(\"th, td\").each(function(a,b){var c=p.aoColumns[a];if(c.mData===a){var d=w(b,\"sort\")||w(b,\"order\"),e=w(b,\"filter\")||w(b,\"search\");if(d!==null||e!==null){c.mData={_:a+\".display\",sort:d!==null?a+\".@data-\"+d:k,type:d!==null?a+\".@data-\"+d:k,filter:e!==null?a+\".@data-\"+e:k};ka(p,a)}}})}var U=p.oFeatures,\ne=function(){if(g.aaSorting===k){var a=p.aaSorting;j=0;for(i=a.length;j<i;j++)a[j][1]=p.aoColumns[j].asSorting[0]}wa(p);U.bSort&&z(p,\"aoDrawCallback\",function(){if(p.bSorted){var a=X(p),b={};h.each(a,function(a,c){b[c.src]=c.dir});r(p,null,\"order\",[p,a,b]);Ib(p)}});z(p,\"aoDrawCallback\",function(){(p.bSorted||y(p)===\"ssp\"||U.bDeferRender)&&wa(p)},\"sc\");var a=q.children(\"caption\").each(function(){this._captionSide=h(this).css(\"caption-side\")}),b=q.children(\"thead\");b.length===0&&(b=h(\"<thead/>\").appendTo(q));\np.nTHead=b[0];b=q.children(\"tbody\");b.length===0&&(b=h(\"<tbody/>\").appendTo(q));p.nTBody=b[0];b=q.children(\"tfoot\");if(b.length===0&&a.length>0&&(p.oScroll.sX!==\"\"||p.oScroll.sY!==\"\"))b=h(\"<tfoot/>\").appendTo(q);if(b.length===0||b.children().length===0)q.addClass(u.sNoFooter);else if(b.length>0){p.nTFoot=b[0];ea(p.aoFooter,p.nTFoot)}if(g.aaData)for(j=0;j<g.aaData.length;j++)O(p,g.aaData[j]);else(p.bDeferLoading||y(p)==\"dom\")&&na(p,h(p.nTBody).children(\"tr\"));p.aiDisplay=p.aiDisplayMaster.slice();\np.bInitialised=true;m===false&&ha(p)};g.bStateSave?(U.bStateSave=!0,z(p,\"aoDrawCallback\",xa,\"state_save\"),Jb(p,g,e)):e()}});b=null;return this},x,s,o,u,Za={},Mb=/[\\r\\n]/g,Aa=/<.*?>/g,Zb=/^\\d{2,4}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{1,2}([T ]{1}\\d{1,2}[:\\.]\\d{2}([\\.:]\\d{2})?)?$/,$b=RegExp(\"(\\\\/|\\\\.|\\\\*|\\\\+|\\\\?|\\\\||\\\\(|\\\\)|\\\\[|\\\\]|\\\\{|\\\\}|\\\\\\\\|\\\\$|\\\\^|\\\\-)\",\"g\"),Ya=/[',$£€¥%\\u2009\\u202F\\u20BD\\u20a9\\u20BArfkɃΞ]/gi,M=function(a){return!a||!0===a||\"-\"===a?!0:!1},Nb=function(a){var b=parseInt(a,10);return!isNaN(b)&&\nisFinite(a)?b:null},Ob=function(a,b){Za[b]||(Za[b]=RegExp(Qa(b),\"g\"));return\"string\"===typeof a&&\".\"!==b?a.replace(/\\./g,\"\").replace(Za[b],\".\"):a},$a=function(a,b,c){var d=\"string\"===typeof a;if(M(a))return!0;b&&d&&(a=Ob(a,b));c&&d&&(a=a.replace(Ya,\"\"));return!isNaN(parseFloat(a))&&isFinite(a)},Pb=function(a,b,c){return M(a)?!0:!(M(a)||\"string\"===typeof a)?null:$a(a.replace(Aa,\"\"),b,c)?!0:null},D=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<\nf;e++)a[e]&&d.push(a[e][b]);return d},ja=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},Y=function(a,b){var c=[],d;b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Qb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},qa=function(a){var b;a:{if(!(2>a.length)){b=a.slice().sort();for(var c=b[0],d=1,e=b.length;d<e;d++){if(b[d]===c){b=!1;break a}c=b[d]}}b=!0}if(b)return a.slice();\nb=[];var e=a.length,f,g=0,d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b};n.util={throttle:function(a,b){var c=b!==k?b:200,d,e;return function(){var b=this,g=+new Date,j=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=k;a.apply(b,j)},c)):(d=g,a.apply(b,j))}},escapeRegex:function(a){return a.replace($b,\"\\\\$1\")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ca=/\\[.*?\\]$/,W=/\\(\\)$/,Qa=n.util.escapeRegex,va=h(\"<div>\")[0],Wb=va.textContent!==k,Yb=\n/<.*?>/g,Oa=n.util.throttle,Rb=[],w=Array.prototype,ac=function(a){var b,c,d=n.settings,e=h.map(d,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&\"table\"===a.nodeName.toLowerCase())return b=h.inArray(a,e),-1!==b?[d[b]]:null;if(a&&\"function\"===typeof a.settings)return a.settings().toArray();\"string\"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,e);return-1!==b?d[b]:null}).toArray()};s=function(a,b){if(!(this instanceof\ns))return new s(a,b);var c=[],d=function(a){(a=ac(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=qa(c);b&&h.merge(this,b);this.selector={rows:null,cols:null,opts:null};s.extend(this,this,Rb)};n.Api=s;h.extend(s.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=\nthis.context;return b.length>a?new s(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new s(this.context,b)},flatten:function(){var a=[];return new s(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var e=[],f,g,j,h,m,l=this.context,\nn,o,u=this.selector;\"string\"===typeof a&&(d=c,c=b,b=a,a=!1);g=0;for(j=l.length;g<j;g++){var r=new s(l[g]);if(\"table\"===b)f=c.call(r,l[g],g),f!==k&&e.push(f);else if(\"columns\"===b||\"rows\"===b)f=c.call(r,l[g],this[g],g),f!==k&&e.push(f);else if(\"column\"===b||\"column-rows\"===b||\"row\"===b||\"cell\"===b){o=this[g];\"column-rows\"===b&&(n=Ba(l[g],u.opts));h=0;for(m=o.length;h<m;h++)f=o[h],f=\"cell\"===b?c.call(r,l[g],f.row,f.column,g,h):c.call(r,l[g],f,g,h,n),f!==k&&e.push(f)}}return e.length||d?(a=new s(l,a?\ne.concat.apply([],e):e),b=a.selector,b.rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new s(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return hb(this,a,b,0,this.length,\n1)},reduceRight:w.reduceRight||function(a,b){return hb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,slice:function(){return new s(this.context,this)},sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new s(this.context,qa(this))},unshift:w.unshift});s.extend=function(a,b,c){if(c.length&&b&&(b instanceof s||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=\nb.apply(a,arguments);s.extend(d,d,c.methodExt);return d}};d=0;for(e=c.length;d<e;d++)f=c[d],b[f.name]=\"function\"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,s.extend(a,b[f.name],f.propExt)}};s.register=o=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<d;c++)s.register(a[c],b);else for(var e=a.split(\".\"),f=Rb,g,j,c=0,d=e.length;c<d;c++){g=(j=-1!==e[c].indexOf(\"()\"))?e[c].replace(\"()\",\"\"):e[c];var i;a:{i=0;for(var m=f.length;i<m;i++)if(f[i].name===g){i=\nf[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===d-1?i.val=b:f=j?i.methodExt:i.propExt}};s.registerPlural=u=function(a,b,c){s.register(a,c);s.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof s?a.length?h.isArray(a[0])?new s(a.context,a[0]):a[0]:k:a})};o(\"tables()\",function(a){var b;if(a){b=s;var c=this.context;if(\"number\"===typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,\nd);return c[a]}).toArray();b=new b(a)}else b=this;return b});o(\"table()\",function(a){var a=this.tables(a),b=a.context;return b.length?new s(b[0]):a});u(\"tables().nodes()\",\"table().node()\",function(){return this.iterator(\"table\",function(a){return a.nTable},1)});u(\"tables().body()\",\"table().body()\",function(){return this.iterator(\"table\",function(a){return a.nTBody},1)});u(\"tables().header()\",\"table().header()\",function(){return this.iterator(\"table\",function(a){return a.nTHead},1)});u(\"tables().footer()\",\n\"table().footer()\",function(){return this.iterator(\"table\",function(a){return a.nTFoot},1)});u(\"tables().containers()\",\"table().container()\",function(){return this.iterator(\"table\",function(a){return a.nTableWrapper},1)});o(\"draw()\",function(a){return this.iterator(\"table\",function(b){\"page\"===a?P(b):(\"string\"===typeof a&&(a=\"full-hold\"===a?!1:!0),T(b,!1===a))})});o(\"page()\",function(a){return a===k?this.page.info().page:this.iterator(\"table\",function(b){Ta(b,a)})});o(\"page.info()\",function(){if(0===\nthis.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,serverSide:\"ssp\"===y(a)}});o(\"page.len()\",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator(\"table\",function(b){Ra(b,a)})});var Sb=function(a,b,c){if(c){var d=new s(a);\nd.one(\"draw\",function(){c(d.ajax.json())})}if(\"ssp\"==y(a))T(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort();sa(a,[],function(c){oa(a);for(var c=ta(a,c),d=0,e=c.length;d<e;d++)O(a,c[d]);T(a,b);C(a,!1)})}};o(\"ajax.json()\",function(){var a=this.context;if(0<a.length)return a[0].json});o(\"ajax.params()\",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});o(\"ajax.reload()\",function(a,b){return this.iterator(\"table\",function(c){Sb(c,!1===b,a)})});o(\"ajax.url()\",function(a){var b=\nthis.context;if(a===k){if(0===b.length)return k;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator(\"table\",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});o(\"ajax.url().load()\",function(a,b){return this.iterator(\"table\",function(c){Sb(c,!1===b,a)})});var ab=function(a,b,c,d,e){var f=[],g,j,i,m,l,n;i=typeof b;if(!b||\"string\"===i||\"function\"===i||b.length===k)b=[b];i=0;for(m=b.length;i<m;i++){j=b[i]&&b[i].split&&!b[i].match(/[\\[\\(:]/)?b[i].split(\",\"):\n[b[i]];l=0;for(n=j.length;l<n;l++)(g=c(\"string\"===typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g))}a=x.selector[a];if(a.length){i=0;for(m=a.length;i<m;i++)f=a[i](d,e,f)}return qa(f)},bb=function(a){a||(a={});a.filter&&a.search===k&&(a.search=a.filter);return h.extend({search:\"none\",order:\"current\",page:\"all\"},a)},cb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ba=function(a,b){var c,\nd,e,f=[],g=a.aiDisplay;e=a.aiDisplayMaster;var j=b.search;c=b.order;d=b.page;if(\"ssp\"==y(a))return\"removed\"===j?[]:Y(0,e.length);if(\"current\"==d){c=a._iDisplayStart;for(d=a.fnDisplayEnd();c<d;c++)f.push(g[c])}else if(\"current\"==c||\"applied\"==c)if(\"none\"==j)f=e.slice();else if(\"applied\"==j)f=g.slice();else{if(\"removed\"==j){var i={};c=0;for(d=g.length;c<d;c++)i[g[c]]=null;f=h.map(e,function(a){return!i.hasOwnProperty(a)?a:null})}}else if(\"index\"==c||\"original\"==c){c=0;for(d=a.aoData.length;c<d;c++)\"none\"==\nj?f.push(c):(e=h.inArray(c,g),(-1===e&&\"removed\"==j||0<=e&&\"applied\"==j)&&f.push(c))}return f};o(\"rows()\",function(a,b){a===k?a=\"\":h.isPlainObject(a)&&(b=a,a=\"\");var b=bb(b),c=this.iterator(\"table\",function(c){var e=b,f;return ab(\"row\",a,function(a){var b=Nb(a),i=c.aoData;if(b!==null&&!e)return[b];f||(f=Ba(c,e));if(b!==null&&h.inArray(b,f)!==-1)return[b];if(a===null||a===k||a===\"\")return f;if(typeof a===\"function\")return h.map(f,function(b){var c=i[b];return a(b,c._aData,c.nTr)?b:null});if(a.nodeName){var b=\na._DT_RowIndex,m=a._DT_CellIndex;if(b!==k)return i[b]&&i[b].nTr===a?[b]:[];if(m)return i[m.row]&&i[m.row].nTr===a?[m.row]:[];b=h(a).closest(\"*[data-dt-row]\");return b.length?[b.data(\"dt-row\")]:[]}if(typeof a===\"string\"&&a.charAt(0)===\"#\"){b=c.aIds[a.replace(/^#/,\"\")];if(b!==k)return[b.idx]}b=Qb(ja(c.aoData,f,\"nTr\"));return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);c.selector.rows=a;c.selector.opts=b;return c});o(\"rows().nodes()\",function(){return this.iterator(\"row\",\nfunction(a,b){return a.aoData[b].nTr||k},1)});o(\"rows().data()\",function(){return this.iterator(!0,\"rows\",function(a,b){return ja(a.aoData,b,\"_aData\")},1)});u(\"rows().cache()\",\"row().cache()\",function(a){return this.iterator(\"row\",function(b,c){var d=b.aoData[c];return\"search\"===a?d._aFilterData:d._aSortData},1)});u(\"rows().invalidate()\",\"row().invalidate()\",function(a){return this.iterator(\"row\",function(b,c){da(b,c,a)})});u(\"rows().indexes()\",\"row().index()\",function(){return this.iterator(\"row\",\nfunction(a,b){return b},1)});u(\"rows().ids()\",\"row().id()\",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?\"#\":\"\")+h)}return new s(c,b)});u(\"rows().remove()\",\"row().remove()\",function(){var a=this;this.iterator(\"row\",function(b,c,d){var e=b.aoData,f=e[c],g,h,i,m,l;e.splice(c,1);g=0;for(h=e.length;g<h;g++)if(i=e[g],l=i.anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l){i=0;for(m=\nl.length;i<m;i++)l[i]._DT_CellIndex.row=g}pa(b.aiDisplayMaster,c);pa(b.aiDisplay,c);pa(a[d],c,!1);0<b._iRecordsDisplay&&b._iRecordsDisplay--;Sa(b);c=b.rowIdFn(f._aData);c!==k&&delete b.aIds[c]});this.iterator(\"table\",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c});return this});o(\"rows.add()\",function(a){var b=this.iterator(\"table\",function(b){var c,f,g,h=[];f=0;for(g=a.length;f<g;f++)c=a[f],c.nodeName&&\"TR\"===c.nodeName.toUpperCase()?h.push(na(b,c)[0]):h.push(O(b,c));return h},\n1),c=this.rows(-1);c.pop();h.merge(c,b);return c});o(\"row()\",function(a,b){return cb(this.rows(a,b))});o(\"row().data()\",function(a){var b=this.context;if(a===k)return b.length&&this.length?b[0].aoData[this[0]]._aData:k;var c=b[0].aoData[this[0]];c._aData=a;h.isArray(a)&&c.nTr.id&&N(b[0].rowId)(a,c.nTr.id);da(b[0],this[0],\"data\");return this});o(\"row().node()\",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});o(\"row.add()\",function(a){a instanceof h&&\na.length&&(a=a[0]);var b=this.iterator(\"table\",function(b){return a.nodeName&&\"TR\"===a.nodeName.toUpperCase()?na(b,a)[0]:O(b,a)});return this.row(b[0])});var db=function(a,b){var c=a.context;if(c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details)c._details.remove(),c._detailsShow=k,c._details=k},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new s(e),g=e.aoData;f.off(\"draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details\");\n0<D(g,\"_details\").length&&(f.on(\"draw.dt.DT_details\",function(a,b){e===b&&f.rows({page:\"current\"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on(\"column-visibility.dt.DT_details\",function(a,b){if(e===b)for(var c,d=V(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children(\"td[colspan]\").attr(\"colspan\",d)}),f.on(\"destroy.dt.DT_details\",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&db(f,c)}))}}};o(\"row().child()\",function(a,b){var c=\nthis.context;if(a===k)return c.length&&this.length?c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)db(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&\"tr\"===a.nodeName.toLowerCase()?e.push(a):(c=h(\"<tr><td/></tr>\").addClass(b),h(\"td\",c).addClass(b).html(a)[0].colSpan=V(d),e.push(c[0]))};f(a,b);c._details&&c._details.detach();c._details=h(e);\nc._detailsShow&&c._details.insertAfter(c.nTr)}return this});o([\"row().child.show()\",\"row().child().show()\"],function(){Tb(this,!0);return this});o([\"row().child.hide()\",\"row().child().hide()\"],function(){Tb(this,!1);return this});o([\"row().child.remove()\",\"row().child().remove()\"],function(){db(this);return this});o(\"row().child.isShown()\",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var bc=/^([^:]+):(name|visIdx|visible)$/,Ub=function(a,b,\nc,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(B(a,e[d],b));return c};o(\"columns()\",function(a,b){a===k?a=\"\":h.isPlainObject(a)&&(b=a,a=\"\");var b=bb(b),c=this.iterator(\"table\",function(c){var e=a,f=b,g=c.aoColumns,j=D(g,\"sName\"),i=D(g,\"nTh\");return ab(\"column\",e,function(a){var b=Nb(a);if(a===\"\")return Y(g.length);if(b!==null)return[b>=0?b:g.length+b];if(typeof a===\"function\"){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Ub(c,f,0,0,e),i[f])?f:null})}var k=typeof a===\"string\"?a.match(bc):\n\"\";if(k)switch(k[2]){case \"visIdx\":case \"visible\":b=parseInt(k[1],10);if(b<0){var n=h.map(g,function(a,b){return a.bVisible?b:null});return[n[n.length+b]]}return[aa(c,b)];case \"name\":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}if(a.nodeName&&a._DT_CellIndex)return[a._DT_CellIndex.column];b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray();if(b.length||!a.nodeName)return b;b=h(a).closest(\"*[data-dt-column]\");return b.length?[b.data(\"dt-column\")]:[]},c,f)},\n1);c.selector.cols=a;c.selector.opts=b;return c});u(\"columns().header()\",\"column().header()\",function(){return this.iterator(\"column\",function(a,b){return a.aoColumns[b].nTh},1)});u(\"columns().footer()\",\"column().footer()\",function(){return this.iterator(\"column\",function(a,b){return a.aoColumns[b].nTf},1)});u(\"columns().data()\",\"column().data()\",function(){return this.iterator(\"column-rows\",Ub,1)});u(\"columns().dataSrc()\",\"column().dataSrc()\",function(){return this.iterator(\"column\",function(a,b){return a.aoColumns[b].mData},\n1)});u(\"columns().cache()\",\"column().cache()\",function(a){return this.iterator(\"column-rows\",function(b,c,d,e,f){return ja(b.aoData,f,\"search\"===a?\"_aFilterData\":\"_aSortData\",c)},1)});u(\"columns().nodes()\",\"column().nodes()\",function(){return this.iterator(\"column-rows\",function(a,b,c,d,e){return ja(a.aoData,e,\"anCells\",b)},1)});u(\"columns().visible()\",\"column().visible()\",function(a,b){var c=this.iterator(\"column\",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var f=b.aoColumns,g=f[c],j=b.aoData,\ni,m,l;if(a!==k&&g.bVisible!==a){if(a){var n=h.inArray(!0,D(f,\"bVisible\"),c+1);i=0;for(m=j.length;i<m;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[n]||null)}else h(D(b.aoData,\"anCells\",c)).detach();g.bVisible=a;fa(b,b.aoHeader);fa(b,b.aoFooter);b.aiDisplay.length||h(b.nTBody).find(\"td[colspan]\").attr(\"colspan\",V(b));xa(b)}});a!==k&&(this.iterator(\"column\",function(c,e){r(c,null,\"column-visibility\",[c,e,a,b])}),(b===k||b)&&this.columns.adjust());return c});u(\"columns().indexes()\",\"column().index()\",\nfunction(a){return this.iterator(\"column\",function(b,c){return\"visible\"===a?ba(b,c):c},1)});o(\"columns.adjust()\",function(){return this.iterator(\"table\",function(a){$(a)},1)});o(\"column.index()\",function(a,b){if(0!==this.context.length){var c=this.context[0];if(\"fromVisible\"===a||\"toData\"===a)return aa(c,b);if(\"fromData\"===a||\"toVisible\"===a)return ba(c,b)}});o(\"column()\",function(a,b){return cb(this.columns(a,b))});o(\"cells()\",function(a,b,c){h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null));\nh.isPlainObject(b)&&(c=b,b=null);if(null===b||b===k)return this.iterator(\"table\",function(b){var d=a,e=bb(c),f=b.aoData,g=Ba(b,e),j=Qb(ja(f,g,\"anCells\")),i=h([].concat.apply([],j)),l,m=b.aoColumns.length,n,o,u,s,r,v;return ab(\"cell\",d,function(a){var c=typeof a===\"function\";if(a===null||a===k||c){n=[];o=0;for(u=g.length;o<u;o++){l=g[o];for(s=0;s<m;s++){r={row:l,column:s};if(c){v=f[l];a(r,B(b,l,s),v.anCells?v.anCells[s]:null)&&n.push(r)}else n.push(r)}}return n}if(h.isPlainObject(a))return a.column!==\nk&&a.row!==k&&h.inArray(a.row,g)!==-1?[a]:[];c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();if(c.length||!a.nodeName)return c;v=h(a).closest(\"*[data-dt-row]\");return v.length?[{row:v.data(\"dt-row\"),column:v.data(\"dt-column\")}]:[]},b,e)});var d=this.columns(b),e=this.rows(a),f,g,j,i,m;this.iterator(\"table\",function(a,b){f=[];g=0;for(j=e[b].length;g<j;g++){i=0;for(m=d[b].length;i<m;i++)f.push({row:e[b][g],column:d[b][i]})}},1);var l=this.cells(f,\nc);h.extend(l.selector,{cols:b,rows:a,opts:c});return l});u(\"cells().nodes()\",\"cell().node()\",function(){return this.iterator(\"cell\",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:k},1)});o(\"cells().data()\",function(){return this.iterator(\"cell\",function(a,b,c){return B(a,b,c)},1)});u(\"cells().cache()\",\"cell().cache()\",function(a){a=\"search\"===a?\"_aFilterData\":\"_aSortData\";return this.iterator(\"cell\",function(b,c,d){return b.aoData[c][a][d]},1)});u(\"cells().render()\",\"cell().render()\",\nfunction(a){return this.iterator(\"cell\",function(b,c,d){return B(b,c,d,a)},1)});u(\"cells().indexes()\",\"cell().index()\",function(){return this.iterator(\"cell\",function(a,b,c){return{row:b,column:c,columnVisible:ba(a,c)}},1)});u(\"cells().invalidate()\",\"cell().invalidate()\",function(a){return this.iterator(\"cell\",function(b,c,d){da(b,c,a,d)})});o(\"cell()\",function(a,b,c){return cb(this.cells(a,b,c))});o(\"cell().data()\",function(a){var b=this.context,c=this[0];if(a===k)return b.length&&c.length?B(b[0],\nc[0].row,c[0].column):k;jb(b[0],c[0].row,c[0].column,a);da(b[0],c[0].row,\"data\",c[0].column);return this});o(\"order()\",function(a,b){var c=this.context;if(a===k)return 0!==c.length?c[0].aaSorting:k;\"number\"===typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator(\"table\",function(b){b.aaSorting=a.slice()})});o(\"order.listener()\",function(a,b,c){return this.iterator(\"table\",function(d){Ma(d,a,b,c)})});o(\"order.fixed()\",function(a){if(!a){var b=\nthis.context,b=b.length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}return this.iterator(\"table\",function(b){b.aaSortingFixed=h.extend(!0,{},a)})});o([\"columns().order()\",\"column().order()\"],function(a){var b=this;return this.iterator(\"table\",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});o(\"search()\",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator(\"table\",function(e){e.oFeatures.bFilter&&ga(e,\nh.extend({},e.oPreviousSearch,{sSearch:a+\"\",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});u(\"columns().search()\",\"column().search()\",function(a,b,c,d){return this.iterator(\"column\",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+\"\",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ga(e,e.oPreviousSearch,1))})});o(\"state()\",function(){return this.context.length?this.context[0].oSavedState:\nnull});o(\"state.clear()\",function(){return this.iterator(\"table\",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});o(\"state.loaded()\",function(){return this.context.length?this.context[0].oLoadedState:null});o(\"state.save()\",function(){return this.iterator(\"table\",function(a){xa(a)})});n.versionCheck=n.fnVersionCheck=function(a){for(var b=n.version.split(\".\"),a=a.split(\".\"),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};n.isDataTable=\nn.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;if(a instanceof n.Api)return!0;h.each(n.settings,function(a,e){var f=e.nScrollHead?h(\"table\",e.nScrollHead)[0]:null,g=e.nScrollFoot?h(\"table\",e.nScrollFoot)[0]:null;if(e.nTable===b||f===b||g===b)c=!0});return c};n.tables=n.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(n.settings,function(b){if(!a||a&&h(b.nTable).is(\":visible\"))return b.nTable});return b?new s(c):c};n.camelToHungarian=J;o(\"$()\",function(a,b){var c=\nthis.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each([\"on\",\"one\",\"off\"],function(a,b){o(b+\"()\",function(){var a=Array.prototype.slice.call(arguments);a[0]=h.map(a[0].split(/\\s/),function(a){return!a.match(/\\.dt\\b/)?a+\".dt\":a}).join(\" \");var d=h(this.tables().nodes());d[b].apply(d,a);return this})});o(\"clear()\",function(){return this.iterator(\"table\",function(a){oa(a)})});o(\"settings()\",function(){return new s(this.context,this.context)});o(\"init()\",function(){var a=\nthis.context;return a.length?a[0].oInit:null});o(\"data()\",function(){return this.iterator(\"table\",function(a){return D(a.aoData,\"_aData\")}).flatten()});o(\"destroy()\",function(a){a=a||!1;return this.iterator(\"table\",function(b){var c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),k=h(b.nTableWrapper),l=h.map(b.aoData,function(a){return a.nTr}),o;b.bDestroying=!0;r(b,\"aoDestroyCallback\",\"destroy\",[b]);a||(new s(b)).columns().visible(!0);k.off(\".DT\").find(\":not(tbody *)\").off(\".DT\");\nh(E).off(\".DT-\"+b.sInstance);e!=g.parentNode&&(i.children(\"thead\").detach(),i.append(g));j&&e!=j.parentNode&&(i.children(\"tfoot\").detach(),i.append(j));b.aaSorting=[];b.aaSortingFixed=[];wa(b);h(l).removeClass(b.asStripeClasses.join(\" \"));h(\"th, td\",g).removeClass(d.sSortable+\" \"+d.sSortableAsc+\" \"+d.sSortableDesc+\" \"+d.sSortableNone);f.children().detach();f.append(l);g=a?\"remove\":\"detach\";i[g]();k[g]();!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css(\"width\",b.sDestroyWidth).removeClass(d.sTable),\n(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])}));c=h.inArray(b,n.settings);-1!==c&&n.settings.splice(c,1)})});h.each([\"column\",\"row\",\"cell\"],function(a,b){o(b+\"s().every()\",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,m){a.call(e[b](g,\"cell\"===b?h:d,\"cell\"===b?d:k),g,h,i,m)})})});o(\"i18n()\",function(a,b,c){var d=this.context[0],a=S(a)(d.oLanguage);a===k&&(a=b);c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:\na._);return a.replace(\"%d\",c)});n.version=\"1.10.18\";n.settings=[];n.models={};n.models.oSearch={bCaseInsensitive:!0,sSearch:\"\",bRegex:!1,bSmart:!0};n.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:\"\",src:null,idx:-1};n.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,\nsClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:\"std\",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};n.defaults={aaData:null,aaSorting:[[0,\"asc\"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,\nbSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem(\"DataTables_\"+\na.sInstance+\"_\"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem(\"DataTables_\"+a.sInstance+\"_\"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:\": activate to sort column ascending\",sSortDescending:\": activate to sort column descending\"},\noPaginate:{sFirst:\"First\",sLast:\"Last\",sNext:\"Next\",sPrevious:\"Previous\"},sEmptyTable:\"No data available in table\",sInfo:\"Showing _START_ to _END_ of _TOTAL_ entries\",sInfoEmpty:\"Showing 0 to 0 of 0 entries\",sInfoFiltered:\"(filtered from _MAX_ total entries)\",sInfoPostFix:\"\",sDecimal:\"\",sThousands:\",\",sLengthMenu:\"Show _MENU_ entries\",sLoadingRecords:\"Loading...\",sProcessing:\"Processing...\",sSearch:\"Search:\",sSearchPlaceholder:\"\",sUrl:\"\",sZeroRecords:\"No matching records found\"},oSearch:h.extend({},\nn.models.oSearch),sAjaxDataProp:\"data\",sAjaxSource:null,sDom:\"lfrtip\",searchDelay:null,sPaginationType:\"simple_numbers\",sScrollX:\"\",sScrollXInner:\"\",sScrollY:\"\",sServerMethod:\"GET\",renderer:null,rowId:\"DT_RowId\"};Z(n.defaults);n.defaults.column={aDataSort:null,iDataSort:-1,asSorting:[\"asc\",\"desc\"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:\"td\",sClass:\"\",sContentPadding:\"\",sDefaultContent:null,sName:\"\",sSortDataType:\"std\",sTitle:null,sType:null,sWidth:null};\nZ(n.defaults.column);n.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],\naoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:\"\",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:\"two_button\",\niStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return\"ssp\"==y(this)?1*this._iRecordsTotal:\nthis.aiDisplayMaster.length},fnRecordsDisplay:function(){return\"ssp\"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};n.ext=x={buttons:{},\nclasses:{},builder:\"-source-\",errMode:\"alert\",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:n.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:n.version};h.extend(x,{afnFiltering:x.search,aTypes:x.type.detect,ofnSearch:x.type.search,oSort:x.type.order,afnSortData:x.order,aoFeatures:x.feature,oApi:x.internal,oStdClasses:x.classes,oPagination:x.pager});\nh.extend(n.ext.classes,{sTable:\"dataTable\",sNoFooter:\"no-footer\",sPageButton:\"paginate_button\",sPageButtonActive:\"current\",sPageButtonDisabled:\"disabled\",sStripeOdd:\"odd\",sStripeEven:\"even\",sRowEmpty:\"dataTables_empty\",sWrapper:\"dataTables_wrapper\",sFilter:\"dataTables_filter\",sInfo:\"dataTables_info\",sPaging:\"dataTables_paginate paging_\",sLength:\"dataTables_length\",sProcessing:\"dataTables_processing\",sSortAsc:\"sorting_asc\",sSortDesc:\"sorting_desc\",sSortable:\"sorting\",sSortableAsc:\"sorting_asc_disabled\",\nsSortableDesc:\"sorting_desc_disabled\",sSortableNone:\"sorting_disabled\",sSortColumn:\"sorting_\",sFilterInput:\"\",sLengthSelect:\"\",sScrollWrapper:\"dataTables_scroll\",sScrollHead:\"dataTables_scrollHead\",sScrollHeadInner:\"dataTables_scrollHeadInner\",sScrollBody:\"dataTables_scrollBody\",sScrollFoot:\"dataTables_scrollFoot\",sScrollFootInner:\"dataTables_scrollFootInner\",sHeaderTH:\"\",sFooterTH:\"\",sSortJUIAsc:\"\",sSortJUIDesc:\"\",sSortJUI:\"\",sSortJUIAscAllowed:\"\",sSortJUIDescAllowed:\"\",sSortJUIWrapper:\"\",sSortIcon:\"\",\nsJUIHeader:\"\",sJUIFooter:\"\"});var Kb=n.ext.pager;h.extend(Kb,{simple:function(){return[\"previous\",\"next\"]},full:function(){return[\"first\",\"previous\",\"next\",\"last\"]},numbers:function(a,b){return[ia(a,b)]},simple_numbers:function(a,b){return[\"previous\",ia(a,b),\"next\"]},full_numbers:function(a,b){return[\"first\",\"previous\",ia(a,b),\"next\",\"last\"]},first_last_numbers:function(a,b){return[\"first\",ia(a,b),\"last\"]},_numbers:ia,numbers_length:7});h.extend(!0,n.ext.renderer,{pageButton:{_:function(a,b,c,d,e,\nf){var g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},m,l,n=0,o=function(b,d){var k,s,u,r,v=function(b){Ta(a,b.data.action,true)};k=0;for(s=d.length;k<s;k++){r=d[k];if(h.isArray(r)){u=h(\"<\"+(r.DT_el||\"div\")+\"/>\").appendTo(b);o(u,r)}else{m=null;l=\"\";switch(r){case \"ellipsis\":b.append('<span class=\"ellipsis\">&#x2026;</span>');break;case \"first\":m=j.sFirst;l=r+(e>0?\"\":\" \"+g.sPageButtonDisabled);break;case \"previous\":m=j.sPrevious;l=r+(e>0?\"\":\" \"+g.sPageButtonDisabled);break;case \"next\":m=\nj.sNext;l=r+(e<f-1?\"\":\" \"+g.sPageButtonDisabled);break;case \"last\":m=j.sLast;l=r+(e<f-1?\"\":\" \"+g.sPageButtonDisabled);break;default:m=r+1;l=e===r?g.sPageButtonActive:\"\"}if(m!==null){u=h(\"<a>\",{\"class\":g.sPageButton+\" \"+l,\"aria-controls\":a.sTableId,\"aria-label\":i[r],\"data-dt-idx\":n,tabindex:a.iTabIndex,id:c===0&&typeof r===\"string\"?a.sTableId+\"_\"+r:null}).html(m).appendTo(b);Wa(u,{action:r},v);n++}}}},s;try{s=h(b).find(H.activeElement).data(\"dt-idx\")}catch(u){}o(h(b).empty(),d);s!==k&&h(b).find(\"[data-dt-idx=\"+\ns+\"]\").focus()}}});h.extend(n.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return $a(a,c)?\"num\"+c:null},function(a){if(a&&!(a instanceof Date)&&!Zb.test(a))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||M(a)?\"date\":null},function(a,b){var c=b.oLanguage.sDecimal;return $a(a,c,!0)?\"num-fmt\"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?\"html-num\"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?\"html-num-fmt\"+c:null},function(a){return M(a)||\n\"string\"===typeof a&&-1!==a.indexOf(\"<\")?\"html\":null}]);h.extend(n.ext.type.search,{html:function(a){return M(a)?a:\"string\"===typeof a?a.replace(Mb,\" \").replace(Aa,\"\"):\"\"},string:function(a){return M(a)?a:\"string\"===typeof a?a.replace(Mb,\" \"):a}});var za=function(a,b,c,d){if(0!==a&&(!a||\"-\"===a))return-Infinity;b&&(a=Ob(a,b));a.replace&&(c&&(a=a.replace(c,\"\")),d&&(a=a.replace(d,\"\")));return 1*a};h.extend(x.type.order,{\"date-pre\":function(a){a=Date.parse(a);return isNaN(a)?-Infinity:a},\"html-pre\":function(a){return M(a)?\n\"\":a.replace?a.replace(/<.*?>/g,\"\").toLowerCase():a+\"\"},\"string-pre\":function(a){return M(a)?\"\":\"string\"===typeof a?a.toLowerCase():!a.toString?\"\":a.toString()},\"string-asc\":function(a,b){return a<b?-1:a>b?1:0},\"string-desc\":function(a,b){return a<b?1:a>b?-1:0}});Da(\"\");h.extend(!0,n.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on(\"order.dt.DT\",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(c.sSortingClass+\" \"+d.sSortAsc+\" \"+d.sSortDesc).addClass(h[e]==\"asc\"?d.sSortAsc:h[e]==\"desc\"?d.sSortDesc:\nc.sSortingClass)}})},jqueryui:function(a,b,c,d){h(\"<div/>\").addClass(d.sSortJUIWrapper).append(b.contents()).append(h(\"<span/>\").addClass(d.sSortIcon+\" \"+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on(\"order.dt.DT\",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(d.sSortAsc+\" \"+d.sSortDesc).addClass(h[e]==\"asc\"?d.sSortAsc:h[e]==\"desc\"?d.sSortDesc:c.sSortingClass);b.find(\"span.\"+d.sSortIcon).removeClass(d.sSortJUIAsc+\" \"+d.sSortJUIDesc+\" \"+d.sSortJUI+\" \"+d.sSortJUIAscAllowed+\" \"+d.sSortJUIDescAllowed).addClass(h[e]==\n\"asc\"?d.sSortJUIAsc:h[e]==\"desc\"?d.sSortJUIDesc:c.sSortingClassJUI)}})}}});var Vb=function(a){return\"string\"===typeof a?a.replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\"):a};n.render={number:function(a,b,c,d,e){return{display:function(f){if(\"number\"!==typeof f&&\"string\"!==typeof f)return f;var g=0>f?\"-\":\"\",h=parseFloat(f);if(isNaN(h))return Vb(f);h=h.toFixed(c);f=Math.abs(h);h=parseInt(f,10);f=c?b+(f-h).toFixed(c).substring(2):\"\";return g+(d||\"\")+h.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\na)+f+(e||\"\")}}},text:function(){return{display:Vb}}};h.extend(n.ext.internal,{_fnExternApiFunc:Lb,_fnBuildAjax:sa,_fnAjaxUpdate:lb,_fnAjaxParameters:ub,_fnAjaxUpdateDraw:vb,_fnAjaxDataSrc:ta,_fnAddColumn:Ea,_fnColumnOptions:ka,_fnAdjustColumnSizing:$,_fnVisibleToColumnIndex:aa,_fnColumnIndexToVisible:ba,_fnVisbleColumns:V,_fnGetColumns:ma,_fnColumnTypes:Ga,_fnApplyColumnDefs:ib,_fnHungarianMap:Z,_fnCamelToHungarian:J,_fnLanguageCompat:Ca,_fnBrowserDetect:gb,_fnAddData:O,_fnAddTr:na,_fnNodeToDataIndex:function(a,\nb){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:jb,_fnSplitObjNotation:Ja,_fnGetObjectDataFn:S,_fnSetObjectDataFn:N,_fnGetDataMaster:Ka,_fnClearTable:oa,_fnDeleteIndex:pa,_fnInvalidate:da,_fnGetRowElements:Ia,_fnCreateTr:Ha,_fnBuildHead:kb,_fnDrawHead:fa,_fnDraw:P,_fnReDraw:T,_fnAddOptionsHtml:nb,_fnDetectHeader:ea,_fnGetUniqueThs:ra,_fnFeatureHtmlFilter:pb,_fnFilterComplete:ga,_fnFilterCustom:yb,\n_fnFilterColumn:xb,_fnFilter:wb,_fnFilterCreateSearch:Pa,_fnEscapeRegex:Qa,_fnFilterData:zb,_fnFeatureHtmlInfo:sb,_fnUpdateInfo:Cb,_fnInfoMacros:Db,_fnInitialise:ha,_fnInitComplete:ua,_fnLengthChange:Ra,_fnFeatureHtmlLength:ob,_fnFeatureHtmlPaginate:tb,_fnPageChange:Ta,_fnFeatureHtmlProcessing:qb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:rb,_fnScrollDraw:la,_fnApplyToChildren:I,_fnCalculateColumnWidths:Fa,_fnThrottle:Oa,_fnConvertToWidth:Eb,_fnGetWidestNode:Fb,_fnGetMaxLenString:Gb,_fnStringToCss:v,\n_fnSortFlatten:X,_fnSort:mb,_fnSortAria:Ib,_fnSortListener:Va,_fnSortAttachListener:Ma,_fnSortingClasses:wa,_fnSortData:Hb,_fnSaveState:xa,_fnLoadState:Jb,_fnSettingsFromNode:ya,_fnLog:K,_fnMap:F,_fnBindAction:Wa,_fnCallbackReg:z,_fnCallbackFire:r,_fnLengthOverflow:Sa,_fnRenderer:Na,_fnDataSource:y,_fnRowAttributes:La,_fnExtend:Xa,_fnCalculateEnd:function(){}});h.fn.dataTable=n;n.$=h;h.fn.dataTableSettings=n.settings;h.fn.dataTableExt=n.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};\nh.each(n,function(a,b){h.fn.DataTable[a]=b});return h.fn.dataTable});\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"page2.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/page2/page2.js                                                                                    //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./page.html\");\nvar User;\nmodule.link(\"/imports/api/user/user.js\", {\n  User: function (v) {\n    User = v;\n  }\n}, 0);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 1);\nvar Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 2);\nvar Tabular;\nmodule.link(\"meteor/aldeed:tabular\", {\n  \"default\": function (v) {\n    Tabular = v;\n  }\n}, 3);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 4);\nvar dataTablesBootstrap;\nmodule.link(\"datatables.net-bs\", {\n  \"default\": function (v) {\n    dataTablesBootstrap = v;\n  }\n}, 5);\nmodule.link(\"./dataTables.bootstrap4.min.js\");\nmodule.link(\"./dataTables.foundation.min.js\");\nmodule.link(\"./dataTables.jqueryui.min.js\");\nmodule.link(\"./dataTables.semanticui.min.js\");\nmodule.link(\"./jquery.dataTables.min.js\");\nvar searchUser = new ReactiveVar(\"\");\nTemplate.App_page2.onCreated(function () {\n  var self = this;\n  self.autorun(function () {\n    Meteor.subscribe('users');\n  });\n});\nTemplate.App_page2.onRendered(function () {\n  Meteor.setTimeout(function () {\n    $(document).ready(function () {\n      $('table').DataTable({\n        \"order\": [[3, \"desc\"]]\n      });\n    });\n    $(function () {\n      $('#table').on('click', 'th', function () {\n        var index = $(this).index(),\n            rows = [],\n            thClass = $(this).hasClass('asc') ? 'desc' : 'asc';\n        $('#table th').removeClass('asc desc');\n        $(this).addClass(thClass);\n        $('#table tbody tr').each(function (index, row) {\n          rows.push($(row).detach());\n        });\n        rows.sort(function (a, b) {\n          var aValue = $(a).find('td').eq(index).text(),\n              bValue = $(b).find('td').eq(index).text();\n          return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;\n        });\n\n        if ($(this).hasClass('desc')) {\n          rows.reverse();\n        }\n\n        $.each(rows, function (index, row) {\n          $('#table tbody').append(row);\n        });\n      });\n    });\n  }, 400);\n});\nTemplate.App_page2.helpers({\n  getUsers: function () {\n    var user_id = Session.get('u_l');\n    if (!user_id) return [];\n    var keywords = searchUser.get();\n    var query = {\n      _id: {\n        $ne: user_id\n      },\n      name: new RegExp('.*' + keywords + '.*', 'i')\n    };\n    return User.find(query);\n  }\n});\nTemplate.App_page2.events({\n  \"click .send\": function () {\n    var from = \"from@mailinator.com\";\n    var subject = $(\"#subject\").val();\n    var text = $(\"#ymsg\").val();\n    var to = $(\"#to\").val();\n    Meteor.call('email.send', to, subject, text, function (err, result) {\n      if (!err) {\n        console.log(result);\n      } else {\n        console.log('there is an error');\n      }\n    });\n  },\n  \"click .remove\": function () {\n    confirm(\"Delete this Record?\");\n    Meteor.call('user.remove', this._id);\n  },\n  \"click .update\": function () {\n    var name = $(\".input-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      name: name\n    });\n  },\n  \"click .changEPassword\": function () {\n    var newPassword = $(\".passwords-\" + this._id).val();\n    Meteor.call('user.changePassword', this._id, this.password, newPassword, function (err, result) {\n      if (!err) {\n        console.log('Your password is change');\n      } else {\n        console.log('there is an error');\n      }\n    });\n  },\n  \"click .changephone\": function () {\n    var phone = $(\".phone-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      phone: phone\n    });\n  },\n  \"click .changeemail\": function () {\n    var email = $(\".emails-\" + this._id).val();\n    Meteor.call('user.update', this._id, {\n      email: email\n    });\n  },\n  \"click #logout\": function (evt) {\n    evt.preventDefault();\n    Session.clear('u_l');\n    return FlowRouter.go(\"/\");\n  },\n  \"click .save\": function () {\n    var name = $(\".namee\").val();\n    var password = $(\".passwordd\").val();\n    var phone = $(\".phone\").val();\n    var email = $(\".email\").val();\n    Meteor.call('user.insert', name, password, phone, email, function (err, result) {\n      if (!err) {\n        console.log(result);\n      } else {\n        console.log('there is an error');\n      }\n    });\n  } // ,\n  // \"click .submit\"(){\n  //   searchUser.set(jQuery(\".search\").val());\n  // }\n\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"main\":{\"main.html\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/main/main.html                                                                                    //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./template.main.js\", { \"*\": \"*+\" });\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.main.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/main/template.main.js                                                                             //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n\nTemplate.__checkName(\"App_Main\");\nTemplate[\"App_Main\"] = new Template(\"Template.App_Main\", (function() {\n  var view = this;\n  return Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"isLoggedIn\"));\n  }, function() {\n    return [ \"\\n  \", HTML.H4(Blaze.View(\"lookup:reactiveVarHelper\", function() {\n      return Spacebars.mustache(view.lookup(\"reactiveVarHelper\"));\n    })), \"\\n  \", HTML.DIV({\n      class: \"login-form\",\n      style: \"background-color:white\"\n    }, \"\\n    \", HTML.H2({\n      class: \"text-center\"\n    }, \"Log in\"), \"\\n    \", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n        \", HTML.INPUT({\n      type: \"text\",\n      id: \"username\",\n      class: \"form-control\",\n      placeholder: \"Username\",\n      required: \"required\"\n    }), \"\\n    \"), \"\\n    \", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n        \", HTML.INPUT({\n      type: \"password\",\n      id: \"password\",\n      class: \"form-control\",\n      placeholder: \"Password\",\n      required: \"required\"\n    }), \"\\n    \"), \"\\n    \", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n        \", HTML.BUTTON({\n      type: \"submit\",\n      class: \"login\"\n    }, \"Log in\"), \"\\n    \"), \"\\n    \", HTML.DIV({\n      class: \"clearfix\"\n    }, \"\\n        \", HTML.LABEL({\n      class: \"pull-left checkbox-inline\"\n    }, HTML.INPUT({\n      type: \"checkbox\"\n    }), \" Remember me\"), \"\\n        \", HTML.A({\n      href: \"/password\",\n      id: \"forgotPassword\",\n      class: \"pull-right\"\n    }, \"Admin\"), \"\\n    \"), \"\\n    \", HTML.Comment(\" Button trigger modal \"), \"\\n  \", HTML.BUTTON({\n      type: \"button\",\n      class: \"btn btn-primary btn-block\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#exampleModalLong\"\n    }, \"Sign Up\"), \"\\n  \"), \"\\n\", HTML.Comment(\" Modal \"), \"\\n\", HTML.DIV({\n      class: \"addMore modal fade\",\n      id: \"exampleModalLong\",\n      tabindex: \"-1\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"exampleModalLongTitle\",\n      \"aria-hidden\": \"true\"\n    }, \"\\n\", HTML.DIV({\n      class: \"modal-dialog\",\n      role: \"document\"\n    }, \"\\n  \", HTML.DIV({\n      class: \"modal-content\"\n    }, \"\\n    \", HTML.DIV({\n      class: \"modal-header\"\n    }, \"\\n      \", HTML.H5({\n      class: \"modal-title\",\n      id: \"exampleModalLongTitle\"\n    }, \"Sign Up\"), \"\\n      \", HTML.BUTTON({\n      type: \"button\",\n      class: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\"\n    }, \"\\n        \", HTML.SPAN({\n      \"aria-hidden\": \"true\"\n    }, HTML.CharRef({\n      html: \"&times;\",\n      str: \"×\"\n    })), \"\\n      \"), \"\\n    \"), \"\\n    \", HTML.DIV({\n      class: \"modal-body\"\n    }, \"\\n\", HTML.FORM(\"\\n\", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n  \", HTML.LABEL(\"Your name\"), \"\\n  \", HTML.INPUT({\n      type: \"text\",\n      class: \"namee form-control\",\n      id: \"namee\",\n      \"aria-describedby\": \"namee\",\n      placeholder: \"Chris\"\n    }), \"\\n\"), \"\\n\", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n  \", HTML.LABEL(\"Your Last Name\"), \"\\n  \", HTML.INPUT({\n      type: \"text\",\n      class: \"lsname form-control\",\n      id: \"lsname\",\n      \"aria-describedby\": \"lsname\",\n      placeholder: \"example\"\n    }), \"\\n\"), \"\\n\", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n  \", HTML.LABEL(\"Email address\"), \"\\n  \", HTML.INPUT({\n      type: \"email\",\n      class: \"email form-control\",\n      id: \"email\",\n      \"aria-describedby\": \"email\",\n      placeholder: \"example@email.com\"\n    }), \"\\n\"), \"\\n\", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n  \", HTML.LABEL({\n      for: \"phone\"\n    }, \"Phone\"), \"\\n  \", HTML.INPUT({\n      type: \"tel\",\n      class: \"phone form-control\",\n      id: \"phone\",\n      \"aria-describedby\": \"phone\",\n      placeholder: \"+35799854845\"\n    }), \"\\n\"), \"\\n\", HTML.DIV({\n      class: \"form-group\"\n    }, \"\\n  \", HTML.LABEL(\"Password\"), \"\\n  \", HTML.INPUT({\n      type: \"password\",\n      class: \"passwordd form-control\",\n      id: \"exampleInputPassword1\",\n      placeholder: \"Password\"\n    }), \"\\n\"), \"\\n\"), \"\\n    \"), \"\\n    \", HTML.DIV({\n      class: \"modal-footer\"\n    }, \"\\n      \", HTML.BUTTON({\n      type: \"button\",\n      class: \"save btn btn-primary\",\n      \"data-dismiss\": \"modal\"\n    }, \"Save changes\"), \"\\n    \"), \"\\n  \"), \"\\n\"), \"\\n\"), \"\\n\" ];\n  }, function() {\n    return [ \"\\n  \", Spacebars.include(view.lookupTemplate(\"App_page2\")), \"\\n\" ];\n  });\n}));\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"main.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/main/main.js                                                                                      //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./main.html\");\nvar User;\nmodule.link(\"/imports/api/user/user.js\", {\n  User: function (v) {\n    User = v;\n  }\n}, 0);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 1);\nwindow.reactVar = new ReactiveVar(0);\nTemplate.App_Main.onCreated(function () {\n  var self = this;\n});\nTemplate.App_Main.helpers({\n  isLoggedIn: function () {\n    return Session.get('u_l');\n  }\n});\nTemplate.App_Main.events({\n  \"click .login\": function (evt, template) {\n    var name = jQuery(\"#username\").val();\n    var password = jQuery(\"#password\").val();\n    Meteor.call('Login', name, password, function (error, response) {\n      console.log(error, response);\n\n      if (!error && response) {\n        Session.setPersistent(\"u_l\", response);\n      }\n    });\n  },\n  \"click .save\": function () {\n    var name = $(\".namee\").val();\n    var lsname = $(\".lsname\").val();\n    var password = $(\".passwordd\").val();\n    var phone = $(\".phone\").val();\n    var email = $(\".email\").val();\n    Meteor.call('user.insert', name, lsname, password, phone, email, function (err, result) {\n      if (!err) {\n        console.log(result);\n      } else {\n        console.log('there is an error');\n      }\n    });\n  },\n  \"click .forgotPassword\": function () {}\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"this\":{\"this.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/ui/pages/this/this.js                                                                                      //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}},\"api\":{\"groupMessenger\":{\"groupMessage.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/api/groupMessenger/groupMessage.js                                                                         //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.export({\n  GroupMessage: function () {\n    return GroupMessage;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo: function (v) {\n    Mongo = v;\n  }\n}, 1);\nvar GroupMessage = new Mongo.Collection('groupMessage');\n\nif (Meteor.isServer) {\n  Meteor.publish('groupMessage', function () {\n    return GroupMessage.find();\n  });\n}\n\nMeteor.methods({\n  \"groupMessage.insert\": function (name, users) {\n    var uid = GroupMessage.insert({\n      name: name,\n      users: users,\n      options: {},\n      created_at: moment().valueOf()\n    });\n    return uid;\n  }\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"messages\":{\"messages.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/api/messages/messages.js                                                                                   //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.export({\n  Message: function () {\n    return Message;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo: function (v) {\n    Mongo = v;\n  }\n}, 1);\nvar Message = new Mongo.Collection('message');\n\nif (Meteor.isServer) {\n  Meteor.publish('messages', function () {\n    return Message.find();\n  });\n}\n\nMeteor.methods({\n  \"message.insert\": function (sid, rid, message, type, group) {\n    var uid = Message.insert({\n      sid: sid,\n      rid: rid,\n      group: group,\n      message: message,\n      viewed: false,\n      type: type,\n      // last_login:moment().valueOf(),\n      created_at: moment().valueOf()\n    });\n    return uid;\n  },\n  \"message.remove\": function (messageId) {\n    return Message.remove(messageId);\n  },\n  \"message.update\": function (messageId, update) {\n    return Message.update(messageId, {\n      $set: update\n    });\n  }\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"user\":{\"user.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/api/user/user.js                                                                                           //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.export({\n  User: function () {\n    return User;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo: function (v) {\n    Mongo = v;\n  }\n}, 1);\nvar User = new Mongo.Collection('user');\n\nif (Meteor.isServer) {\n  Meteor.publish('users', function () {\n    return User.find();\n  });\n}\n\nMeteor.methods({\n  \"user.insert\": function (name, lastName, password, phone, email) {\n    var uid = User.insert({\n      name: name,\n      lastName: lastName,\n      password: password,\n      phone: phone,\n      email: email,\n      created_at: moment().valueOf(),\n      last_login: moment().valueOf()\n    });\n    return uid;\n  },\n  \"user.remove\": function (userId) {\n    return User.remove(userId);\n  },\n  \"user.update\": function (userId, update) {\n    return User.update(userId, {\n      $set: update\n    });\n  },\n  \"user.changePassword\": function (userId, oldPassword, newPassword) {\n    var user = User.findOne({\n      _id: userId,\n      password: oldPassword\n    });\n\n    if (user) {\n      return User.update(userId, {\n        $set: {\n          password: newPassword\n        }\n      });\n    }\n  }\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"video\":{\"video.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/api/video/video.js                                                                                         //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nvar Video;\nmodule.link(\"/imports/api/video/video.js\", {\n  Video: function (v) {\n    Video = v;\n  }\n}, 0);\nTemplate.App_video.onRendered(function () {\n  Webcam.on('error', function (err) {\n    console.log(err); // outputs error to console instead of window.alert\n  });\n  Webcam.set({\n    width: 320,\n    height: 240,\n    dest_width: 640,\n    dest_height: 480,\n    image_format: 'jpeg',\n    jpeg_quality: 90\n  });\n  Webcam.attach('#webcam');\n});\nTemplate.App_video.events({\n  'click .snap': function () {\n    Webcam.snap(function (image) {\n      Session.set('webcamSnap', image);\n    });\n  }\n});\nTemplate.App_video.helpers({\n  image: function () {\n    return Session.get('webcamSnap');\n  }\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"startup\":{\"client\":{\"globalHelpers.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/startup/client/globalHelpers.js                                                                            //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nTemplate.registerHelper(\"parseDate\", function (timestamp) {\n  return moment(timestamp).format('YYYY-MM-DD HH:mm:ss');\n});\nTemplate.registerHelper(\"isMe\", function (id) {\n  return Session.get('u_l') == id;\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/startup/client/index.js                                                                                    //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"./route.js\");\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"route.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// imports/startup/client/route.js                                                                                    //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"../../ui/layout/body/body.js\");\nmodule.link(\"../../ui/pages/main/main.js\");\nmodule.link(\"../../ui/pages/page2/page2.js\");\nmodule.link(\"../../ui/pages/messenger/messenger.js\");\nmodule.link(\"../../ui/pages/forgotPassword/password.js\");\nmodule.link(\"../../ui/pages/this/this.js\");\nFlowRouter.route('/', {\n  action: function () {\n    BlazeLayout.render('App_Body', {\n      Body: 'App_Main'\n    });\n  }\n});\nFlowRouter.route('/page2', {\n  action: function () {\n    BlazeLayout.render('App_Body', {\n      Body: 'App_page2'\n    });\n  }\n});\nFlowRouter.route('/messenger', {\n  action: function () {\n    BlazeLayout.render('App_Body', {\n      Body: 'App_messenger'\n    });\n  }\n});\nFlowRouter.route('/password', {\n  action: function () {\n    BlazeLayout.render('App_Body', {\n      Body: 'App_password'\n    });\n  }\n});\nFlowRouter.route('/video', {\n  action: function () {\n    BlazeLayout.render('App_Body', {\n      Body: 'App_video'\n    });\n  }\n});\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}},\"client\":{\"main.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// client/main.js                                                                                                     //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nmodule.link(\"/imports/startup/client\");\nmodule.link(\"/imports/startup/client/globalHelpers.js\");\nvar $;\nmodule.link(\"meteor/jquery\", {\n  $: function (v) {\n    $ = v;\n  }\n}, 0);\nvar dataTablesBootstrap;\nmodule.link(\"datatables.net-bs\", {\n  \"default\": function (v) {\n    dataTablesBootstrap = v;\n  }\n}, 1);\nmodule.link(\"datatables.net-bs/css/dataTables.bootstrap.css\");\nmodule.link(\"/imports/ui/pages/page2/dataTables.bootstrap4.min.js\");\nmodule.link(\"/imports/ui/pages/page2/dataTables.foundation.min.js\");\nmodule.link(\"/imports/ui/pages/page2/dataTables.jqueryui.min.js\");\nmodule.link(\"/imports/ui/pages/page2/dataTables.semanticui.min.js\");\nmodule.link(\"/imports/ui/pages/page2/jquery.dataTables.min.js\");\ndataTablesBootstrap(window, $);\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".html\",\n    \".css\"\n  ]\n});\n\nvar exports = require(\"/client/main.js\");","hash":"9b281767b26ed42e5088fb09153ac150e8f4a943","servePath":"/app.js","sourceMap":{"version":3,"sources":["imports/ui/layout/body/body.js","imports/ui/pages/forgotPassword/password.js","imports/ui/pages/messenger/RecordRTC.js","imports/ui/pages/messenger/messenger.js","imports/ui/pages/page2/page2.js","imports/ui/pages/main/main.js","imports/api/groupMessenger/groupMessage.js","imports/api/messages/messages.js","imports/api/user/user.js","imports/api/video/video.js","imports/startup/client/globalHelpers.js","imports/startup/client/index.js","imports/startup/client/route.js","client/main.js"],"names":["module","link","User","v","ReactiveVar","Template","Tabular","moment","dataTablesBootstrap","searchUser","App_password","onCreated","self","autorun","Meteor","subscribe","onRendered","setTimeout","$","document","ready","DataTable","on","index","rows","thClass","hasClass","removeClass","addClass","each","row","push","detach","sort","a","b","aValue","find","eq","text","bValue","reverse","append","helpers","getUsers","events","newPassword","_id","val","call","password","err","result","console","log","name","lastName","phone","email","evt","preventDefault","Session","clear","FlowRouter","go","RecordRTC","mediaStream","config","type","RecordRTCConfiguration","startRecording","config2","disableLogs","mediaRecorder","clearRecordedData","record","setState","recordingDuration","handleRecordingDuration","initRecorder","initCallback","Recorder","GetRecorderType","constructor","stopRecording","callback","warningLog","state","resumeRecording","warn","stop","_callback","__blob","Object","keys","forEach","key","blob","bytesToSize","size","url","URL","createObjectURL","e","autoWriteToDisk","getDataURL","dataURL","parameter","DiskStorage","Store","pauseRecording","pause","resume","readFile","_blob","postMessage","FileReaderSync","readAsDataURL","_mediaRecorder","Worker","navigator","mozGetUserMedia","webWorker","processInWebWorker","onmessage","event","data","reader","FileReader","onload","target","_function","Blob","toString","worker","revokeObjectURL","counter","onRecordingStopped","onStateChanged","WARNING","returnObject","setRecordingDuration","getBlob","toURL","getInternalRecorder","save","fileName","invokeSaveAsDialog","getFromDisk","setAdvertisementArray","arrayOfWebPImages","advertisement","length","i","duration","image","bufferSize","sampleRate","buffer","reset","getState","destroy","disableLogsCache","Storage","AudioContextConstructor","close","version","prop","exports","define","amd","Fetch","_type","replace","writeToDisk","options","audio","video","gif","audioDataURL","videoDataURL","gifDataURL","audioBlob","videoBlob","gifBlob","recorderType","WhammyRecorder","CanvasRecorder","WebAssemblyRecorder","GifRecorder","StereoAudioRecorder","MediaStreamRecorder","getTracks","MediaRecorder","prototype","mimeType","split","bitsPerSecond","recorder","isChrome","isEdge","isOpera","ReadableStream","isMediaRecorderCompatible","isTypeSupported","Array","MultiStreamRecorder","isSafari","MRecordRTC","addStream","_mediaStream","mediaType","audioRecorder","numberOfAudioChannels","timeSlice","onTimeStamp","newStream","videoTrack","isFirefox","MediaStream","addTrack","videoRecorder","canvas","frameInterval","workerPath","webAssemblyPath","frameRate","bitrate","isSingleRecorder","gifRecorder","quality","blobURL","output","_audioDataURL","_videoDataURL","callback00","webkitURL","args","browserFakeUserAgent","that","window","global","userAgent","getUserMedia","error","arguments","createElement","captureStream","mozCaptureStream","obj","getContext","play","drawImage","toDataURL","HTMLVideoElement","location","protocol","href","hash","screen","width","height","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","lastTime","element","currTime","Date","getTime","timeToCall","Math","max","id","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","AudioContext","webkitAudioContext","mozAudioContext","webkitGetUserMedia","indexOf","msSaveBlob","msSaveOrOpenBlob","opera","toLowerCase","test","isElectron","webkitMediaStream","track","bytes","k","sizes","parseInt","floor","pow","toPrecision","file","fileExtension","splitted","fileFullName","round","random","hyperlink","download","style","body","documentElement","appendChild","click","dispatchEvent","MouseEvent","view","bubbles","cancelable","process","versions","electron","stream","kind","filter","t","setSrcObject","srcObject","mozSrcObject","getSeekableBlob","inputBlob","EBML","Error","Reader","decoder","Decoder","tools","fileReader","ebmlElms","decode","read","refinedMetadataBuf","makeMetadataSeekable","metadatas","cues","slice","metadataSize","newBlob","readAsArrayBuffer","nVer","appVersion","nAgt","fullVersion","parseFloat","majorVersion","nameOffset","verOffset","ix","substring","isNaN","arrayOfBlobs","getArrayOfBlobs","timestamps","allStates","recorderHints","canRecordMimeType","ondataavailable","updateTimeStamp","getNativeBlob","getMimeType","recordingCallback","onstart","onpause","onresume","onstop","onerror","looper","manuallyStopped","timeslice","start","secondObject","clearRecordedDataCB","isMediaStreamActive","active","ended","getAllStates","checkForInactiveTracks","leftchannel","rightchannel","recording","recordingLength","jsAudioNode","desiredSampRate","leftChannel","resetVariables","isAudioProcessStarted","isPaused","mergeLeftRightBuffers","mergeAudioBuffers","cb","leftBuffers","rightBuffers","internalInterleavedLength","mergeBuffers","interpolateArray","newSampleRate","oldSampleRate","fitCount","newData","springFactor","Number","tmp","before","toFixed","after","ceil","atPoint","linearInterpolate","channelBuffer","rLength","Float64Array","offset","lng","set","interleave","rightChannel","inputIndex","writeUTFBytes","string","setUint8","charCodeAt","interleaved","interleavedLength","resultingBufferLength","ArrayBuffer","DataView","setUint32","setUint16","volume","setInt16","noWorker","workerURL","terminate","byteLength","context","audioInput","createMediaStreamSource","legalBufferValues","JSON","stringify","createJavaScriptNode","createScriptProcessor","connect","intervalsBasedBuffers","left","right","onaudioprocess","disconnect","onAudioProcessDataAvailable","onAudioProcessStarted","inputBuffer","getChannelData","chLeft","Float32Array","chRight","createMediaStreamDestination","destination","htmlElement","html2canvas","isCanvasSupportsStreamCapturing","item","_isChrome","webkitRTCPeerConnection","chrome","chromeVersion","matchArray","match","useWhammyRecorder","globalCanvas","mediaStreamRecorder","HTMLCanvasElement","CanvasRenderingContext2D","isRecording","canvasMediaStream","webkitCaptureStream","mdStream","whammy","frames","drawCanvasFrame","getWebPImages","nodeName","framesLength","frame","idx","framesRemaining","onEncodingCallback","webp","compile","isPausedRecording","cloneCanvas","newCanvas","grabMouse","showMousePointer","onrendered","Whammy","Video","cloneNode","onloadedmetadata","muted","drawFrames","paused","isStopDrawing","asyncLoop","o","loop","functionToLoop","dropBlackFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","localCanvas","context2d","resultFrames","checkUntilNotBlack","endCheckFrame","sampleColor","r","g","maxColorDifference","sqrt","pixTolerance","frameTolerance","doNotCheckNext","f","matchPixCount","endPixCheck","maxPixCount","finishImage","Image","imageData","getImageData","pix","currentColor","colorDifference","src","concat","_this","WhammyVideo","add","whammyInWebWorker","ArrayToWebM","info","checkFrames","clusterMaxDuration","doubleToString","frameNumber","clusterTimecode","clusterFrames","clusterDuration","clusterCounter","cluster","getClusterData","generateEBML","map","block","makeSimpleBlock","discardable","invisible","keyframe","lacing","trackNum","timecode","numToBuffer","num","parts","Uint8Array","strToBuffer","str","bitsToBuffer","bits","pad","join","substr","json","ebml","len","zeroes","sizeToString","padded","toBinStrOld","String","fromCharCode","flags","out","parseWebP","riff","VP8","RIFF","WEBP","frameStart","c","getStrLength","unpadded","parseRIFF","chunks","webm","atob","init","indexedDB","open","dbVersion","dbName","db","request","createObjectStore","dataBase","dataStoreName","putInDB","transaction","objectStore","put","getFromStore","portionName","get","onsuccess","onError","setVersion","onupgradeneeded","GIFEncoder","script","isHTMLObject","isLoadedMetaData","offsetWidth","offsetHeight","gifEncoder","setRepeat","setDelay","setQuality","onGifRecordingStarted","startTime","now","drawVideoFrame","time","clearedRecordedData","lastAnimationFrame","lastFrameTime","undefined","onGifPreview","addFrame","endTime","bin","autoplay","MultiStreamsMixer","arrayOfMediaStreams","videos","isStopDrawingFrames","useGainNode","startDrawingFrames","drawVideosToCanvas","videosLength","fullcanvas","remaining","x","y","top","onRender","getMixedStream","mixedVideoStream","getMixedVideoStream","mixedAudioStream","getMixedAudioStream","resetVideoStreams","capturedStream","videoStream","audioContext","audioSources","gainNode","createGain","gain","value","audioTracksLength","audioSource","audioDestination","getVideo","appendStreams","streams","releaseStreams","source","clearRect","mixer","getAllVideoTracks","previewStream","tracks","addStreams","RecordRTCPromisesHandler","recordRTC","Promise","resolve","reject","WritableStream","createBufferURL","cameraStream","controller","cvs","onplaying","ctx","frameTimeout","enqueue","fetch","then","arrayBuffer","addEventListener","timebaseDen","realtime","pipeTo","write","arrayOfBuffers","Message","GroupMessage","selectedUser","App_messenger","user_id","keywords","query","$ne","RegExp","startup","Status","setTemplate","getUserById","findOne","getMessages","$and","$or","sid","rid","_selected_user","fst","jQuery","animate","scrollTop","scrollHeight","getLines","message","isFile","isImage","viewMessage","message_id","viewed","Collection","template","selected_user_id","group","_group","users","_","sortBy","sender_id","upload","files","update","attr","from","uploadFile","uid","removeAttr","enterKey","keyCode","which","shiftKey","session","msGetUserMedia","aCtx","analyser","microphone","querySelector","streamRecorder","webcamstream","createAnalyser","formData","FormData","ajax","success","async","cache","contentType","processData","timeout","App_page2","subject","to","confirm","reactVar","App_Main","isLoggedIn","response","setPersistent","lsname","export","Mongo","isServer","publish","methods","insert","created_at","valueOf","messageId","remove","$set","last_login","userId","oldPassword","user","App_video","Webcam","dest_width","dest_height","image_format","jpeg_quality","attach","snap","registerHelper","timestamp","format","route","action","BlazeLayout","render","Body"],"mappings":"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","file":"/app.js","sourcesContent":["import './body.html'\r\n","import './password.html';\r\nimport { User } from '/imports/api/user/user.js';\r\nimport { ReactiveVar } from 'meteor/reactive-var';\r\nimport { Template } from 'meteor/templating';\r\nimport Tabular from 'meteor/aldeed:tabular';\r\nimport moment from 'moment';\r\nimport dataTablesBootstrap from 'datatables.net-bs';\r\nimport './dataTables.bootstrap4.min.js';\r\nimport './dataTables.foundation.min.js';\r\nimport './dataTables.jqueryui.min.js';\r\nimport './dataTables.semanticui.min.js';\r\nimport './jquery.dataTables.min.js';\r\n\r\n\r\nconst searchUser = new ReactiveVar(\"\");\r\n\r\nTemplate.App_password.onCreated(function(){\r\n  var self = this;\r\n  self.autorun(function() {\r\n    Meteor.subscribe('users');\r\n  })\r\n  });\r\n  Template.App_password.onRendered(function(){\r\n    Meteor.setTimeout(function(){\r\n      $(document).ready(function() {\r\n          $('table').DataTable( {\r\n              \"order\": [[ 3, \"desc\" ]]\r\n          } );\r\n      } );\r\n      $(function () {\r\n        $('#table').on('click', 'th', function () {\r\n          var index = $(this).index(),\r\n          rows = [],\r\n          thClass = $(this).hasClass('asc') ? 'desc' : 'asc';\r\n\r\n          $('#table th').removeClass('asc desc');\r\n          $(this).addClass(thClass);\r\n\r\n          $('#table tbody tr').each(function (index, row) {\r\n            rows.push($(row).detach());\r\n          });\r\n\r\n          rows.sort(function (a, b) {\r\n            var aValue = $(a).find('td').eq(index).text(),\r\n            bValue = $(b).find('td').eq(index).text();\r\n\r\n            return aValue > bValue ?\r\n            1 :\r\n            aValue < bValue ?\r\n            -1 :\r\n            0;\r\n          });\r\n\r\n          if ($(this).hasClass('desc')) {\r\n            rows.reverse();\r\n          }\r\n\r\n          $.each(rows, function (index, row) {\r\n            $('#table tbody').append(row);\r\n          });\r\n        });\r\n      });\r\n    },400);\r\n  });\r\nTemplate.App_password.helpers({\r\n  getUsers(){\r\n    return User.find();\r\n  }\r\n});\r\nTemplate.App_password.events({\r\n  \"click .changEPassword\"(){\r\n     var newPassword =  $(`.passwords-${this._id}`).val();\r\n     Meteor.call('user.changePassword',this._id,this.password,newPassword, function(err,result){\r\n     if(!err){\r\n       console.log('Your password is change');\r\n     }\r\n     else {\r\n       console.log('there is an error');\r\n     }\r\n   })\r\n },\r\n \"click .update\"(){\r\n   var name = $(`.input-${this._id}`).val();\r\n   Meteor.call('user.update',this._id,{name :name});\r\n },\r\n \"click .lname\"(){\r\n   var lastName = $(`.lsname-${this._id}`).val();\r\n   Meteor.call('user.update',this._id,{lastName:lastName});\r\n },\r\n \"click .changephone\"(){\r\n   var phone =  $(`.phone-${this._id}`).val();\r\n   Meteor.call('user.update',this._id,{phone:phone});\r\n },\r\n \"click .changeemail\"(){\r\n   var email =  $(`.emails-${this._id}`).val();\r\n   Meteor.call('user.update',this._id,{email:email});\r\n },\r\n \"click #logout\"(evt) {\r\n   evt.preventDefault();\r\n   Session.clear('u_l')\r\n   return FlowRouter.go(\"/\");\r\n }\r\n})\r\n","'use strict';\n\n// Last time updated: 2019-02-06 11:32:40 AM UTC\n\n// ________________\n// RecordRTC v5.5.4\n\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\n\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\n// ____________\n// RecordRTC.js\n\n/**\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows.\n * @summary Record audio, video or screen inside the browser.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTC\n * @class\n * @example\n * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {\n *     type: 'video', // audio or video or gif or canvas\n *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc\n * });\n * recorder.startRecording();\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}\n */\n\nfunction RecordRTC(mediaStream, config) {\n    if (!mediaStream) {\n        throw 'First parameter is required.';\n    }\n\n    config = config || {\n        type: 'video'\n    };\n\n    config = new RecordRTCConfiguration(mediaStream, config);\n\n    // a reference to user's recordRTC object\n    var self = this;\n\n    function startRecording(config2) {\n        if (!!config2) {\n            // allow users to set options using startRecording method\n            // config2 is similar to main \"config\" object (second parameter over RecordRTC constructor)\n            config = new RecordRTCConfiguration(mediaStream, config2);\n        }\n\n        if (!config.disableLogs) {\n            console.log('started recording ' + config.type + ' stream.');\n        }\n\n        if (mediaRecorder) {\n            mediaRecorder.clearRecordedData();\n            mediaRecorder.record();\n\n            setState('recording');\n\n            if (self.recordingDuration) {\n                handleRecordingDuration();\n            }\n            return self;\n        }\n\n        initRecorder(function() {\n            if (self.recordingDuration) {\n                handleRecordingDuration();\n            }\n        });\n\n        return self;\n    }\n\n    function initRecorder(initCallback) {\n        if (initCallback) {\n            config.initCallback = function() {\n                initCallback();\n                initCallback = config.initCallback = null; // recorder.initRecorder should be call-backed once.\n            };\n        }\n\n        var Recorder = new GetRecorderType(mediaStream, config);\n\n        mediaRecorder = new Recorder(mediaStream, config);\n        mediaRecorder.record();\n\n        setState('recording');\n\n        if (!config.disableLogs) {\n            console.log('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\n        }\n    }\n\n    function stopRecording(callback) {\n        callback = callback || function() {};\n\n        if (!mediaRecorder) {\n            warningLog();\n            return;\n        }\n\n        if (self.state === 'paused') {\n            self.resumeRecording();\n\n            setTimeout(function() {\n                stopRecording(callback);\n            }, 1);\n            return;\n        }\n\n        if (self.state !== 'recording' && !config.disableLogs) {\n            console.warn('Recording state should be: \"recording\", however current state is: ', self.state);\n        }\n\n        if (!config.disableLogs) {\n            console.log('Stopped recording ' + config.type + ' stream.');\n        }\n\n        if (config.type !== 'gif') {\n            mediaRecorder.stop(_callback);\n        } else {\n            mediaRecorder.stop();\n            _callback();\n        }\n\n        setState('stopped');\n\n        function _callback(__blob) {\n            if (!mediaRecorder) {\n                if (typeof callback.call === 'function') {\n                    callback.call(self, '');\n                } else {\n                    callback('');\n                }\n                return;\n            }\n\n            Object.keys(mediaRecorder).forEach(function(key) {\n                if (typeof mediaRecorder[key] === 'function') {\n                    return;\n                }\n\n                self[key] = mediaRecorder[key];\n            });\n\n            var blob = mediaRecorder.blob;\n\n            if (!blob) {\n                if (__blob) {\n                    mediaRecorder.blob = blob = __blob;\n                } else {\n                    throw 'Recording failed.';\n                }\n            }\n\n            if (blob && !config.disableLogs) {\n                console.log(blob.type, '->', bytesToSize(blob.size));\n            }\n\n            if (callback) {\n                var url;\n\n                try {\n                    url = URL.createObjectURL(blob);\n                } catch (e) {}\n\n                if (typeof callback.call === 'function') {\n                    callback.call(self, url);\n                } else {\n                    callback(url);\n                }\n            }\n\n            if (!config.autoWriteToDisk) {\n                return;\n            }\n\n            getDataURL(function(dataURL) {\n                var parameter = {};\n                parameter[config.type + 'Blob'] = dataURL;\n                DiskStorage.Store(parameter);\n            });\n        }\n    }\n\n    function pauseRecording() {\n        if (!mediaRecorder) {\n            warningLog();\n            return;\n        }\n\n        if (self.state !== 'recording') {\n            if (!config.disableLogs) {\n                console.warn('Unable to pause the recording. Recording state: ', self.state);\n            }\n            return;\n        }\n\n        setState('paused');\n\n        mediaRecorder.pause();\n\n        if (!config.disableLogs) {\n            console.log('Paused recording.');\n        }\n    }\n\n    function resumeRecording() {\n        if (!mediaRecorder) {\n            warningLog();\n            return;\n        }\n\n        if (self.state !== 'paused') {\n            if (!config.disableLogs) {\n                console.warn('Unable to resume the recording. Recording state: ', self.state);\n            }\n            return;\n        }\n\n        setState('recording');\n\n        // not all libs have this method yet\n        mediaRecorder.resume();\n\n        if (!config.disableLogs) {\n            console.log('Resumed recording.');\n        }\n    }\n\n    function readFile(_blob) {\n        postMessage(new FileReaderSync().readAsDataURL(_blob));\n    }\n\n    function getDataURL(callback, _mediaRecorder) {\n        if (!callback) {\n            throw 'Pass a callback function over getDataURL.';\n        }\n\n        var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\n\n        if (!blob) {\n            if (!config.disableLogs) {\n                console.warn('Blob encoder did not finish its job yet.');\n            }\n\n            setTimeout(function() {\n                getDataURL(callback, _mediaRecorder);\n            }, 1000);\n            return;\n        }\n\n        if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\n            var webWorker = processInWebWorker(readFile);\n\n            webWorker.onmessage = function(event) {\n                callback(event.data);\n            };\n\n            webWorker.postMessage(blob);\n        } else {\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);\n            reader.onload = function(event) {\n                callback(event.target.result);\n            };\n        }\n\n        function processInWebWorker(_function) {\n            try {\n                var blob = URL.createObjectURL(new Blob([_function.toString(),\n                    'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\n                ], {\n                    type: 'application/javascript'\n                }));\n\n                var worker = new Worker(blob);\n                URL.revokeObjectURL(blob);\n                return worker;\n            } catch (e) {}\n        }\n    }\n\n    function handleRecordingDuration(counter) {\n        counter = counter || 0;\n\n        if (self.state === 'paused') {\n            setTimeout(function() {\n                handleRecordingDuration(counter);\n            }, 1000);\n            return;\n        }\n\n        if (self.state === 'stopped') {\n            return;\n        }\n\n        if (counter >= self.recordingDuration) {\n            stopRecording(self.onRecordingStopped);\n            return;\n        }\n\n        counter += 1000; // 1-second\n\n        setTimeout(function() {\n            handleRecordingDuration(counter);\n        }, 1000);\n    }\n\n    function setState(state) {\n        if (!self) {\n            return;\n        }\n\n        self.state = state;\n\n        if (typeof self.onStateChanged.call === 'function') {\n            self.onStateChanged.call(self, state);\n        } else {\n            self.onStateChanged(state);\n        }\n    }\n\n    var WARNING = 'It seems that recorder is destroyed or \"startRecording\" is not invoked for ' + config.type + ' recorder.';\n\n    function warningLog() {\n        if (config.disableLogs === true) {\n            return;\n        }\n\n        console.warn(WARNING);\n    }\n\n    var mediaRecorder;\n\n    var returnObject = {\n        /**\n         * This method starts the recording.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * var recorder = RecordRTC(mediaStream, {\n         *     type: 'video'\n         * });\n         * recorder.startRecording();\n         */\n        startRecording: startRecording,\n\n        /**\n         * This method stops the recording. It is strongly recommended to get \"blob\" or \"URI\" inside the callback to make sure all recorders finished their job.\n         * @param {function} callback - Callback to get the recorded blob.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.stopRecording(function() {\n         *     // use either \"this\" or \"recorder\" object; both are identical\n         *     video.src = this.toURL();\n         *     var blob = this.getBlob();\n         * });\n         */\n        stopRecording: stopRecording,\n\n        /**\n         * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @todo Firefox is unable to pause the recording. Fix it.\n         * @example\n         * recorder.pauseRecording();  // pause the recording\n         * recorder.resumeRecording(); // resume again\n         */\n        pauseRecording: pauseRecording,\n\n        /**\n         * This method resumes the recording.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.pauseRecording();  // first of all, pause the recording\n         * recorder.resumeRecording(); // now resume it\n         */\n        resumeRecording: resumeRecording,\n\n        /**\n         * This method initializes the recording.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @todo This method should be deprecated.\n         * @example\n         * recorder.initRecorder();\n         */\n        initRecorder: initRecorder,\n\n        /**\n         * Ask RecordRTC to auto-stop the recording after 5 minutes.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * var fiveMinutes = 5 * 1000 * 60;\n         * recorder.setRecordingDuration(fiveMinutes, function() {\n         *    var blob = this.getBlob();\n         *    video.src = this.toURL();\n         * });\n         *\n         * // or otherwise\n         * recorder.setRecordingDuration(fiveMinutes).onRecordingStopped(function() {\n         *    var blob = this.getBlob();\n         *    video.src = this.toURL();\n         * });\n         */\n        setRecordingDuration: function(recordingDuration, callback) {\n            if (typeof recordingDuration === 'undefined') {\n                throw 'recordingDuration is required.';\n            }\n\n            if (typeof recordingDuration !== 'number') {\n                throw 'recordingDuration must be a number.';\n            }\n\n            self.recordingDuration = recordingDuration;\n            self.onRecordingStopped = callback || function() {};\n\n            return {\n                onRecordingStopped: function(callback) {\n                    self.onRecordingStopped = callback;\n                }\n            };\n        },\n\n        /**\n         * This method can be used to clear/reset all the recorded data.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @todo Figure out the difference between \"reset\" and \"clearRecordedData\" methods.\n         * @example\n         * recorder.clearRecordedData();\n         */\n        clearRecordedData: function() {\n            if (!mediaRecorder) {\n                warningLog();\n                return;\n            }\n\n            mediaRecorder.clearRecordedData();\n\n            if (!config.disableLogs) {\n                console.log('Cleared old recorded data.');\n            }\n        },\n\n        /**\n         * Get the recorded blob. Use this method inside the \"stopRecording\" callback.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.stopRecording(function() {\n         *     var blob = this.getBlob();\n         *\n         *     var file = new File([blob], 'filename.webm', {\n         *         type: 'video/webm'\n         *     });\n         *\n         *     var formData = new FormData();\n         *     formData.append('file', file); // upload \"File\" object rather than a \"Blob\"\n         *     uploadToServer(formData);\n         * });\n         * @returns {Blob} Returns recorded data as \"Blob\" object.\n         */\n        getBlob: function() {\n            if (!mediaRecorder) {\n                warningLog();\n                return;\n            }\n\n            return mediaRecorder.blob;\n        },\n\n        /**\n         * Get data-URI instead of Blob.\n         * @param {function} callback - Callback to get the Data-URI.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.stopRecording(function() {\n         *     recorder.getDataURL(function(dataURI) {\n         *         video.src = dataURI;\n         *     });\n         * });\n         */\n        getDataURL: getDataURL,\n\n        /**\n         * Get virtual/temporary URL. Usage of this URL is limited to current tab.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.stopRecording(function() {\n         *     video.src = this.toURL();\n         * });\n         * @returns {String} Returns a virtual/temporary URL for the recorded \"Blob\".\n         */\n        toURL: function() {\n            if (!mediaRecorder) {\n                warningLog();\n                return;\n            }\n\n            return URL.createObjectURL(mediaRecorder.blob);\n        },\n\n        /**\n         * Get internal recording object (i.e. internal module) e.g. MutliStreamRecorder, MediaStreamRecorder, StereoAudioRecorder or WhammyRecorder etc.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * var internal = recorder.getInternalRecorder();\n         * if(internal instanceof MultiStreamRecorder) {\n         *     internal.addStreams([newAudioStream]);\n         *     internal.resetVideoStreams([screenStream]);\n         * }\n         * @returns {Object} Returns internal recording object.\n         */\n        getInternalRecorder: function() {\n            return mediaRecorder;\n        },\n\n        /**\n         * Invoke save-as dialog to save the recorded blob into your disk.\n         * @param {string} fileName - Set your own file name.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.stopRecording(function() {\n         *     this.save('file-name');\n         *\n         *     // or manually:\n         *     invokeSaveAsDialog(this.getBlob(), 'filename.webm');\n         * });\n         */\n        save: function(fileName) {\n            if (!mediaRecorder) {\n                warningLog();\n                return;\n            }\n\n            invokeSaveAsDialog(mediaRecorder.blob, fileName);\n        },\n\n        /**\n         * This method gets a blob from indexed-DB storage.\n         * @param {function} callback - Callback to get the recorded blob.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.getFromDisk(function(dataURL) {\n         *     video.src = dataURL;\n         * });\n         */\n        getFromDisk: function(callback) {\n            if (!mediaRecorder) {\n                warningLog();\n                return;\n            }\n\n            RecordRTC.getFromDisk(config.type, callback);\n        },\n\n        /**\n         * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\n         * @type {Array.<Array>}\n         * @param {Array} arrayOfWebPImages - Array of webp images.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @todo This method should be deprecated.\n         * @example\n         * var arrayOfWebPImages = [];\n         * arrayOfWebPImages.push({\n         *     duration: index,\n         *     image: 'data:image/webp;base64,...'\n         * });\n         * recorder.setAdvertisementArray(arrayOfWebPImages);\n         */\n        setAdvertisementArray: function(arrayOfWebPImages) {\n            config.advertisement = [];\n\n            var length = arrayOfWebPImages.length;\n            for (var i = 0; i < length; i++) {\n                config.advertisement.push({\n                    duration: i,\n                    image: arrayOfWebPImages[i]\n                });\n            }\n        },\n\n        /**\n         * It is equivalent to <code class=\"str\">\"recorder.getBlob()\"</code> method. Usage of \"getBlob\" is recommended, though.\n         * @property {Blob} blob - Recorded Blob can be accessed using this property.\n         * @memberof RecordRTC\n         * @instance\n         * @readonly\n         * @example\n         * recorder.stopRecording(function() {\n         *     var blob = this.blob;\n         *\n         *     // below one is recommended\n         *     var blob = this.getBlob();\n         * });\n         */\n        blob: null,\n\n        /**\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\n         * @property {number} bufferSize - Buffer-size used to encode the WAV container\n         * @memberof RecordRTC\n         * @instance\n         * @readonly\n         * @example\n         * recorder.stopRecording(function() {\n         *     alert('Recorder used this buffer-size: ' + this.bufferSize);\n         * });\n         */\n        bufferSize: 0,\n\n        /**\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\n         * @property {number} sampleRate - Sample-rates used to encode the WAV container\n         * @memberof RecordRTC\n         * @instance\n         * @readonly\n         * @example\n         * recorder.stopRecording(function() {\n         *     alert('Recorder used these sample-rates: ' + this.sampleRate);\n         * });\n         */\n        sampleRate: 0,\n\n        /**\n         * {recorderType:StereoAudioRecorder} returns ArrayBuffer object.\n         * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\n         * @memberof RecordRTC\n         * @instance\n         * @readonly\n         * @example\n         * recorder.stopRecording(function() {\n         *     var arrayBuffer = this.buffer;\n         *     alert(arrayBuffer.byteLength);\n         * });\n         */\n        buffer: null,\n\n        /**\n         * This method resets the recorder. So that you can reuse single recorder instance many times.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.reset();\n         * recorder.startRecording();\n         */\n        reset: function() {\n            if (mediaRecorder && typeof mediaRecorder.clearRecordedData === 'function') {\n                mediaRecorder.clearRecordedData();\n            }\n            mediaRecorder = null;\n            setState('inactive');\n            self.blob = null;\n        },\n\n        /**\n         * This method is called whenever recorder's state changes. Use this as an \"event\".\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recorder.onStateChanged = function(state) {\n         *     console.log('Recorder state: ', state);\n         * };\n         */\n        onStateChanged: function(state) {\n            if (!config.disableLogs) {\n                console.log('Recorder state changed:', state);\n            }\n        },\n\n        /**\n         * A recorder can have inactive, recording, paused or stopped states.\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\n         * @memberof RecordRTC\n         * @static\n         * @readonly\n         * @example\n         * // this looper function will keep you updated about the recorder's states.\n         * (function looper() {\n         *     document.querySelector('h1').innerHTML = 'Recorder\\'s state is: ' + recorder.state;\n         *     if(recorder.state === 'stopped') return; // ignore+stop\n         *     setTimeout(looper, 1000); // update after every 3-seconds\n         * })();\n         * recorder.startRecording();\n         */\n        state: 'inactive',\n\n        /**\n         * Get recorder's readonly state.\n         * @method\n         * @memberof RecordRTC\n         * @example\n         * var state = recorder.getState();\n         * @returns {String} Returns recording state.\n         */\n        getState: function() {\n            return self.state;\n        },\n\n        /**\n         * Destroy RecordRTC instance. Clear all recorders and objects.\n         * @method\n         * @memberof RecordRTC\n         * @example\n         * recorder.destroy();\n         */\n        destroy: function() {\n            var disableLogsCache = config.disableLogs;\n\n            config = {\n                disableLogs: true\n            };\n            self.reset();\n            setState('destroyed');\n            returnObject = self = null;\n\n            if (Storage.AudioContextConstructor) {\n                Storage.AudioContextConstructor.close();\n                Storage.AudioContextConstructor = null;\n            }\n\n            config.disableLogs = disableLogsCache;\n\n            if (!config.disableLogs) {\n                console.warn('RecordRTC is destroyed.');\n            }\n        },\n\n        /**\n         * RecordRTC version number\n         * @property {String} version - Release version number.\n         * @memberof RecordRTC\n         * @static\n         * @readonly\n         * @example\n         * alert(recorder.version);\n         */\n        version: '5.5.4'\n    };\n\n    if (!this) {\n        self = returnObject;\n        return returnObject;\n    }\n\n    // if someone wants to use RecordRTC with the \"new\" keyword.\n    for (var prop in returnObject) {\n        this[prop] = returnObject[prop];\n    }\n\n    self = this;\n\n    return returnObject;\n}\n\nRecordRTC.version = '5.5.4';\n\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\n    module.exports = RecordRTC;\n}\n\nif (typeof define === 'function' && define.amd) {\n    define('RecordRTC', [], function() {\n        return RecordRTC;\n    });\n}\n\nRecordRTC.getFromDisk = function(type, callback) {\n    if (!callback) {\n        throw 'callback is mandatory.';\n    }\n\n    console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\n    DiskStorage.Fetch(function(dataURL, _type) {\n        if (type !== 'all' && _type === type + 'Blob' && callback) {\n            callback(dataURL);\n        }\n\n        if (type === 'all' && callback) {\n            callback(dataURL, _type.replace('Blob', ''));\n        }\n    });\n};\n\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof RecordRTC\n * @example\n * RecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\nRecordRTC.writeToDisk = function(options) {\n    console.log('Writing recorded blob(s) to disk!');\n    options = options || {};\n    if (options.audio && options.video && options.gif) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.video.getDataURL(function(videoDataURL) {\n                options.gif.getDataURL(function(gifDataURL) {\n                    DiskStorage.Store({\n                        audioBlob: audioDataURL,\n                        videoBlob: videoDataURL,\n                        gifBlob: gifDataURL\n                    });\n                });\n            });\n        });\n    } else if (options.audio && options.video) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.video.getDataURL(function(videoDataURL) {\n                DiskStorage.Store({\n                    audioBlob: audioDataURL,\n                    videoBlob: videoDataURL\n                });\n            });\n        });\n    } else if (options.audio && options.gif) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.gif.getDataURL(function(gifDataURL) {\n                DiskStorage.Store({\n                    audioBlob: audioDataURL,\n                    gifBlob: gifDataURL\n                });\n            });\n        });\n    } else if (options.video && options.gif) {\n        options.video.getDataURL(function(videoDataURL) {\n            options.gif.getDataURL(function(gifDataURL) {\n                DiskStorage.Store({\n                    videoBlob: videoDataURL,\n                    gifBlob: gifDataURL\n                });\n            });\n        });\n    } else if (options.audio) {\n        options.audio.getDataURL(function(audioDataURL) {\n            DiskStorage.Store({\n                audioBlob: audioDataURL\n            });\n        });\n    } else if (options.video) {\n        options.video.getDataURL(function(videoDataURL) {\n            DiskStorage.Store({\n                videoBlob: videoDataURL\n            });\n        });\n    } else if (options.gif) {\n        options.gif.getDataURL(function(gifDataURL) {\n            DiskStorage.Store({\n                gifBlob: gifDataURL\n            });\n        });\n    }\n};\n\n// __________________________\n// RecordRTC-Configuration.js\n\n/**\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTCConfiguration\n * @class\n * @example\n * var options = RecordRTCConfiguration(mediaStream, options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\n */\n\nfunction RecordRTCConfiguration(mediaStream, config) {\n    if (!config.recorderType && !config.type) {\n        if (!!config.audio && !!config.video) {\n            config.type = 'video';\n        } else if (!!config.audio && !config.video) {\n            config.type = 'audio';\n        }\n    }\n\n    if (config.recorderType && !config.type) {\n        if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder || (typeof WebAssemblyRecorder !== 'undefined' && config.recorderType === WebAssemblyRecorder)) {\n            config.type = 'video';\n        } else if (config.recorderType === GifRecorder) {\n            config.type = 'gif';\n        } else if (config.recorderType === StereoAudioRecorder) {\n            config.type = 'audio';\n        } else if (config.recorderType === MediaStreamRecorder) {\n            if (getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\n                config.type = 'video';\n            } else if (!getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\n                config.type = 'video';\n            } else if (getTracks(mediaStream, 'audio').length && !getTracks(mediaStream, 'video').length) {\n                config.type = 'audio';\n            } else {\n                // config.type = 'UnKnown';\n            }\n        }\n    }\n\n    if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n        if (!config.mimeType) {\n            config.mimeType = 'video/webm';\n        }\n\n        if (!config.type) {\n            config.type = config.mimeType.split('/')[0];\n        }\n\n        if (!config.bitsPerSecond) {\n            // config.bitsPerSecond = 128000;\n        }\n    }\n\n    // consider default type=audio\n    if (!config.type) {\n        if (config.mimeType) {\n            config.type = config.mimeType.split('/')[0];\n        }\n        if (!config.type) {\n            config.type = 'audio';\n        }\n    }\n\n    return config;\n}\n\n// __________________\n// GetRecorderType.js\n\n/**\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\n * @summary It returns best recorder-type available for your browser.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GetRecorderType\n * @class\n * @example\n * var RecorderType = GetRecorderType(options);\n * var recorder = new RecorderType(options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n */\n\nfunction GetRecorderType(mediaStream, config) {\n    var recorder;\n\n    // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\n    // todo: detect if it is Edge, then auto use: StereoAudioRecorder\n    if (isChrome || isEdge || isOpera) {\n        // Media Stream Recording API has not been implemented in chrome yet;\n        // That's why using WebAudio API to record stereo audio in WAV format\n        recorder = StereoAudioRecorder;\n    }\n\n    if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\n        recorder = MediaStreamRecorder;\n    }\n\n    // video recorder (in WebM format)\n    if (config.type === 'video' && (isChrome || isOpera)) {\n        recorder = WhammyRecorder;\n\n        if (typeof WebAssemblyRecorder !== 'undefined' && typeof ReadableStream !== 'undefined') {\n            recorder = WebAssemblyRecorder;\n        }\n    }\n\n    // video recorder (in Gif format)\n    if (config.type === 'gif') {\n        recorder = GifRecorder;\n    }\n\n    // html2canvas recording!\n    if (config.type === 'canvas') {\n        recorder = CanvasRecorder;\n    }\n\n    if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n        if (getTracks(mediaStream, 'video').length || getTracks(mediaStream, 'audio').length) {\n            // audio-only recording\n            if (config.type === 'audio') {\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\n                    recorder = MediaStreamRecorder;\n                }\n                // else recorder = StereoAudioRecorder;\n            } else {\n                // video or screen tracks\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\n                    recorder = MediaStreamRecorder;\n                }\n            }\n        }\n    }\n\n    if (mediaStream instanceof Array && mediaStream.length) {\n        recorder = MultiStreamRecorder;\n    }\n\n    if (config.recorderType) {\n        recorder = config.recorderType;\n    }\n\n    if (!config.disableLogs && !!recorder && !!recorder.name) {\n        console.log('Using recorderType:', recorder.name || recorder.constructor.name);\n    }\n\n    if (!recorder && isSafari) {\n        recorder = MediaStreamRecorder;\n    }\n\n    return recorder;\n}\n\n// _____________\n// MRecordRTC.js\n\n/**\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MRecordRTC\n * @class\n * @example\n * var recorder = new MRecordRTC();\n * recorder.addStream(MediaStream);\n * recorder.mediaType = {\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\n *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\n *     gif: true    // or GifRecorder\n * };\n * // mimeType is optional and should be set only in advance cases.\n * recorder.mimeType = {\n *     audio: 'audio/wav',\n *     video: 'video/webm',\n *     gif:   'image/gif'\n * };\n * recorder.startRecording();\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @requires {@link RecordRTC}\n */\n\nfunction MRecordRTC(mediaStream) {\n\n    /**\n     * This method attaches MediaStream object to {@link MRecordRTC}.\n     * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.addStream(MediaStream);\n     */\n    this.addStream = function(_mediaStream) {\n        if (_mediaStream) {\n            mediaStream = _mediaStream;\n        }\n    };\n\n    /**\n     * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\n     * @property {object} mediaType - {audio: true, video: true, gif: true}\n     * @memberof MRecordRTC\n     * @example\n     * var recorder = new MRecordRTC();\n     * recorder.mediaType = {\n     *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\n     *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\n     *     gif  : true  // TRUE or GifRecorder\n     * };\n     */\n    this.mediaType = {\n        audio: true,\n        video: true\n    };\n\n    /**\n     * This method starts recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.startRecording();\n     */\n    this.startRecording = function() {\n        var mediaType = this.mediaType;\n        var recorderType;\n        var mimeType = this.mimeType || {\n            audio: null,\n            video: null,\n            gif: null\n        };\n\n        if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'audio').length) {\n            mediaType.audio = false;\n        }\n\n        if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\n            mediaType.video = false;\n        }\n\n        if (typeof mediaType.gif !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\n            mediaType.gif = false;\n        }\n\n        if (!mediaType.audio && !mediaType.video && !mediaType.gif) {\n            throw 'MediaStream must have either audio or video tracks.';\n        }\n\n        if (!!mediaType.audio) {\n            recorderType = null;\n            if (typeof mediaType.audio === 'function') {\n                recorderType = mediaType.audio;\n            }\n\n            this.audioRecorder = new RecordRTC(mediaStream, {\n                type: 'audio',\n                bufferSize: this.bufferSize,\n                sampleRate: this.sampleRate,\n                numberOfAudioChannels: this.numberOfAudioChannels || 2,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.audio,\n                timeSlice: this.timeSlice,\n                onTimeStamp: this.onTimeStamp\n            });\n\n            if (!mediaType.video) {\n                this.audioRecorder.startRecording();\n            }\n        }\n\n        if (!!mediaType.video) {\n            recorderType = null;\n            if (typeof mediaType.video === 'function') {\n                recorderType = mediaType.video;\n            }\n\n            var newStream = mediaStream;\n\n            if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\n                var videoTrack = getTracks(mediaStream, 'video')[0];\n\n                if (isFirefox) {\n                    newStream = new MediaStream();\n                    newStream.addTrack(videoTrack);\n\n                    if (recorderType && recorderType === WhammyRecorder) {\n                        // Firefox does NOT supports webp-encoding yet\n                        // But Firefox do supports WebAssemblyRecorder\n                        recorderType = MediaStreamRecorder;\n                    }\n                } else {\n                    newStream = new MediaStream();\n                    newStream.addTrack(videoTrack);\n                }\n            }\n\n            this.videoRecorder = new RecordRTC(newStream, {\n                type: 'video',\n                video: this.video,\n                canvas: this.canvas,\n                frameInterval: this.frameInterval || 10,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.video,\n                timeSlice: this.timeSlice,\n                onTimeStamp: this.onTimeStamp,\n                workerPath: this.workerPath,\n                webAssemblyPath: this.webAssemblyPath,\n                frameRate: this.frameRate, // used by WebAssemblyRecorder; values: usually 30; accepts any.\n                bitrate: this.bitrate // used by WebAssemblyRecorder; values: 0 to 1000+\n            });\n\n            if (!mediaType.audio) {\n                this.videoRecorder.startRecording();\n            }\n        }\n\n        if (!!mediaType.audio && !!mediaType.video) {\n            var self = this;\n\n            var isSingleRecorder = isMediaRecorderCompatible() === true;\n\n            if (mediaType.audio instanceof StereoAudioRecorder && !!mediaType.video) {\n                isSingleRecorder = false;\n            } else if (mediaType.audio !== true && mediaType.video !== true && mediaType.audio !== mediaType.video) {\n                isSingleRecorder = false;\n            }\n\n            if (isSingleRecorder === true) {\n                self.audioRecorder = null;\n                self.videoRecorder.startRecording();\n            } else {\n                self.videoRecorder.initRecorder(function() {\n                    self.audioRecorder.initRecorder(function() {\n                        // Both recorders are ready to record things accurately\n                        self.videoRecorder.startRecording();\n                        self.audioRecorder.startRecording();\n                    });\n                });\n            }\n        }\n\n        if (!!mediaType.gif) {\n            recorderType = null;\n            if (typeof mediaType.gif === 'function') {\n                recorderType = mediaType.gif;\n            }\n            this.gifRecorder = new RecordRTC(mediaStream, {\n                type: 'gif',\n                frameRate: this.frameRate || 200,\n                quality: this.quality || 10,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.gif\n            });\n            this.gifRecorder.startRecording();\n        }\n    };\n\n    /**\n     * This method stops recording.\n     * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.stopRecording(function(recording){\n     *     var audioBlob = recording.audio;\n     *     var videoBlob = recording.video;\n     *     var gifBlob   = recording.gif;\n     * });\n     */\n    this.stopRecording = function(callback) {\n        callback = callback || function() {};\n\n        if (this.audioRecorder) {\n            this.audioRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'audio');\n            });\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'video');\n            });\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'gif');\n            });\n        }\n    };\n\n    /**\n     * This method pauses recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.pauseRecording();\n     */\n    this.pauseRecording = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.pauseRecording();\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.pauseRecording();\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.pauseRecording();\n        }\n    };\n\n    /**\n     * This method resumes recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.resumeRecording();\n     */\n    this.resumeRecording = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.resumeRecording();\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.resumeRecording();\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.resumeRecording();\n        }\n    };\n\n    /**\n     * This method can be used to manually get all recorded blobs.\n     * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.getBlob(function(recording){\n     *     var audioBlob = recording.audio;\n     *     var videoBlob = recording.video;\n     *     var gifBlob   = recording.gif;\n     * });\n     * // or\n     * var audioBlob = recorder.getBlob().audio;\n     * var videoBlob = recorder.getBlob().video;\n     */\n    this.getBlob = function(callback) {\n        var output = {};\n\n        if (this.audioRecorder) {\n            output.audio = this.audioRecorder.getBlob();\n        }\n\n        if (this.videoRecorder) {\n            output.video = this.videoRecorder.getBlob();\n        }\n\n        if (this.gifRecorder) {\n            output.gif = this.gifRecorder.getBlob();\n        }\n\n        if (callback) {\n            callback(output);\n        }\n\n        return output;\n    };\n\n    /**\n     * Destroy all recorder instances.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.destroy();\n     */\n    this.destroy = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.destroy();\n            this.audioRecorder = null;\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.destroy();\n            this.videoRecorder = null;\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.destroy();\n            this.gifRecorder = null;\n        }\n    };\n\n    /**\n     * This method can be used to manually get all recorded blobs' DataURLs.\n     * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.getDataURL(function(recording){\n     *     var audioDataURL = recording.audio;\n     *     var videoDataURL = recording.video;\n     *     var gifDataURL   = recording.gif;\n     * });\n     */\n    this.getDataURL = function(callback) {\n        this.getBlob(function(blob) {\n            if (blob.audio && blob.video) {\n                getDataURL(blob.audio, function(_audioDataURL) {\n                    getDataURL(blob.video, function(_videoDataURL) {\n                        callback({\n                            audio: _audioDataURL,\n                            video: _videoDataURL\n                        });\n                    });\n                });\n            } else if (blob.audio) {\n                getDataURL(blob.audio, function(_audioDataURL) {\n                    callback({\n                        audio: _audioDataURL\n                    });\n                });\n            } else if (blob.video) {\n                getDataURL(blob.video, function(_videoDataURL) {\n                    callback({\n                        video: _videoDataURL\n                    });\n                });\n            }\n        });\n\n        function getDataURL(blob, callback00) {\n            if (typeof Worker !== 'undefined') {\n                var webWorker = processInWebWorker(function readFile(_blob) {\n                    postMessage(new FileReaderSync().readAsDataURL(_blob));\n                });\n\n                webWorker.onmessage = function(event) {\n                    callback00(event.data);\n                };\n\n                webWorker.postMessage(blob);\n            } else {\n                var reader = new FileReader();\n                reader.readAsDataURL(blob);\n                reader.onload = function(event) {\n                    callback00(event.target.result);\n                };\n            }\n        }\n\n        function processInWebWorker(_function) {\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\n                'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\n            ], {\n                type: 'application/javascript'\n            }));\n\n            var worker = new Worker(blob);\n            var url;\n            if (typeof URL !== 'undefined') {\n                url = URL;\n            } else if (typeof webkitURL !== 'undefined') {\n                url = webkitURL;\n            } else {\n                throw 'Neither URL nor webkitURL detected.';\n            }\n            url.revokeObjectURL(blob);\n            return worker;\n        }\n    };\n\n    /**\n     * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.writeToDisk();\n     */\n    this.writeToDisk = function() {\n        RecordRTC.writeToDisk({\n            audio: this.audioRecorder,\n            video: this.videoRecorder,\n            gif: this.gifRecorder\n        });\n    };\n\n    /**\n     * This method can be used to invoke a save-as dialog for all recorded blobs.\n     * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.save({\n     *     audio: 'audio-file-name',\n     *     video: 'video-file-name',\n     *     gif  : 'gif-file-name'\n     * });\n     */\n    this.save = function(args) {\n        args = args || {\n            audio: true,\n            video: true,\n            gif: true\n        };\n\n        if (!!args.audio && this.audioRecorder) {\n            this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\n        }\n\n        if (!!args.video && this.videoRecorder) {\n            this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\n        }\n        if (!!args.gif && this.gifRecorder) {\n            this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\n        }\n    };\n}\n\n/**\n * This method can be used to get all recorded blobs from IndexedDB storage.\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\n * @param {function} callback - Callback function to get all stored blobs.\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\n *     if(type === 'audio') { }\n *     if(type === 'video') { }\n *     if(type === 'gif')   { }\n * });\n */\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\n\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MRecordRTC = MRecordRTC;\n}\n\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n(function(that) {\n    if (!that) {\n        return;\n    }\n\n    if (typeof window !== 'undefined') {\n        return;\n    }\n\n    if (typeof global === 'undefined') {\n        return;\n    }\n\n    global.navigator = {\n        userAgent: browserFakeUserAgent,\n        getUserMedia: function() {}\n    };\n\n    if (!global.console) {\n        global.console = {};\n    }\n\n    if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\n        global.console.error = global.console.log = global.console.log || function() {\n            console.log(arguments);\n        };\n    }\n\n    if (typeof document === 'undefined') {\n        /*global document:true */\n        that.document = {};\n\n        document.createElement = document.captureStream = document.mozCaptureStream = function() {\n            var obj = {\n                getContext: function() {\n                    return obj;\n                },\n                play: function() {},\n                pause: function() {},\n                drawImage: function() {},\n                toDataURL: function() {\n                    return '';\n                }\n            };\n            return obj;\n        };\n\n        that.HTMLVideoElement = function() {};\n    }\n\n    if (typeof location === 'undefined') {\n        /*global location:true */\n        that.location = {\n            protocol: 'file:',\n            href: '',\n            hash: ''\n        };\n    }\n\n    if (typeof screen === 'undefined') {\n        /*global screen:true */\n        that.screen = {\n            width: 0,\n            height: 0\n        };\n    }\n\n    if (typeof URL === 'undefined') {\n        /*global screen:true */\n        that.URL = {\n            createObjectURL: function() {\n                return '';\n            },\n            revokeObjectURL: function() {\n                return '';\n            }\n        };\n    }\n\n    /*global window:true */\n    that.window = global;\n})(typeof global !== 'undefined' ? global : null);\n\n// _____________________________\n// Cross-Browser-Declarations.js\n\n// animation-frame used in WebM recording\n\n/*jshint -W079 */\nvar requestAnimationFrame = window.requestAnimationFrame;\nif (typeof requestAnimationFrame === 'undefined') {\n    if (typeof webkitRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = webkitRequestAnimationFrame;\n    } else if (typeof mozRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = mozRequestAnimationFrame;\n    } else if (typeof msRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = msRequestAnimationFrame;\n    } else if (typeof requestAnimationFrame === 'undefined') {\n        // via: https://gist.github.com/paulirish/1579671\n        var lastTime = 0;\n\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = setTimeout(function() {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n}\n\n/*jshint -W079 */\nvar cancelAnimationFrame = window.cancelAnimationFrame;\nif (typeof cancelAnimationFrame === 'undefined') {\n    if (typeof webkitCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = webkitCancelAnimationFrame;\n    } else if (typeof mozCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = mozCancelAnimationFrame;\n    } else if (typeof msCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = msCancelAnimationFrame;\n    } else if (typeof cancelAnimationFrame === 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n}\n\n// WebAudio API representer\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n    if (typeof webkitAudioContext !== 'undefined') {\n        /*global AudioContext:true */\n        AudioContext = webkitAudioContext;\n    }\n\n    if (typeof mozAudioContext !== 'undefined') {\n        /*global AudioContext:true */\n        AudioContext = mozAudioContext;\n    }\n}\n\n/*jshint -W079 */\nvar URL = window.URL;\n\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n    /*global URL:true */\n    URL = webkitURL;\n}\n\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n        navigator.getUserMedia = navigator.webkitGetUserMedia;\n    }\n\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\n        navigator.getUserMedia = navigator.mozGetUserMedia;\n    }\n}\n\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\nvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && ('netscape' in window) && / rv:/.test(navigator.userAgent);\nvar isChrome = (!isOpera && !isEdge && !!navigator.webkitGetUserMedia) || isElectron() || navigator.userAgent.toLowerCase().indexOf('chrome/') !== -1;\n\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nif (isSafari && !isChrome && navigator.userAgent.indexOf('CriOS') !== -1) {\n    isSafari = false;\n    isChrome = true;\n}\n\nvar MediaStream = window.MediaStream;\n\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n    MediaStream = webkitMediaStream;\n}\n\n/*global MediaStream:true */\nif (typeof MediaStream !== 'undefined') {\n    // override \"stop\" method for all browsers\n    if (typeof MediaStream.prototype.stop === 'undefined') {\n        MediaStream.prototype.stop = function() {\n            this.getTracks().forEach(function(track) {\n                track.stop();\n            });\n        };\n    }\n}\n\n// below function via: http://goo.gl/B3ae8c\n/**\n * Return human-readable file size.\n * @param {number} bytes - Pass bytes and get formatted string.\n * @returns {string} - formatted string\n * @example\n * bytesToSize(1024*1024*5) === '5 GB'\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction bytesToSize(bytes) {\n    var k = 1000;\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n        return '0 Bytes';\n    }\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n}\n\n/**\n * @param {Blob} file - File or Blob object. This parameter is required.\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\n * @example\n * invokeSaveAsDialog(blob or file, [optional] fileName);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction invokeSaveAsDialog(file, fileName) {\n    if (!file) {\n        throw 'Blob object is required.';\n    }\n\n    if (!file.type) {\n        try {\n            file.type = 'video/webm';\n        } catch (e) {}\n    }\n\n    var fileExtension = (file.type || 'video/webm').split('/')[1];\n\n    if (fileName && fileName.indexOf('.') !== -1) {\n        var splitted = fileName.split('.');\n        fileName = splitted[0];\n        fileExtension = splitted[1];\n    }\n\n    var fileFullName = (fileName || (Math.round(Math.random() * 9999999999) + 888888888)) + '.' + fileExtension;\n\n    if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n        return navigator.msSaveOrOpenBlob(file, fileFullName);\n    } else if (typeof navigator.msSaveBlob !== 'undefined') {\n        return navigator.msSaveBlob(file, fileFullName);\n    }\n\n    var hyperlink = document.createElement('a');\n    hyperlink.href = URL.createObjectURL(file);\n    hyperlink.download = fileFullName;\n\n    hyperlink.style = 'display:none;opacity:0;color:transparent;';\n    (document.body || document.documentElement).appendChild(hyperlink);\n\n    if (typeof hyperlink.click === 'function') {\n        hyperlink.click();\n    } else {\n        hyperlink.target = '_blank';\n        hyperlink.dispatchEvent(new MouseEvent('click', {\n            view: window,\n            bubbles: true,\n            cancelable: true\n        }));\n    }\n\n    URL.revokeObjectURL(hyperlink.href);\n}\n\n/**\n * from: https://github.com/cheton/is-electron/blob/master/index.js\n **/\nfunction isElectron() {\n    // Renderer process\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n        return true;\n    }\n\n    // Main process\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\n        return true;\n    }\n\n    // Detect the user agent when the `nodeIntegration` option is set to true\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction getTracks(stream, kind) {\n    if (!stream || !stream.getTracks) {\n        return [];\n    }\n\n    return stream.getTracks().filter(function(t) {\n        return t.kind === (kind || 'audio');\n    });\n}\n\nfunction setSrcObject(stream, element) {\n    if ('srcObject' in element) {\n        element.srcObject = stream;\n    } else if ('mozSrcObject' in element) {\n        element.mozSrcObject = stream;\n    } else {\n        element.srcObject = stream;\n    }\n}\n\n/**\n * @param {Blob} file - File or Blob object.\n * @param {function} callback - Callback function.\n * @example\n * getSeekableBlob(blob or file, callback);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction getSeekableBlob(inputBlob, callback) {\n    // EBML.js copyrights goes to: https://github.com/legokichi/ts-ebml\n    if (typeof EBML === 'undefined') {\n        throw new Error('Please link: https://cdn.webrtc-experiment.com/EBML.js');\n    }\n\n    var reader = new EBML.Reader();\n    var decoder = new EBML.Decoder();\n    var tools = EBML.tools;\n\n    var fileReader = new FileReader();\n    fileReader.onload = function(e) {\n        var ebmlElms = decoder.decode(this.result);\n        ebmlElms.forEach(function(element) {\n            reader.read(element);\n        });\n        reader.stop();\n        var refinedMetadataBuf = tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\n        var body = this.result.slice(reader.metadataSize);\n        var newBlob = new Blob([refinedMetadataBuf, body], {\n            type: 'video/webm'\n        });\n\n        callback(newBlob);\n    };\n    fileReader.readAsArrayBuffer(inputBlob);\n}\n\n// __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// Storage.js\n\n/**\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * Storage.AudioContext === webkitAudioContext\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\nvar Storage = {};\n\nif (typeof AudioContext !== 'undefined') {\n    Storage.AudioContext = AudioContext;\n} else if (typeof webkitAudioContext !== 'undefined') {\n    Storage.AudioContext = webkitAudioContext;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.Storage = Storage;\n}\n\nfunction isMediaRecorderCompatible() {\n    if (isFirefox || isSafari || isEdge) {\n        return true;\n    }\n\n    var nVer = navigator.appVersion;\n    var nAgt = navigator.userAgent;\n    var fullVersion = '' + parseFloat(navigator.appVersion);\n    var majorVersion = parseInt(navigator.appVersion, 10);\n    var nameOffset, verOffset, ix;\n\n    if (isChrome || isOpera) {\n        verOffset = nAgt.indexOf('Chrome');\n        fullVersion = nAgt.substring(verOffset + 7);\n    }\n\n    // trim the fullVersion string at semicolon/space if present\n    if ((ix = fullVersion.indexOf(';')) !== -1) {\n        fullVersion = fullVersion.substring(0, ix);\n    }\n\n    if ((ix = fullVersion.indexOf(' ')) !== -1) {\n        fullVersion = fullVersion.substring(0, ix);\n    }\n\n    majorVersion = parseInt('' + fullVersion, 10);\n\n    if (isNaN(majorVersion)) {\n        fullVersion = '' + parseFloat(navigator.appVersion);\n        majorVersion = parseInt(navigator.appVersion, 10);\n    }\n\n    return majorVersion >= 49;\n}\n\n// ______________________\n// MediaStreamRecorder.js\n\n/**\n * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.\n * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link https://github.com/muaz-khan|Muaz Khan}\n * @typedef MediaStreamRecorder\n * @class\n * @example\n * var config = {\n *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis\n *     audioBitsPerSecond : 256 * 8 * 1024,\n *     videoBitsPerSecond : 256 * 8 * 1024,\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\n *     checkForInactiveTracks: true,\n *     timeSlice: 1000, // concatenate intervals based blobs\n *     ondataavailable: function() {} // get intervals based blobs\n * }\n * var recorder = new MediaStreamRecorder(mediaStream, config);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", timeSlice: 1000}\n * @throws Will throw an error if first argument \"MediaStream\" is missing. Also throws error if \"MediaRecorder API\" are not supported by the browser.\n */\n\nfunction MediaStreamRecorder(mediaStream, config) {\n    var self = this;\n\n    if (typeof mediaStream === 'undefined') {\n        throw 'First argument \"MediaStream\" is required.';\n    }\n\n    if (typeof MediaRecorder === 'undefined') {\n        throw 'Your browser does not supports Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.';\n    }\n\n    config = config || {\n        // bitsPerSecond: 256 * 8 * 1024,\n        mimeType: 'video/webm'\n    };\n\n    if (config.type === 'audio') {\n        if (getTracks(mediaStream, 'video').length && getTracks(mediaStream, 'audio').length) {\n            var stream;\n            if (!!navigator.mozGetUserMedia) {\n                stream = new MediaStream();\n                stream.addTrack(getTracks(mediaStream, 'audio')[0]);\n            } else {\n                // webkitMediaStream\n                stream = new MediaStream(getTracks(mediaStream, 'audio'));\n            }\n            mediaStream = stream;\n        }\n\n        if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\n            config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\n        }\n\n        if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\n            // forcing better codecs on Firefox (via #166)\n            config.mimeType = 'audio/ogg';\n        }\n    }\n\n    var arrayOfBlobs = [];\n\n    /**\n     * This method returns array of blobs. Use only with \"timeSlice\". Its useful to preview recording anytime, without using the \"stop\" method.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * var arrayOfBlobs = recorder.getArrayOfBlobs();\n     * @returns {Array} Returns array of recorded blobs.\n     */\n    this.getArrayOfBlobs = function() {\n        return arrayOfBlobs;\n    };\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        // set defaults\n        self.blob = null;\n        self.clearRecordedData();\n        self.timestamps = [];\n        allStates = [];\n        arrayOfBlobs = [];\n\n        var recorderHints = config;\n\n        if (!config.disableLogs) {\n            console.log('Passing following config over MediaRecorder API.', recorderHints);\n        }\n\n        if (mediaRecorder) {\n            // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\n            mediaRecorder = null;\n        }\n\n        if (isChrome && !isMediaRecorderCompatible()) {\n            // to support video-only recording on stable\n            recorderHints = 'video/vp8';\n        }\n\n        if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\n            if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\n                if (!config.disableLogs) {\n                    console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n                }\n\n                recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\n            }\n        }\n\n        // using MediaRecorder API here\n        try {\n            mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\n\n            // reset\n            config.mimeType = recorderHints.mimeType;\n        } catch (e) {\n            // chrome-based fallback\n            mediaRecorder = new MediaRecorder(mediaStream);\n        }\n\n        // old hack?\n        if (recorderHints.mimeType && !MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(recorderHints.mimeType) === false) {\n            if (!config.disableLogs) {\n                console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n            }\n        }\n\n        // Dispatching OnDataAvailable Handler\n        mediaRecorder.ondataavailable = function(e) {\n            if (e.data) {\n                allStates.push('ondataavailable: ' + bytesToSize(e.data.size));\n            }\n\n            if (typeof config.timeSlice === 'number') {\n                if (e.data && e.data.size && e.data.size > 100) {\n                    arrayOfBlobs.push(e.data);\n                    updateTimeStamp();\n\n                    if (typeof config.ondataavailable === 'function') {\n                        // intervals based blobs\n                        var blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n                            type: getMimeType(recorderHints)\n                        });\n                        config.ondataavailable(blob);\n                    }\n                }\n                return;\n            }\n\n            if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\n                // make sure that stopRecording always getting fired\n                // even if there is invalid data\n                if (self.recordingCallback) {\n                    self.recordingCallback(new Blob([], {\n                        type: getMimeType(recorderHints)\n                    }));\n                    self.recordingCallback = null;\n                }\n                return;\n            }\n\n            self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n                type: getMimeType(recorderHints)\n            });\n\n            if (self.recordingCallback) {\n                self.recordingCallback(self.blob);\n                self.recordingCallback = null;\n            }\n        };\n\n        mediaRecorder.onstart = function() {\n            allStates.push('started');\n        };\n\n        mediaRecorder.onpause = function() {\n            allStates.push('paused');\n        };\n\n        mediaRecorder.onresume = function() {\n            allStates.push('resumed');\n        };\n\n        mediaRecorder.onstop = function() {\n            allStates.push('stopped');\n        };\n\n        mediaRecorder.onerror = function(error) {\n            if (!error) {\n                return;\n            }\n\n            if (!error.name) {\n                error.name = 'UnknownError';\n            }\n\n            allStates.push('error: ' + error);\n\n            if (!config.disableLogs) {\n                // via: https://w3c.github.io/mediacapture-record/MediaRecorder.html#exception-summary\n                if (error.name.toString().toLowerCase().indexOf('invalidstate') !== -1) {\n                    console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.', error);\n                } else if (error.name.toString().toLowerCase().indexOf('notsupported') !== -1) {\n                    console.error('MIME type (', recorderHints.mimeType, ') is not supported.', error);\n                } else if (error.name.toString().toLowerCase().indexOf('security') !== -1) {\n                    console.error('MediaRecorder security error', error);\n                }\n\n                // older code below\n                else if (error.name === 'OutOfMemory') {\n                    console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n                } else if (error.name === 'IllegalStreamModification') {\n                    console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n                } else if (error.name === 'OtherRecordingError') {\n                    console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n                } else if (error.name === 'GenericError') {\n                    console.error('The UA cannot provide the codec or recording option that has been requested.', error);\n                } else {\n                    console.error('MediaRecorder Error', error);\n                }\n            }\n\n            (function(looper) {\n                if (!self.manuallyStopped && mediaRecorder && mediaRecorder.state === 'inactive') {\n                    delete config.timeslice;\n\n                    // 10 minutes, enough?\n                    mediaRecorder.start(10 * 60 * 1000);\n                    return;\n                }\n\n                setTimeout(looper, 1000);\n            })();\n\n            if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\n                mediaRecorder.stop();\n            }\n        };\n\n        if (typeof config.timeSlice === 'number') {\n            updateTimeStamp();\n            mediaRecorder.start(config.timeSlice);\n        } else {\n            // default is 60 minutes; enough?\n            // use config => {timeSlice: 1000} otherwise\n\n            mediaRecorder.start(3.6e+6);\n        }\n\n        if (config.initCallback) {\n            config.initCallback(); // old code\n        }\n    };\n\n    /**\n     * @property {Array} timestamps - Array of time stamps\n     * @memberof MediaStreamRecorder\n     * @example\n     * console.log(recorder.timestamps);\n     */\n    this.timestamps = [];\n\n    function updateTimeStamp() {\n        self.timestamps.push(new Date().getTime());\n\n        if (typeof config.onTimeStamp === 'function') {\n            config.onTimeStamp(self.timestamps[self.timestamps.length - 1], self.timestamps);\n        }\n    }\n\n    function getMimeType(secondObject) {\n        if (mediaRecorder && mediaRecorder.mimeType) {\n            return mediaRecorder.mimeType;\n        }\n\n        return secondObject.mimeType || 'video/webm';\n    }\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        callback = callback || function() {};\n\n        self.manuallyStopped = true; // used inside the mediaRecorder.onerror\n\n        if (!mediaRecorder) {\n            return;\n        }\n\n        this.recordingCallback = callback;\n\n        if (mediaRecorder.state === 'recording') {\n            mediaRecorder.stop();\n        }\n\n        if (typeof config.timeSlice === 'number') {\n            setTimeout(function() {\n                self.blob = new Blob(arrayOfBlobs, {\n                    type: getMimeType(config)\n                });\n\n                self.recordingCallback(self.blob);\n            }, 100);\n        }\n    };\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (mediaRecorder.state === 'recording') {\n            mediaRecorder.pause();\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (mediaRecorder.state === 'paused') {\n            mediaRecorder.resume();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (mediaRecorder && mediaRecorder.state === 'recording') {\n            self.stop(clearRecordedDataCB);\n        }\n\n        clearRecordedDataCB();\n    };\n\n    function clearRecordedDataCB() {\n        arrayOfBlobs = [];\n        mediaRecorder = null;\n        self.timestamps = [];\n    }\n\n    // Reference to \"MediaRecorder\" object\n    var mediaRecorder;\n\n    /**\n     * Access to native MediaRecorder API\n     * @method\n     * @memberof MediaStreamRecorder\n     * @instance\n     * @example\n     * var internal = recorder.getInternalRecorder();\n     * internal.ondataavailable = function() {}; // override\n     * internal.stream, internal.onpause, internal.onstop, etc.\n     * @returns {Object} Returns internal recording object.\n     */\n    this.getInternalRecorder = function() {\n        return mediaRecorder;\n    };\n\n    function isMediaStreamActive() {\n        if ('active' in mediaStream) {\n            if (!mediaStream.active) {\n                return false;\n            }\n        } else if ('ended' in mediaStream) { // old hack\n            if (mediaStream.ended) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.stop(function() {\n     *     var blob = recorder.blob;\n     * });\n     */\n    this.blob = null;\n\n\n    /**\n     * Get MediaRecorder readonly state.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * var state = recorder.getState();\n     * @returns {String} Returns recording state.\n     */\n    this.getState = function() {\n        if (!mediaRecorder) {\n            return 'inactive';\n        }\n\n        return mediaRecorder.state || 'inactive';\n    };\n\n    // list of all recording states\n    var allStates = [];\n\n    /**\n     * Get MediaRecorder all recording states.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * var state = recorder.getAllStates();\n     * @returns {Array} Returns all recording states\n     */\n    this.getAllStates = function() {\n        return allStates;\n    };\n\n    // if any Track within the MediaStream is muted or not enabled at any time,\n    // the browser will only record black frames\n    // or silence since that is the content produced by the Track\n    // so we need to stopRecording as soon as any single track ends.\n    if (typeof config.checkForInactiveTracks === 'undefined') {\n        config.checkForInactiveTracks = false; // disable to minimize CPU usage\n    }\n\n    var self = this;\n\n    // this method checks if media stream is stopped\n    // or if any track is ended.\n    (function looper() {\n        if (!mediaRecorder || config.checkForInactiveTracks === false) {\n            return;\n        }\n\n        if (isMediaStreamActive() === false) {\n            if (!config.disableLogs) {\n                console.log('MediaStream seems stopped.');\n            }\n            self.stop();\n            return;\n        }\n\n        setTimeout(looper, 1000); // check every second\n    })();\n\n    // for debugging\n    this.name = 'MediaStreamRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\n}\n\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\n// https://github.com/mattdiamond/Recorderjs#license-mit\n// ______________________\n// StereoAudioRecorder.js\n\n/**\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\n * @summary JavaScript standalone object for stereo audio recording.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef StereoAudioRecorder\n * @class\n * @example\n * var recorder = new StereoAudioRecorder(MediaStream, {\n *     sampleRate: 44100,\n *     bufferSize: 4096\n * });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\n */\n\nfunction StereoAudioRecorder(mediaStream, config) {\n    if (!getTracks(mediaStream, 'audio').length) {\n        throw 'Your stream has no audio tracks.';\n    }\n\n    config = config || {};\n\n    var self = this;\n\n    // variables\n    var leftchannel = [];\n    var rightchannel = [];\n    var recording = false;\n    var recordingLength = 0;\n    var jsAudioNode;\n\n    var numberOfAudioChannels = 2;\n\n    /**\n     * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\n     * @property {number} desiredSampRate - Desired Bits per sample * 1000\n     * @memberof StereoAudioRecorder\n     * @instance\n     * @example\n     * var recorder = StereoAudioRecorder(mediaStream, {\n     *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\n     * });\n     */\n    var desiredSampRate = config.desiredSampRate;\n\n    // backward compatibility\n    if (config.leftChannel === true) {\n        numberOfAudioChannels = 1;\n    }\n\n    if (config.numberOfAudioChannels === 1) {\n        numberOfAudioChannels = 1;\n    }\n\n    if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\n        numberOfAudioChannels = 2;\n    }\n\n    if (!config.disableLogs) {\n        console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\n    }\n\n    // if any Track within the MediaStream is muted or not enabled at any time,\n    // the browser will only record black frames\n    // or silence since that is the content produced by the Track\n    // so we need to stopRecording as soon as any single track ends.\n    if (typeof config.checkForInactiveTracks === 'undefined') {\n        config.checkForInactiveTracks = true;\n    }\n\n    function isMediaStreamActive() {\n        if (config.checkForInactiveTracks === false) {\n            // always return \"true\"\n            return true;\n        }\n\n        if ('active' in mediaStream) {\n            if (!mediaStream.active) {\n                return false;\n            }\n        } else if ('ended' in mediaStream) { // old hack\n            if (mediaStream.ended) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (isMediaStreamActive() === false) {\n            throw 'Please make sure MediaStream is active.';\n        }\n\n        resetVariables();\n\n        isAudioProcessStarted = isPaused = false;\n        recording = true;\n\n        if (typeof config.timeSlice !== 'undefined') {\n            looper();\n        }\n    };\n\n    function mergeLeftRightBuffers(config, callback) {\n        function mergeAudioBuffers(config, cb) {\n            var numberOfAudioChannels = config.numberOfAudioChannels;\n\n            // todo: \"slice(0)\" --- is it causes loop? Should be removed?\n            var leftBuffers = config.leftBuffers.slice(0);\n            var rightBuffers = config.rightBuffers.slice(0);\n            var sampleRate = config.sampleRate;\n            var internalInterleavedLength = config.internalInterleavedLength;\n            var desiredSampRate = config.desiredSampRate;\n\n            if (numberOfAudioChannels === 2) {\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n                rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\n\n                if (desiredSampRate) {\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\n                    rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\n                }\n            }\n\n            if (numberOfAudioChannels === 1) {\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n\n                if (desiredSampRate) {\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\n                }\n            }\n\n            // set sample rate as desired sample rate\n            if (desiredSampRate) {\n                sampleRate = desiredSampRate;\n            }\n\n            // for changing the sampling rate, reference:\n            // http://stackoverflow.com/a/28977136/552182\n            function interpolateArray(data, newSampleRate, oldSampleRate) {\n                var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\n                var newData = [];\n                var springFactor = Number((data.length - 1) / (fitCount - 1));\n                newData[0] = data[0];\n                for (var i = 1; i < fitCount - 1; i++) {\n                    var tmp = i * springFactor;\n                    var before = Number(Math.floor(tmp)).toFixed();\n                    var after = Number(Math.ceil(tmp)).toFixed();\n                    var atPoint = tmp - before;\n                    newData[i] = linearInterpolate(data[before], data[after], atPoint);\n                }\n                newData[fitCount - 1] = data[data.length - 1];\n                return newData;\n            }\n\n            function linearInterpolate(before, after, atPoint) {\n                return before + (after - before) * atPoint;\n            }\n\n            function mergeBuffers(channelBuffer, rLength) {\n                var result = new Float64Array(rLength);\n                var offset = 0;\n                var lng = channelBuffer.length;\n\n                for (var i = 0; i < lng; i++) {\n                    var buffer = channelBuffer[i];\n                    result.set(buffer, offset);\n                    offset += buffer.length;\n                }\n\n                return result;\n            }\n\n            function interleave(leftChannel, rightChannel) {\n                var length = leftChannel.length + rightChannel.length;\n\n                var result = new Float64Array(length);\n\n                var inputIndex = 0;\n\n                for (var index = 0; index < length;) {\n                    result[index++] = leftChannel[inputIndex];\n                    result[index++] = rightChannel[inputIndex];\n                    inputIndex++;\n                }\n                return result;\n            }\n\n            function writeUTFBytes(view, offset, string) {\n                var lng = string.length;\n                for (var i = 0; i < lng; i++) {\n                    view.setUint8(offset + i, string.charCodeAt(i));\n                }\n            }\n\n            // interleave both channels together\n            var interleaved;\n\n            if (numberOfAudioChannels === 2) {\n                interleaved = interleave(leftBuffers, rightBuffers);\n            }\n\n            if (numberOfAudioChannels === 1) {\n                interleaved = leftBuffers;\n            }\n\n            var interleavedLength = interleaved.length;\n\n            // create wav file\n            var resultingBufferLength = 44 + interleavedLength * 2;\n\n            var buffer = new ArrayBuffer(resultingBufferLength);\n\n            var view = new DataView(buffer);\n\n            // RIFF chunk descriptor/identifier\n            writeUTFBytes(view, 0, 'RIFF');\n\n            // RIFF chunk length\n            // changed \"44\" to \"36\" via #401\n            view.setUint32(4, 36 + interleavedLength * 2, true);\n\n            // RIFF type\n            writeUTFBytes(view, 8, 'WAVE');\n\n            // format chunk identifier\n            // FMT sub-chunk\n            writeUTFBytes(view, 12, 'fmt ');\n\n            // format chunk length\n            view.setUint32(16, 16, true);\n\n            // sample format (raw)\n            view.setUint16(20, 1, true);\n\n            // stereo (2 channels)\n            view.setUint16(22, numberOfAudioChannels, true);\n\n            // sample rate\n            view.setUint32(24, sampleRate, true);\n\n            // byte rate (sample rate * block align)\n            view.setUint32(28, sampleRate * 2, true);\n\n            // block align (channel count * bytes per sample)\n            view.setUint16(32, numberOfAudioChannels * 2, true);\n\n            // bits per sample\n            view.setUint16(34, 16, true);\n\n            // data sub-chunk\n            // data chunk identifier\n            writeUTFBytes(view, 36, 'data');\n\n            // data chunk length\n            view.setUint32(40, interleavedLength * 2, true);\n\n            // write the PCM samples\n            var lng = interleavedLength;\n            var index = 44;\n            var volume = 1;\n            for (var i = 0; i < lng; i++) {\n                view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n                index += 2;\n            }\n\n            if (cb) {\n                return cb({\n                    buffer: buffer,\n                    view: view\n                });\n            }\n\n            postMessage({\n                buffer: buffer,\n                view: view\n            });\n        }\n\n        if (config.noWorker) {\n            mergeAudioBuffers(config, function(data) {\n                callback(data.buffer, data.view);\n            });\n            return;\n        }\n\n\n        var webWorker = processInWebWorker(mergeAudioBuffers);\n\n        webWorker.onmessage = function(event) {\n            callback(event.data.buffer, event.data.view);\n\n            // release memory\n            URL.revokeObjectURL(webWorker.workerURL);\n\n            // kill webworker (or Chrome will kill your page after ~25 calls)\n            webWorker.terminate();\n        };\n\n        webWorker.postMessage(config);\n    }\n\n    function processInWebWorker(_function) {\n        var workerURL = URL.createObjectURL(new Blob([_function.toString(),\n            ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\n        ], {\n            type: 'application/javascript'\n        }));\n\n        var worker = new Worker(workerURL);\n        worker.workerURL = workerURL;\n        return worker;\n    }\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        callback = callback || function() {};\n\n        // stop recording\n        recording = false;\n\n        mergeLeftRightBuffers({\n            desiredSampRate: desiredSampRate,\n            sampleRate: sampleRate,\n            numberOfAudioChannels: numberOfAudioChannels,\n            internalInterleavedLength: recordingLength,\n            leftBuffers: leftchannel,\n            rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\n            noWorker: config.noWorker\n        }, function(buffer, view) {\n            /**\n             * @property {Blob} blob - The recorded blob object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var blob = recorder.blob;\n             * });\n             */\n            self.blob = new Blob([view], {\n                type: 'audio/wav'\n            });\n\n            /**\n             * @property {ArrayBuffer} buffer - The recorded buffer object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var buffer = recorder.buffer;\n             * });\n             */\n            self.buffer = new ArrayBuffer(view.buffer.byteLength);\n\n            /**\n             * @property {DataView} view - The recorded data-view object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var view = recorder.view;\n             * });\n             */\n            self.view = view;\n\n            self.sampleRate = desiredSampRate || sampleRate;\n            self.bufferSize = bufferSize;\n\n            // recorded audio length\n            self.length = recordingLength;\n\n            isAudioProcessStarted = false;\n\n            if (callback) {\n                callback(self.blob);\n            }\n        });\n    };\n\n    if (typeof Storage === 'undefined') {\n        var Storage = {\n            AudioContextConstructor: null,\n            AudioContext: window.AudioContext || window.webkitAudioContext\n        };\n    }\n\n    if (!Storage.AudioContextConstructor) {\n        Storage.AudioContextConstructor = new Storage.AudioContext();\n    }\n\n    var context = Storage.AudioContextConstructor;\n\n    // creates an audio node from the microphone incoming stream\n    var audioInput = context.createMediaStreamSource(mediaStream);\n\n    var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\n\n    /**\n     * From the spec: This value controls how frequently the audioprocess event is\n     * dispatched and how many sample-frames need to be processed each call.\n     * Lower values for buffer size will result in a lower (better) latency.\n     * Higher values will be necessary to avoid audio breakup and glitches\n     * The size of the buffer (in sample-frames) which needs to\n     * be processed each time onprocessaudio is called.\n     * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\n     * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder = new StereoAudioRecorder(mediaStream, {\n     *     bufferSize: 4096\n     * });\n     */\n\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\n    var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\n\n    if (legalBufferValues.indexOf(bufferSize) === -1) {\n        if (!config.disableLogs) {\n            console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\n        }\n    }\n\n    if (context.createJavaScriptNode) {\n        jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n    } else if (context.createScriptProcessor) {\n        jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n    } else {\n        throw 'WebAudio API has no support on this browser.';\n    }\n\n    // connect the stream to the script processor\n    audioInput.connect(jsAudioNode);\n\n    if (!config.bufferSize) {\n        bufferSize = jsAudioNode.bufferSize; // device buffer-size\n    }\n\n    /**\n     * The sample rate (in sample-frames per second) at which the\n     * AudioContext handles audio. It is assumed that all AudioNodes\n     * in the context run at this rate. In making this assumption,\n     * sample-rate converters or \"varispeed\" processors are not supported\n     * in real-time processing.\n     * The sampleRate parameter describes the sample-rate of the\n     * linear PCM audio data in the buffer in sample-frames per second.\n     * An implementation must support sample-rates in at least\n     * the range 22050 to 96000.\n     * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder = new StereoAudioRecorder(mediaStream, {\n     *     sampleRate: 44100\n     * });\n     */\n    var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\n\n    if (sampleRate < 22050 || sampleRate > 96000) {\n        // Ref: http://stackoverflow.com/a/26303918/552182\n        if (!config.disableLogs) {\n            console.log('sample-rate must be under range 22050 and 96000.');\n        }\n    }\n\n    if (!config.disableLogs) {\n        if (config.desiredSampRate) {\n            console.log('Desired sample-rate: ' + config.desiredSampRate);\n        }\n    }\n\n    var isPaused = false;\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPaused = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (isMediaStreamActive() === false) {\n            throw 'Please make sure MediaStream is active.';\n        }\n\n        if (!recording) {\n            if (!config.disableLogs) {\n                console.log('Seems recording has been restarted.');\n            }\n            this.record();\n            return;\n        }\n\n        isPaused = false;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        config.checkForInactiveTracks = false;\n\n        if (recording) {\n            this.stop(clearRecordedDataCB);\n        }\n\n        clearRecordedDataCB();\n    };\n\n    function resetVariables() {\n        leftchannel = [];\n        rightchannel = [];\n        recordingLength = 0;\n        isAudioProcessStarted = false;\n        recording = false;\n        isPaused = false;\n        context = null;\n\n        self.leftchannel = leftchannel;\n        self.rightchannel = rightchannel;\n        self.numberOfAudioChannels = numberOfAudioChannels;\n        self.desiredSampRate = desiredSampRate;\n        self.sampleRate = sampleRate;\n        self.recordingLength = recordingLength;\n\n        intervalsBasedBuffers = {\n            left: [],\n            right: [],\n            recordingLength: 0\n        };\n    }\n\n    function clearRecordedDataCB() {\n        if (jsAudioNode) {\n            jsAudioNode.onaudioprocess = null;\n            jsAudioNode.disconnect();\n            jsAudioNode = null;\n        }\n\n        if (audioInput) {\n            audioInput.disconnect();\n            audioInput = null;\n        }\n\n        resetVariables();\n    }\n\n    // for debugging\n    this.name = 'StereoAudioRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n\n    var isAudioProcessStarted = false;\n\n    function onAudioProcessDataAvailable(e) {\n        if (isPaused) {\n            return;\n        }\n\n        if (isMediaStreamActive() === false) {\n            if (!config.disableLogs) {\n                console.log('MediaStream seems stopped.');\n            }\n            jsAudioNode.disconnect();\n            recording = false;\n        }\n\n        if (!recording) {\n            if (audioInput) {\n                audioInput.disconnect();\n                audioInput = null;\n            }\n            return;\n        }\n\n        /**\n         * This method is called on \"onaudioprocess\" event's first invocation.\n         * @method {function} onAudioProcessStarted\n         * @memberof StereoAudioRecorder\n         * @example\n         * recorder.onAudioProcessStarted: function() { };\n         */\n        if (!isAudioProcessStarted) {\n            isAudioProcessStarted = true;\n            if (config.onAudioProcessStarted) {\n                config.onAudioProcessStarted();\n            }\n\n            if (config.initCallback) {\n                config.initCallback();\n            }\n        }\n\n        var left = e.inputBuffer.getChannelData(0);\n\n        // we clone the samples\n        var chLeft = new Float32Array(left);\n        leftchannel.push(chLeft);\n\n        if (numberOfAudioChannels === 2) {\n            var right = e.inputBuffer.getChannelData(1);\n            var chRight = new Float32Array(right);\n            rightchannel.push(chRight);\n        }\n\n        recordingLength += bufferSize;\n\n        // export raw PCM\n        self.recordingLength = recordingLength;\n\n        if (typeof config.timeSlice !== 'undefined') {\n            intervalsBasedBuffers.recordingLength += bufferSize;\n            intervalsBasedBuffers.left.push(chLeft);\n\n            if (numberOfAudioChannels === 2) {\n                intervalsBasedBuffers.right.push(chRight);\n            }\n        }\n    }\n\n    jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\n\n    // to prevent self audio to be connected with speakers\n    if (context.createMediaStreamDestination) {\n        jsAudioNode.connect(context.createMediaStreamDestination());\n    } else {\n        jsAudioNode.connect(context.destination);\n    }\n\n    // export raw PCM\n    this.leftchannel = leftchannel;\n    this.rightchannel = rightchannel;\n    this.numberOfAudioChannels = numberOfAudioChannels;\n    this.desiredSampRate = desiredSampRate;\n    this.sampleRate = sampleRate;\n    self.recordingLength = recordingLength;\n\n    // helper for intervals based blobs\n    var intervalsBasedBuffers = {\n        left: [],\n        right: [],\n        recordingLength: 0\n    };\n\n    // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\n    function looper() {\n        if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\n            return;\n        }\n\n        if (intervalsBasedBuffers.left.length) {\n            mergeLeftRightBuffers({\n                desiredSampRate: desiredSampRate,\n                sampleRate: sampleRate,\n                numberOfAudioChannels: numberOfAudioChannels,\n                internalInterleavedLength: intervalsBasedBuffers.recordingLength,\n                leftBuffers: intervalsBasedBuffers.left,\n                rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\n            }, function(buffer, view) {\n                var blob = new Blob([view], {\n                    type: 'audio/wav'\n                });\n                config.ondataavailable(blob);\n\n                setTimeout(looper, config.timeSlice);\n            });\n\n            intervalsBasedBuffers = {\n                left: [],\n                right: [],\n                recordingLength: 0\n            };\n        } else {\n            setTimeout(looper, config.timeSlice);\n        }\n    }\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\n}\n\n// _________________\n// CanvasRecorder.js\n\n/**\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\n * @summary HTML2Canvas recording into video WebM.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef CanvasRecorder\n * @class\n * @example\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\n * @param {object} config - {disableLogs:true, initCallback: function}\n */\n\nfunction CanvasRecorder(htmlElement, config) {\n    if (typeof html2canvas === 'undefined') {\n        throw 'Please link: https://cdn.webrtc-experiment.com/screenshot.js';\n    }\n\n    config = config || {};\n    if (!config.frameInterval) {\n        config.frameInterval = 10;\n    }\n\n    // via DetectRTC.js\n    var isCanvasSupportsStreamCapturing = false;\n    ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\n        if (item in document.createElement('canvas')) {\n            isCanvasSupportsStreamCapturing = true;\n        }\n    });\n\n    var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\n\n    var chromeVersion = 50;\n    var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n    if (_isChrome && matchArray && matchArray[2]) {\n        chromeVersion = parseInt(matchArray[2], 10);\n    }\n\n    if (_isChrome && chromeVersion < 52) {\n        isCanvasSupportsStreamCapturing = false;\n    }\n\n    if (config.useWhammyRecorder) {\n        isCanvasSupportsStreamCapturing = false;\n    }\n\n    var globalCanvas, mediaStreamRecorder;\n\n    if (isCanvasSupportsStreamCapturing) {\n        if (!config.disableLogs) {\n            console.log('Your browser supports both MediRecorder API and canvas.captureStream!');\n        }\n\n        if (htmlElement instanceof HTMLCanvasElement) {\n            globalCanvas = htmlElement;\n        } else if (htmlElement instanceof CanvasRenderingContext2D) {\n            globalCanvas = htmlElement.canvas;\n        } else {\n            throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\n        }\n    } else if (!!navigator.mozGetUserMedia) {\n        if (!config.disableLogs) {\n            console.error('Canvas recording is NOT supported in Firefox.');\n        }\n    }\n\n    var isRecording;\n\n    /**\n     * This method records Canvas.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        isRecording = true;\n\n        if (isCanvasSupportsStreamCapturing && !config.useWhammyRecorder) {\n            // CanvasCaptureMediaStream\n            var canvasMediaStream;\n            if ('captureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\n            } else if ('mozCaptureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.mozCaptureStream(25);\n            } else if ('webkitCaptureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.webkitCaptureStream(25);\n            }\n\n            try {\n                var mdStream = new MediaStream();\n                mdStream.addTrack(getTracks(canvasMediaStream, 'video')[0]);\n                canvasMediaStream = mdStream;\n            } catch (e) {}\n\n            if (!canvasMediaStream) {\n                throw 'captureStream API are NOT available.';\n            }\n\n            // Note: Jan 18, 2016 status is that,\n            // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\n            mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\n                mimeType: config.mimeType || 'video/webm'\n            });\n            mediaStreamRecorder.record();\n        } else {\n            whammy.frames = [];\n            lastTime = new Date().getTime();\n            drawCanvasFrame();\n        }\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    this.getWebPImages = function(callback) {\n        if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\n            callback();\n            return;\n        }\n\n        var framesLength = whammy.frames.length;\n        whammy.frames.forEach(function(frame, idx) {\n            var framesRemaining = framesLength - idx;\n            if (!config.disableLogs) {\n                console.log(framesRemaining + '/' + framesLength + ' frames remaining');\n            }\n\n            if (config.onEncodingCallback) {\n                config.onEncodingCallback(framesRemaining, framesLength);\n            }\n\n            var webp = frame.image.toDataURL('image/webp', 1);\n            whammy.frames[idx].image = webp;\n        });\n\n        if (!config.disableLogs) {\n            console.log('Generating WebM');\n        }\n\n        callback();\n    };\n\n    /**\n     * This method stops recording Canvas.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isRecording = false;\n\n        var that = this;\n\n        if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\n            mediaStreamRecorder.stop(callback);\n            return;\n        }\n\n        this.getWebPImages(function() {\n            /**\n             * @property {Blob} blob - Recorded frames in video/webm blob.\n             * @memberof CanvasRecorder\n             * @example\n             * recorder.stop(function() {\n             *     var blob = recorder.blob;\n             * });\n             */\n            whammy.compile(function(blob) {\n                if (!config.disableLogs) {\n                    console.log('Recording finished!');\n                }\n\n                that.blob = blob;\n\n                if (that.blob.forEach) {\n                    that.blob = new Blob([], {\n                        type: 'video/webm'\n                    });\n                }\n\n                if (callback) {\n                    callback(that.blob);\n                }\n\n                whammy.frames = [];\n            });\n        });\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\n            mediaStreamRecorder.pause();\n            return;\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\n            mediaStreamRecorder.resume();\n            return;\n        }\n\n        if (!isRecording) {\n            this.record();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (isRecording) {\n            this.stop(clearRecordedDataCB);\n        }\n        clearRecordedDataCB();\n    };\n\n    function clearRecordedDataCB() {\n        whammy.frames = [];\n        isRecording = false;\n        isPausedRecording = false;\n    }\n\n    // for debugging\n    this.name = 'CanvasRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n\n    function cloneCanvas() {\n        //create a new canvas\n        var newCanvas = document.createElement('canvas');\n        var context = newCanvas.getContext('2d');\n\n        //set dimensions\n        newCanvas.width = htmlElement.width;\n        newCanvas.height = htmlElement.height;\n\n        //apply the old canvas to the new one\n        context.drawImage(htmlElement, 0, 0);\n\n        //return the new canvas\n        return newCanvas;\n    }\n\n    function drawCanvasFrame() {\n        if (isPausedRecording) {\n            lastTime = new Date().getTime();\n            return setTimeout(drawCanvasFrame, 500);\n        }\n\n        if (htmlElement.nodeName.toLowerCase() === 'canvas') {\n            var duration = new Date().getTime() - lastTime;\n            // via #206, by Jack i.e. @Seymourr\n            lastTime = new Date().getTime();\n\n            whammy.frames.push({\n                image: cloneCanvas(),\n                duration: duration\n            });\n\n            if (isRecording) {\n                setTimeout(drawCanvasFrame, config.frameInterval);\n            }\n            return;\n        }\n\n        html2canvas(htmlElement, {\n            grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\n            onrendered: function(canvas) {\n                var duration = new Date().getTime() - lastTime;\n                if (!duration) {\n                    return setTimeout(drawCanvasFrame, config.frameInterval);\n                }\n\n                // via #206, by Jack i.e. @Seymourr\n                lastTime = new Date().getTime();\n\n                whammy.frames.push({\n                    image: canvas.toDataURL('image/webp', 1),\n                    duration: duration\n                });\n\n                if (isRecording) {\n                    setTimeout(drawCanvasFrame, config.frameInterval);\n                }\n            }\n        });\n    }\n\n    var lastTime = new Date().getTime();\n\n    var whammy = new Whammy.Video(100);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.CanvasRecorder = CanvasRecorder;\n}\n\n// _________________\n// WhammyRecorder.js\n\n/**\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\n * @summary Video recording feature in Chrome.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef WhammyRecorder\n * @class\n * @example\n * var recorder = new WhammyRecorder(mediaStream);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\n */\n\nfunction WhammyRecorder(mediaStream, config) {\n\n    config = config || {};\n\n    if (!config.frameInterval) {\n        config.frameInterval = 10;\n    }\n\n    if (!config.disableLogs) {\n        console.log('Using frames-interval:', config.frameInterval);\n    }\n\n    /**\n     * This method records video.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (!config.width) {\n            config.width = 320;\n        }\n\n        if (!config.height) {\n            config.height = 240;\n        }\n\n        if (!config.video) {\n            config.video = {\n                width: config.width,\n                height: config.height\n            };\n        }\n\n        if (!config.canvas) {\n            config.canvas = {\n                width: config.width,\n                height: config.height\n            };\n        }\n\n        canvas.width = config.canvas.width || 320;\n        canvas.height = config.canvas.height || 240;\n\n        context = canvas.getContext('2d');\n\n        // setting defaults\n        if (config.video && config.video instanceof HTMLVideoElement) {\n            video = config.video.cloneNode();\n\n            if (config.initCallback) {\n                config.initCallback();\n            }\n        } else {\n            video = document.createElement('video');\n\n            setSrcObject(mediaStream, video);\n\n            video.onloadedmetadata = function() { // \"onloadedmetadata\" may NOT work in FF?\n                if (config.initCallback) {\n                    config.initCallback();\n                }\n            };\n\n            video.width = config.video.width;\n            video.height = config.video.height;\n        }\n\n        video.muted = true;\n        video.play();\n\n        lastTime = new Date().getTime();\n        whammy = new Whammy.Video();\n\n        if (!config.disableLogs) {\n            console.log('canvas resolutions', canvas.width, '*', canvas.height);\n            console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\n        }\n\n        drawFrames(config.frameInterval);\n    };\n\n    /**\n     * Draw and push frames to Whammy\n     * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\n     */\n    function drawFrames(frameInterval) {\n        frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\n\n        var duration = new Date().getTime() - lastTime;\n        if (!duration) {\n            return setTimeout(drawFrames, frameInterval, frameInterval);\n        }\n\n        if (isPausedRecording) {\n            lastTime = new Date().getTime();\n            return setTimeout(drawFrames, 100);\n        }\n\n        // via #206, by Jack i.e. @Seymourr\n        lastTime = new Date().getTime();\n\n        if (video.paused) {\n            // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n            // Tweak for Android Chrome\n            video.play();\n        }\n\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        whammy.frames.push({\n            duration: duration,\n            image: canvas.toDataURL('image/webp')\n        });\n\n        if (!isStopDrawing) {\n            setTimeout(drawFrames, frameInterval, frameInterval);\n        }\n    }\n\n    function asyncLoop(o) {\n        var i = -1,\n            length = o.length;\n\n        (function loop() {\n            i++;\n            if (i === length) {\n                o.callback();\n                return;\n            }\n\n            // \"setTimeout\" added by Jim McLeod\n            setTimeout(function() {\n                o.functionToLoop(loop, i);\n            }, 1);\n        })();\n    }\n\n\n    /**\n     * remove black frames from the beginning to the specified frame\n     * @param {Array} _frames - array of frames to be checked\n     * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\n     * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\n     * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\n     * @returns {Array} - array of frames\n     */\n    // pull#293 by @volodalexey\n    function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\n        var localCanvas = document.createElement('canvas');\n        localCanvas.width = canvas.width;\n        localCanvas.height = canvas.height;\n        var context2d = localCanvas.getContext('2d');\n        var resultFrames = [];\n\n        var checkUntilNotBlack = _framesToCheck === -1;\n        var endCheckFrame = (_framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length) ?\n            _framesToCheck : _frames.length;\n        var sampleColor = {\n            r: 0,\n            g: 0,\n            b: 0\n        };\n        var maxColorDifference = Math.sqrt(\n            Math.pow(255, 2) +\n            Math.pow(255, 2) +\n            Math.pow(255, 2)\n        );\n        var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n        var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n        var doNotCheckNext = false;\n\n        asyncLoop({\n            length: endCheckFrame,\n            functionToLoop: function(loop, f) {\n                var matchPixCount, endPixCheck, maxPixCount;\n\n                var finishImage = function() {\n                    if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\n                        // console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\n                    } else {\n                        // console.log('frame is passed : ' + f);\n                        if (checkUntilNotBlack) {\n                            doNotCheckNext = true;\n                        }\n                        resultFrames.push(_frames[f]);\n                    }\n                    loop();\n                };\n\n                if (!doNotCheckNext) {\n                    var image = new Image();\n                    image.onload = function() {\n                        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n                        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n                        matchPixCount = 0;\n                        endPixCheck = imageData.data.length;\n                        maxPixCount = imageData.data.length / 4;\n\n                        for (var pix = 0; pix < endPixCheck; pix += 4) {\n                            var currentColor = {\n                                r: imageData.data[pix],\n                                g: imageData.data[pix + 1],\n                                b: imageData.data[pix + 2]\n                            };\n                            var colorDifference = Math.sqrt(\n                                Math.pow(currentColor.r - sampleColor.r, 2) +\n                                Math.pow(currentColor.g - sampleColor.g, 2) +\n                                Math.pow(currentColor.b - sampleColor.b, 2)\n                            );\n                            // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n                            if (colorDifference <= maxColorDifference * pixTolerance) {\n                                matchPixCount++;\n                            }\n                        }\n                        finishImage();\n                    };\n                    image.src = _frames[f].image;\n                } else {\n                    finishImage();\n                }\n            },\n            callback: function() {\n                resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\n\n                if (resultFrames.length <= 0) {\n                    // at least one last frame should be available for next manipulation\n                    // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\n                    resultFrames.push(_frames[_frames.length - 1]);\n                }\n                callback(resultFrames);\n            }\n        });\n    }\n\n    var isStopDrawing = false;\n\n    /**\n     * This method stops recording video.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        callback = callback || function() {};\n\n        isStopDrawing = true;\n\n        var _this = this;\n        // analyse of all frames takes some time!\n        setTimeout(function() {\n            // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\n            // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\n            // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\n            dropBlackFrames(whammy.frames, -1, null, null, function(frames) {\n                whammy.frames = frames;\n\n                // to display advertisement images!\n                if (config.advertisement && config.advertisement.length) {\n                    whammy.frames = config.advertisement.concat(whammy.frames);\n                }\n\n                /**\n                 * @property {Blob} blob - Recorded frames in video/webm blob.\n                 * @memberof WhammyRecorder\n                 * @example\n                 * recorder.stop(function() {\n                 *     var blob = recorder.blob;\n                 * });\n                 */\n                whammy.compile(function(blob) {\n                    _this.blob = blob;\n\n                    if (_this.blob.forEach) {\n                        _this.blob = new Blob([], {\n                            type: 'video/webm'\n                        });\n                    }\n\n                    if (callback) {\n                        callback(_this.blob);\n                    }\n                });\n            });\n        }, 10);\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n\n        if (isStopDrawing) {\n            this.record();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (!isStopDrawing) {\n            this.stop(clearRecordedDataCB);\n        }\n        clearRecordedDataCB();\n    };\n\n    function clearRecordedDataCB() {\n        whammy.frames = [];\n        isStopDrawing = true;\n        isPausedRecording = false;\n    }\n\n    // for debugging\n    this.name = 'WhammyRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    var video;\n    var lastTime;\n    var whammy;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.WhammyRecorder = WhammyRecorder;\n}\n\n// https://github.com/antimatter15/whammy/blob/master/LICENSE\n// _________\n// Whammy.js\n\n// todo: Firefox now supports webp for webm containers!\n// their MediaRecorder implementation works well!\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\n\n/**\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\n * @summary A real time javascript webm encoder based on a canvas hack.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef Whammy\n * @class\n * @example\n * var recorder = new Whammy().Video(15);\n * recorder.add(context || canvas || dataURL);\n * var output = recorder.compile();\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\nvar Whammy = (function() {\n    // a more abstract-ish API\n\n    function WhammyVideo(duration) {\n        this.frames = [];\n        this.duration = duration || 1;\n        this.quality = 0.8;\n    }\n\n    /**\n     * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * recorder.add(canvas || context || 'image/webp');\n     * @param {string} frame - Canvas || Context || image/webp\n     * @param {number} duration - Stick a duration (in milliseconds)\n     */\n    WhammyVideo.prototype.add = function(frame, duration) {\n        if ('canvas' in frame) { //CanvasRenderingContext2D\n            frame = frame.canvas;\n        }\n\n        if ('toDataURL' in frame) {\n            frame = frame.toDataURL('image/webp', this.quality);\n        }\n\n        if (!(/^data:image\\/webp;base64,/ig).test(frame)) {\n            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\n        }\n        this.frames.push({\n            image: frame,\n            duration: duration || this.duration\n        });\n    };\n\n    function processInWebWorker(_function) {\n        var blob = URL.createObjectURL(new Blob([_function.toString(),\n            'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\n        ], {\n            type: 'application/javascript'\n        }));\n\n        var worker = new Worker(blob);\n        URL.revokeObjectURL(blob);\n        return worker;\n    }\n\n    function whammyInWebWorker(frames) {\n        function ArrayToWebM(frames) {\n            var info = checkFrames(frames);\n            if (!info) {\n                return [];\n            }\n\n            var clusterMaxDuration = 30000;\n\n            var EBML = [{\n                'id': 0x1a45dfa3, // EBML\n                'data': [{\n                    'data': 1,\n                    'id': 0x4286 // EBMLVersion\n                }, {\n                    'data': 1,\n                    'id': 0x42f7 // EBMLReadVersion\n                }, {\n                    'data': 4,\n                    'id': 0x42f2 // EBMLMaxIDLength\n                }, {\n                    'data': 8,\n                    'id': 0x42f3 // EBMLMaxSizeLength\n                }, {\n                    'data': 'webm',\n                    'id': 0x4282 // DocType\n                }, {\n                    'data': 2,\n                    'id': 0x4287 // DocTypeVersion\n                }, {\n                    'data': 2,\n                    'id': 0x4285 // DocTypeReadVersion\n                }]\n            }, {\n                'id': 0x18538067, // Segment\n                'data': [{\n                    'id': 0x1549a966, // Info\n                    'data': [{\n                        'data': 1e6, //do things in millisecs (num of nanosecs for duration scale)\n                        'id': 0x2ad7b1 // TimecodeScale\n                    }, {\n                        'data': 'whammy',\n                        'id': 0x4d80 // MuxingApp\n                    }, {\n                        'data': 'whammy',\n                        'id': 0x5741 // WritingApp\n                    }, {\n                        'data': doubleToString(info.duration),\n                        'id': 0x4489 // Duration\n                    }]\n                }, {\n                    'id': 0x1654ae6b, // Tracks\n                    'data': [{\n                        'id': 0xae, // TrackEntry\n                        'data': [{\n                            'data': 1,\n                            'id': 0xd7 // TrackNumber\n                        }, {\n                            'data': 1,\n                            'id': 0x73c5 // TrackUID\n                        }, {\n                            'data': 0,\n                            'id': 0x9c // FlagLacing\n                        }, {\n                            'data': 'und',\n                            'id': 0x22b59c // Language\n                        }, {\n                            'data': 'V_VP8',\n                            'id': 0x86 // CodecID\n                        }, {\n                            'data': 'VP8',\n                            'id': 0x258688 // CodecName\n                        }, {\n                            'data': 1,\n                            'id': 0x83 // TrackType\n                        }, {\n                            'id': 0xe0, // Video\n                            'data': [{\n                                'data': info.width,\n                                'id': 0xb0 // PixelWidth\n                            }, {\n                                'data': info.height,\n                                'id': 0xba // PixelHeight\n                            }]\n                        }]\n                    }]\n                }]\n            }];\n\n            //Generate clusters (max duration)\n            var frameNumber = 0;\n            var clusterTimecode = 0;\n            while (frameNumber < frames.length) {\n\n                var clusterFrames = [];\n                var clusterDuration = 0;\n                do {\n                    clusterFrames.push(frames[frameNumber]);\n                    clusterDuration += frames[frameNumber].duration;\n                    frameNumber++;\n                } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\n\n                var clusterCounter = 0;\n                var cluster = {\n                    'id': 0x1f43b675, // Cluster\n                    'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\n                }; //Add cluster to segment\n                EBML[1].data.push(cluster);\n                clusterTimecode += clusterDuration;\n            }\n\n            return generateEBML(EBML);\n        }\n\n        function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\n            return [{\n                'data': clusterTimecode,\n                'id': 0xe7 // Timecode\n            }].concat(clusterFrames.map(function(webp) {\n                var block = makeSimpleBlock({\n                    discardable: 0,\n                    frame: webp.data.slice(4),\n                    invisible: 0,\n                    keyframe: 1,\n                    lacing: 0,\n                    trackNum: 1,\n                    timecode: Math.round(clusterCounter)\n                });\n                clusterCounter += webp.duration;\n                return {\n                    data: block,\n                    id: 0xa3\n                };\n            }));\n        }\n\n        // sums the lengths of all the frames and gets the duration\n\n        function checkFrames(frames) {\n            if (!frames[0]) {\n                postMessage({\n                    error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\n                });\n                return;\n            }\n\n            var width = frames[0].width,\n                height = frames[0].height,\n                duration = frames[0].duration;\n\n            for (var i = 1; i < frames.length; i++) {\n                duration += frames[i].duration;\n            }\n            return {\n                duration: duration,\n                width: width,\n                height: height\n            };\n        }\n\n        function numToBuffer(num) {\n            var parts = [];\n            while (num > 0) {\n                parts.push(num & 0xff);\n                num = num >> 8;\n            }\n            return new Uint8Array(parts.reverse());\n        }\n\n        function strToBuffer(str) {\n            return new Uint8Array(str.split('').map(function(e) {\n                return e.charCodeAt(0);\n            }));\n        }\n\n        function bitsToBuffer(bits) {\n            var data = [];\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\n            bits = pad + bits;\n            for (var i = 0; i < bits.length; i += 8) {\n                data.push(parseInt(bits.substr(i, 8), 2));\n            }\n            return new Uint8Array(data);\n        }\n\n        function generateEBML(json) {\n            var ebml = [];\n            for (var i = 0; i < json.length; i++) {\n                var data = json[i].data;\n\n                if (typeof data === 'object') {\n                    data = generateEBML(data);\n                }\n\n                if (typeof data === 'number') {\n                    data = bitsToBuffer(data.toString(2));\n                }\n\n                if (typeof data === 'string') {\n                    data = strToBuffer(data);\n                }\n\n                var len = data.size || data.byteLength || data.length;\n                var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\n                var sizeToString = len.toString(2);\n                var padded = (new Array((zeroes * 7 + 7 + 1) - sizeToString.length)).join('0') + sizeToString;\n                var size = (new Array(zeroes)).join('0') + '1' + padded;\n\n                ebml.push(numToBuffer(json[i].id));\n                ebml.push(bitsToBuffer(size));\n                ebml.push(data);\n            }\n\n            return new Blob(ebml, {\n                type: 'video/webm'\n            });\n        }\n\n        function toBinStrOld(bits) {\n            var data = '';\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\n            bits = pad + bits;\n            for (var i = 0; i < bits.length; i += 8) {\n                data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\n            }\n            return data;\n        }\n\n        function makeSimpleBlock(data) {\n            var flags = 0;\n\n            if (data.keyframe) {\n                flags |= 128;\n            }\n\n            if (data.invisible) {\n                flags |= 8;\n            }\n\n            if (data.lacing) {\n                flags |= (data.lacing << 1);\n            }\n\n            if (data.discardable) {\n                flags |= 1;\n            }\n\n            if (data.trackNum > 127) {\n                throw 'TrackNumber > 127 not supported';\n            }\n\n            var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function(e) {\n                return String.fromCharCode(e);\n            }).join('') + data.frame;\n\n            return out;\n        }\n\n        function parseWebP(riff) {\n            var VP8 = riff.RIFF[0].WEBP[0];\n\n            var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\n            for (var i = 0, c = []; i < 4; i++) {\n                c[i] = VP8.charCodeAt(frameStart + 3 + i);\n            }\n\n            var width, height, tmp;\n\n            //the code below is literally copied verbatim from the bitstream spec\n            tmp = (c[1] << 8) | c[0];\n            width = tmp & 0x3FFF;\n            tmp = (c[3] << 8) | c[2];\n            height = tmp & 0x3FFF;\n            return {\n                width: width,\n                height: height,\n                data: VP8,\n                riff: riff\n            };\n        }\n\n        function getStrLength(string, offset) {\n            return parseInt(string.substr(offset + 4, 4).split('').map(function(i) {\n                var unpadded = i.charCodeAt(0).toString(2);\n                return (new Array(8 - unpadded.length + 1)).join('0') + unpadded;\n            }).join(''), 2);\n        }\n\n        function parseRIFF(string) {\n            var offset = 0;\n            var chunks = {};\n\n            while (offset < string.length) {\n                var id = string.substr(offset, 4);\n                var len = getStrLength(string, offset);\n                var data = string.substr(offset + 4 + 4, len);\n                offset += 4 + 4 + len;\n                chunks[id] = chunks[id] || [];\n\n                if (id === 'RIFF' || id === 'LIST') {\n                    chunks[id].push(parseRIFF(data));\n                } else {\n                    chunks[id].push(data);\n                }\n            }\n            return chunks;\n        }\n\n        function doubleToString(num) {\n            return [].slice.call(\n                new Uint8Array((new Float64Array([num])).buffer), 0).map(function(e) {\n                return String.fromCharCode(e);\n            }).reverse().join('');\n        }\n\n        var webm = new ArrayToWebM(frames.map(function(frame) {\n            var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\n            webp.duration = frame.duration;\n            return webp;\n        }));\n\n        postMessage(webm);\n    }\n\n    /**\n     * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * recorder.compile(function(blob) {\n     *    // blob.size - blob.type\n     * });\n     */\n    WhammyVideo.prototype.compile = function(callback) {\n        var webWorker = processInWebWorker(whammyInWebWorker);\n\n        webWorker.onmessage = function(event) {\n            if (event.data.error) {\n                console.error(event.data.error);\n                return;\n            }\n            callback(event.data);\n        };\n\n        webWorker.postMessage(this.frames);\n    };\n\n    return {\n        /**\n         * A more abstract-ish API.\n         * @method\n         * @memberof Whammy\n         * @example\n         * recorder = new Whammy().Video(0.8, 100);\n         * @param {?number} speed - 0.8\n         * @param {?number} quality - 100\n         */\n        Video: WhammyVideo\n    };\n})();\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.Whammy = Whammy;\n}\n\n// ______________ (indexed-db)\n// DiskStorage.js\n\n/**\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\n * @summary Writing blobs into IndexedDB.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * DiskStorage.Store({\n *     audioBlob: yourAudioBlob,\n *     videoBlob: yourVideoBlob,\n *     gifBlob  : yourGifBlob\n * });\n * DiskStorage.Fetch(function(dataURL, type) {\n *     if(type === 'audioBlob') { }\n *     if(type === 'videoBlob') { }\n *     if(type === 'gifBlob')   { }\n * });\n * // DiskStorage.dataStoreName = 'recordRTC';\n * // DiskStorage.onError = function(error) { };\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\n * @property {function} Store - This method stores blobs in IndexedDB.\n * @property {function} onError - This function is invoked for any known/unknown error.\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nvar DiskStorage = {\n    /**\n     * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.init();\n     */\n    init: function() {\n        var self = this;\n\n        if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\n            console.error('IndexedDB API are not available in this browser.');\n            return;\n        }\n\n        var dbVersion = 1;\n        var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\n            db;\n        var request = indexedDB.open(dbName, dbVersion);\n\n        function createObjectStore(dataBase) {\n            dataBase.createObjectStore(self.dataStoreName);\n        }\n\n        function putInDB() {\n            var transaction = db.transaction([self.dataStoreName], 'readwrite');\n\n            if (self.videoBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\n            }\n\n            if (self.gifBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\n            }\n\n            if (self.audioBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\n            }\n\n            function getFromStore(portionName) {\n                transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function(event) {\n                    if (self.callback) {\n                        self.callback(event.target.result, portionName);\n                    }\n                };\n            }\n\n            getFromStore('audioBlob');\n            getFromStore('videoBlob');\n            getFromStore('gifBlob');\n        }\n\n        request.onerror = self.onError;\n\n        request.onsuccess = function() {\n            db = request.result;\n            db.onerror = self.onError;\n\n            if (db.setVersion) {\n                if (db.version !== dbVersion) {\n                    var setVersion = db.setVersion(dbVersion);\n                    setVersion.onsuccess = function() {\n                        createObjectStore(db);\n                        putInDB();\n                    };\n                } else {\n                    putInDB();\n                }\n            } else {\n                putInDB();\n            }\n        };\n        request.onupgradeneeded = function(event) {\n            createObjectStore(event.target.result);\n        };\n    },\n    /**\n     * This method fetches stored blobs from IndexedDB.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.Fetch(function(dataURL, type) {\n     *     if(type === 'audioBlob') { }\n     *     if(type === 'videoBlob') { }\n     *     if(type === 'gifBlob')   { }\n     * });\n     */\n    Fetch: function(callback) {\n        this.callback = callback;\n        this.init();\n\n        return this;\n    },\n    /**\n     * This method stores blobs in IndexedDB.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.Store({\n     *     audioBlob: yourAudioBlob,\n     *     videoBlob: yourVideoBlob,\n     *     gifBlob  : yourGifBlob\n     * });\n     */\n    Store: function(config) {\n        this.audioBlob = config.audioBlob;\n        this.videoBlob = config.videoBlob;\n        this.gifBlob = config.gifBlob;\n\n        this.init();\n\n        return this;\n    },\n    /**\n     * This function is invoked for any known/unknown error.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.onError = function(error){\n     *     alerot( JSON.stringify(error) );\n     * };\n     */\n    onError: function(error) {\n        console.error(JSON.stringify(error, null, '\\t'));\n    },\n\n    /**\n     * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.dataStoreName = 'recordRTC';\n     */\n    dataStoreName: 'recordRTC',\n    dbName: null\n};\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.DiskStorage = DiskStorage;\n}\n\n// ______________\n// GifRecorder.js\n\n/**\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GifRecorder\n * @class\n * @example\n * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     img.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\n */\n\nfunction GifRecorder(mediaStream, config) {\n    if (typeof GIFEncoder === 'undefined') {\n        var script = document.createElement('script');\n        script.src = 'https://cdn.webrtc-experiment.com/gif-recorder.js';\n        (document.body || document.documentElement).appendChild(script);\n    }\n\n    config = config || {};\n\n    var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (typeof GIFEncoder === 'undefined') {\n            setTimeout(self.record, 1000);\n            return;\n        }\n\n        if (!isLoadedMetaData) {\n            setTimeout(self.record, 1000);\n            return;\n        }\n\n        if (!isHTMLObject) {\n            if (!config.width) {\n                config.width = video.offsetWidth || 320;\n            }\n\n            if (!config.height) {\n                config.height = video.offsetHeight || 240;\n            }\n\n            if (!config.video) {\n                config.video = {\n                    width: config.width,\n                    height: config.height\n                };\n            }\n\n            if (!config.canvas) {\n                config.canvas = {\n                    width: config.width,\n                    height: config.height\n                };\n            }\n\n            canvas.width = config.canvas.width || 320;\n            canvas.height = config.canvas.height || 240;\n\n            video.width = config.video.width || 320;\n            video.height = config.video.height || 240;\n        }\n\n        // external library to record as GIF images\n        gifEncoder = new GIFEncoder();\n\n        // void setRepeat(int iter)\n        // Sets the number of times the set of GIF frames should be played.\n        // Default is 1; 0 means play indefinitely.\n        gifEncoder.setRepeat(0);\n\n        // void setFrameRate(Number fps)\n        // Sets frame rate in frames per second.\n        // Equivalent to setDelay(1000/fps).\n        // Using \"setDelay\" instead of \"setFrameRate\"\n        gifEncoder.setDelay(config.frameRate || 200);\n\n        // void setQuality(int quality)\n        // Sets quality of color quantization (conversion of images to the\n        // maximum 256 colors allowed by the GIF specification).\n        // Lower values (minimum = 1) produce better colors,\n        // but slow processing significantly. 10 is the default,\n        // and produces good color mapping at reasonable speeds.\n        // Values greater than 20 do not yield significant improvements in speed.\n        gifEncoder.setQuality(config.quality || 10);\n\n        // Boolean start()\n        // This writes the GIF Header and returns false if it fails.\n        gifEncoder.start();\n\n        if (typeof config.onGifRecordingStarted === 'function') {\n            config.onGifRecordingStarted();\n        }\n\n        startTime = Date.now();\n\n        function drawVideoFrame(time) {\n            if (self.clearedRecordedData === true) {\n                return;\n            }\n\n            if (isPausedRecording) {\n                return setTimeout(function() {\n                    drawVideoFrame(time);\n                }, 100);\n            }\n\n            lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n            if (typeof lastFrameTime === undefined) {\n                lastFrameTime = time;\n            }\n\n            // ~10 fps\n            if (time - lastFrameTime < 90) {\n                return;\n            }\n\n            if (!isHTMLObject && video.paused) {\n                // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n                // Tweak for Android Chrome\n                video.play();\n            }\n\n            if (!isHTMLObject) {\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\n            }\n\n            if (config.onGifPreview) {\n                config.onGifPreview(canvas.toDataURL('image/png'));\n            }\n\n            gifEncoder.addFrame(context);\n            lastFrameTime = time;\n        }\n\n        lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     img.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        callback = callback || function() {};\n\n        if (lastAnimationFrame) {\n            cancelAnimationFrame(lastAnimationFrame);\n        }\n\n        endTime = Date.now();\n\n        /**\n         * @property {Blob} blob - The recorded blob object.\n         * @memberof GifRecorder\n         * @example\n         * recorder.stop(function(){\n         *     var blob = recorder.blob;\n         * });\n         */\n        this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\n            type: 'image/gif'\n        });\n\n        callback(this.blob);\n\n        // bug: find a way to clear old recorded blobs\n        gifEncoder.stream().bin = [];\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        self.clearedRecordedData = true;\n        clearRecordedDataCB();\n    };\n\n    function clearRecordedDataCB() {\n        if (gifEncoder) {\n            gifEncoder.stream().bin = [];\n        }\n    }\n\n    // for debugging\n    this.name = 'GifRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    if (isHTMLObject) {\n        if (mediaStream instanceof CanvasRenderingContext2D) {\n            context = mediaStream;\n            canvas = context.canvas;\n        } else if (mediaStream instanceof HTMLCanvasElement) {\n            context = mediaStream.getContext('2d');\n            canvas = mediaStream;\n        }\n    }\n\n    var isLoadedMetaData = true;\n\n    if (!isHTMLObject) {\n        var video = document.createElement('video');\n        video.muted = true;\n        video.autoplay = true;\n\n        isLoadedMetaData = false;\n        video.onloadedmetadata = function() {\n            isLoadedMetaData = true;\n        };\n\n        setSrcObject(mediaStream, video);\n\n        video.play();\n    }\n\n    var lastAnimationFrame = null;\n    var startTime, endTime, lastFrameTime;\n\n    var gifEncoder;\n\n    var self = this;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.GifRecorder = GifRecorder;\n}\n\n// Last time updated: 2018-12-22 9:13:29 AM UTC\n\n// ________________________\n// MultiStreamsMixer v1.0.7\n\n// Open-Sourced: https://github.com/muaz-khan/MultiStreamsMixer\n\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\nfunction MultiStreamsMixer(arrayOfMediaStreams) {\n\n    // requires: chrome://flags/#enable-experimental-web-platform-features\n\n    var videos = [];\n    var isStopDrawingFrames = false;\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    canvas.style = 'opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;';\n    (document.body || document.documentElement).appendChild(canvas);\n\n    this.disableLogs = false;\n    this.frameInterval = 10;\n\n    this.width = 360;\n    this.height = 240;\n\n    // use gain node to prevent echo\n    this.useGainNode = true;\n\n    var self = this;\n\n    // _____________________________\n    // Cross-Browser-Declarations.js\n\n    // WebAudio API representer\n    var AudioContext = window.AudioContext;\n\n    if (typeof AudioContext === 'undefined') {\n        if (typeof webkitAudioContext !== 'undefined') {\n            /*global AudioContext:true */\n            AudioContext = webkitAudioContext;\n        }\n\n        if (typeof mozAudioContext !== 'undefined') {\n            /*global AudioContext:true */\n            AudioContext = mozAudioContext;\n        }\n    }\n\n    /*jshint -W079 */\n    var URL = window.URL;\n\n    if (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n        /*global URL:true */\n        URL = webkitURL;\n    }\n\n    if (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\n        if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n            navigator.getUserMedia = navigator.webkitGetUserMedia;\n        }\n\n        if (typeof navigator.mozGetUserMedia !== 'undefined') {\n            navigator.getUserMedia = navigator.mozGetUserMedia;\n        }\n    }\n\n    var MediaStream = window.MediaStream;\n\n    if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n        MediaStream = webkitMediaStream;\n    }\n\n    /*global MediaStream:true */\n    if (typeof MediaStream !== 'undefined') {\n        // override \"stop\" method for all browsers\n        if (typeof MediaStream.prototype.stop === 'undefined') {\n            MediaStream.prototype.stop = function() {\n                this.getTracks().forEach(function(track) {\n                    track.stop();\n                });\n            };\n        }\n    }\n\n    var Storage = {};\n\n    if (typeof AudioContext !== 'undefined') {\n        Storage.AudioContext = AudioContext;\n    } else if (typeof webkitAudioContext !== 'undefined') {\n        Storage.AudioContext = webkitAudioContext;\n    }\n\n    function setSrcObject(stream, element) {\n        if ('srcObject' in element) {\n            element.srcObject = stream;\n        } else if ('mozSrcObject' in element) {\n            element.mozSrcObject = stream;\n        } else {\n            element.srcObject = stream;\n        }\n    }\n\n    this.startDrawingFrames = function() {\n        drawVideosToCanvas();\n    };\n\n    function drawVideosToCanvas() {\n        if (isStopDrawingFrames) {\n            return;\n        }\n\n        var videosLength = videos.length;\n\n        var fullcanvas = false;\n        var remaining = [];\n        videos.forEach(function(video) {\n            if (!video.stream) {\n                video.stream = {};\n            }\n\n            if (video.stream.fullcanvas) {\n                fullcanvas = video;\n            } else {\n                remaining.push(video);\n            }\n        });\n\n        if (fullcanvas) {\n            canvas.width = fullcanvas.stream.width;\n            canvas.height = fullcanvas.stream.height;\n        } else if (remaining.length) {\n            canvas.width = videosLength > 1 ? remaining[0].width * 2 : remaining[0].width;\n\n            var height = 1;\n            if (videosLength === 3 || videosLength === 4) {\n                height = 2;\n            }\n            if (videosLength === 5 || videosLength === 6) {\n                height = 3;\n            }\n            if (videosLength === 7 || videosLength === 8) {\n                height = 4;\n            }\n            if (videosLength === 9 || videosLength === 10) {\n                height = 5;\n            }\n            canvas.height = remaining[0].height * height;\n        } else {\n            canvas.width = self.width || 360;\n            canvas.height = self.height || 240;\n        }\n\n        if (fullcanvas && fullcanvas instanceof HTMLVideoElement) {\n            drawImage(fullcanvas);\n        }\n\n        remaining.forEach(function(video, idx) {\n            drawImage(video, idx);\n        });\n\n        setTimeout(drawVideosToCanvas, self.frameInterval);\n    }\n\n    function drawImage(video, idx) {\n        if (isStopDrawingFrames) {\n            return;\n        }\n\n        var x = 0;\n        var y = 0;\n        var width = video.width;\n        var height = video.height;\n\n        if (idx === 1) {\n            x = video.width;\n        }\n\n        if (idx === 2) {\n            y = video.height;\n        }\n\n        if (idx === 3) {\n            x = video.width;\n            y = video.height;\n        }\n\n        if (idx === 4) {\n            y = video.height * 2;\n        }\n\n        if (idx === 5) {\n            x = video.width;\n            y = video.height * 2;\n        }\n\n        if (idx === 6) {\n            y = video.height * 3;\n        }\n\n        if (idx === 7) {\n            x = video.width;\n            y = video.height * 3;\n        }\n\n        if (typeof video.stream.left !== 'undefined') {\n            x = video.stream.left;\n        }\n\n        if (typeof video.stream.top !== 'undefined') {\n            y = video.stream.top;\n        }\n\n        if (typeof video.stream.width !== 'undefined') {\n            width = video.stream.width;\n        }\n\n        if (typeof video.stream.height !== 'undefined') {\n            height = video.stream.height;\n        }\n\n        context.drawImage(video, x, y, width, height);\n\n        if (typeof video.stream.onRender === 'function') {\n            video.stream.onRender(context, x, y, width, height, idx);\n        }\n    }\n\n    function getMixedStream() {\n        isStopDrawingFrames = false;\n        var mixedVideoStream = getMixedVideoStream();\n\n        var mixedAudioStream = getMixedAudioStream();\n        if (mixedAudioStream) {\n            mixedAudioStream.getTracks().filter(function(t) {\n                return t.kind === 'audio';\n            }).forEach(function(track) {\n                mixedVideoStream.addTrack(track);\n            });\n        }\n\n        var fullcanvas;\n        arrayOfMediaStreams.forEach(function(stream) {\n            if (stream.fullcanvas) {\n                fullcanvas = true;\n            }\n        });\n\n        return mixedVideoStream;\n    }\n\n    function getMixedVideoStream() {\n        resetVideoStreams();\n\n        var capturedStream;\n\n        if ('captureStream' in canvas) {\n            capturedStream = canvas.captureStream();\n        } else if ('mozCaptureStream' in canvas) {\n            capturedStream = canvas.mozCaptureStream();\n        } else if (!self.disableLogs) {\n            console.error('Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features');\n        }\n\n        var videoStream = new MediaStream();\n\n        capturedStream.getTracks().filter(function(t) {\n            return t.kind === 'video';\n        }).forEach(function(track) {\n            videoStream.addTrack(track);\n        });\n\n        canvas.stream = videoStream;\n\n        return videoStream;\n    }\n\n    function getMixedAudioStream() {\n        // via: @pehrsons\n        if (!Storage.AudioContextConstructor) {\n            Storage.AudioContextConstructor = new Storage.AudioContext();\n        }\n\n        self.audioContext = Storage.AudioContextConstructor;\n\n        self.audioSources = [];\n\n        if (self.useGainNode === true) {\n            self.gainNode = self.audioContext.createGain();\n            self.gainNode.connect(self.audioContext.destination);\n            self.gainNode.gain.value = 0; // don't hear self\n        }\n\n        var audioTracksLength = 0;\n        arrayOfMediaStreams.forEach(function(stream) {\n            if (!stream.getTracks().filter(function(t) {\n                    return t.kind === 'audio';\n                }).length) {\n                return;\n            }\n\n            audioTracksLength++;\n\n            var audioSource = self.audioContext.createMediaStreamSource(stream);\n\n            if (self.useGainNode === true) {\n                audioSource.connect(self.gainNode);\n            }\n\n            self.audioSources.push(audioSource);\n        });\n\n        if (!audioTracksLength) {\n            return;\n        }\n\n        self.audioDestination = self.audioContext.createMediaStreamDestination();\n        self.audioSources.forEach(function(audioSource) {\n            audioSource.connect(self.audioDestination);\n        });\n        return self.audioDestination.stream;\n    }\n\n    function getVideo(stream) {\n        var video = document.createElement('video');\n\n        setSrcObject(stream, video);\n\n        video.muted = true;\n        video.volume = 0;\n\n        video.width = stream.width || self.width || 360;\n        video.height = stream.height || self.height || 240;\n\n        video.play();\n\n        return video;\n    }\n\n    this.appendStreams = function(streams) {\n        if (!streams) {\n            throw 'First parameter is required.';\n        }\n\n        if (!(streams instanceof Array)) {\n            streams = [streams];\n        }\n\n        arrayOfMediaStreams.concat(streams);\n\n        streams.forEach(function(stream) {\n            if (stream.getTracks().filter(function(t) {\n                    return t.kind === 'video';\n                }).length) {\n                var video = getVideo(stream);\n                video.stream = stream;\n                videos.push(video);\n            }\n\n            if (stream.getTracks().filter(function(t) {\n                    return t.kind === 'audio';\n                }).length && self.audioContext) {\n                var audioSource = self.audioContext.createMediaStreamSource(stream);\n                audioSource.connect(self.audioDestination);\n                self.audioSources.push(audioSource);\n            }\n        });\n    };\n\n    this.releaseStreams = function() {\n        videos = [];\n        isStopDrawingFrames = true;\n\n        if (self.gainNode) {\n            self.gainNode.disconnect();\n            self.gainNode = null;\n        }\n\n        if (self.audioSources.length) {\n            self.audioSources.forEach(function(source) {\n                source.disconnect();\n            });\n            self.audioSources = [];\n        }\n\n        if (self.audioDestination) {\n            self.audioDestination.disconnect();\n            self.audioDestination = null;\n        }\n\n        if (self.audioContext) {\n            self.audioContext.close();\n        }\n\n        self.audioContext = null;\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        if (canvas.stream) {\n            canvas.stream.stop();\n            canvas.stream = null;\n        }\n    };\n\n    this.resetVideoStreams = function(streams) {\n        if (streams && !(streams instanceof Array)) {\n            streams = [streams];\n        }\n\n        resetVideoStreams(streams);\n    };\n\n    function resetVideoStreams(streams) {\n        videos = [];\n        streams = streams || arrayOfMediaStreams;\n\n        // via: @adrian-ber\n        streams.forEach(function(stream) {\n            if (!stream.getTracks().filter(function(t) {\n                    return t.kind === 'video';\n                }).length) {\n                return;\n            }\n\n            var video = getVideo(stream);\n            video.stream = stream;\n            videos.push(video);\n        });\n    }\n\n    // for debugging\n    this.name = 'MultiStreamsMixer';\n    this.toString = function() {\n        return this.name;\n    };\n\n    this.getMixedStream = getMixedStream;\n\n}\n\n// ______________________\n// MultiStreamRecorder.js\n\n/*\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\n */\n\n/**\n * MultiStreamRecorder can record multiple videos in single container.\n * @summary Multi-videos recorder.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MultiStreamRecorder\n * @class\n * @example\n * var options = {\n *     mimeType: 'video/webm'\n * }\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\n * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: \"video/webm\"}\n */\n\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\n    arrayOfMediaStreams = arrayOfMediaStreams || [];\n    var self = this;\n\n    var mixer;\n    var mediaRecorder;\n\n    options = options || {\n        mimeType: 'video/webm',\n        video: {\n            width: 360,\n            height: 240\n        }\n    };\n\n    if (!options.frameInterval) {\n        options.frameInterval = 10;\n    }\n\n    if (!options.video) {\n        options.video = {};\n    }\n\n    if (!options.video.width) {\n        options.video.width = 360;\n    }\n\n    if (!options.video.height) {\n        options.video.height = 240;\n    }\n\n    /**\n     * This method records all MediaStreams.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        // github/muaz-khan/MultiStreamsMixer\n        mixer = new MultiStreamsMixer(arrayOfMediaStreams);\n\n        if (getAllVideoTracks().length) {\n            mixer.frameInterval = options.frameInterval || 10;\n            mixer.width = options.video.width || 360;\n            mixer.height = options.video.height || 240;\n            mixer.startDrawingFrames();\n        }\n\n        if (options.previewStream && typeof options.previewStream === 'function') {\n            options.previewStream(mixer.getMixedStream());\n        }\n\n        // record using MediaRecorder API\n        mediaRecorder = new MediaStreamRecorder(mixer.getMixedStream(), options);\n        mediaRecorder.record();\n    };\n\n    function getAllVideoTracks() {\n        var tracks = [];\n        arrayOfMediaStreams.forEach(function(stream) {\n            getTracks(stream, 'video').forEach(function(track) {\n                tracks.push(track);\n            });\n        });\n        return tracks;\n    }\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        mediaRecorder.stop(function(blob) {\n            self.blob = blob;\n\n            callback(blob);\n\n            self.clearRecordedData();\n        });\n    };\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        if (mediaRecorder) {\n            mediaRecorder.pause();\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (mediaRecorder) {\n            mediaRecorder.resume();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (mediaRecorder) {\n            mediaRecorder.clearRecordedData();\n            mediaRecorder = null;\n        }\n\n        if (mixer) {\n            mixer.releaseStreams();\n            mixer = null;\n        }\n    };\n\n    /**\n     * Add extra media-streams to existing recordings.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\n     * @example\n     * recorder.addStreams([newAudioStream, newVideoStream]);\n     */\n    this.addStreams = function(streams) {\n        if (!streams) {\n            throw 'First parameter is required.';\n        }\n\n        if (!(streams instanceof Array)) {\n            streams = [streams];\n        }\n\n        arrayOfMediaStreams.concat(streams);\n\n        if (!mediaRecorder || !mixer) {\n            return;\n        }\n\n        mixer.appendStreams(streams);\n    };\n\n    /**\n     * Reset videos during live recording. Replace old videos e.g. replace cameras with full-screen.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\n     * @example\n     * recorder.resetVideoStreams([newVideo1, newVideo2]);\n     */\n    this.resetVideoStreams = function(streams) {\n        if (!mixer) {\n            return;\n        }\n\n        if (streams && !(streams instanceof Array)) {\n            streams = [streams];\n        }\n\n        mixer.resetVideoStreams(streams);\n    };\n\n    // for debugging\n    this.name = 'MultiStreamRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\n}\n\n// _____________________\n// RecordRTC.promises.js\n\n/**\n * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}\n * @summary Promises for {@link RecordRTC}\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTCPromisesHandler\n * @class\n * @example\n * var recorder = new RecordRTCPromisesHandler(mediaStream, options);\n * recorder.startRecording()\n *         .then(successCB)\n *         .catch(errorCB);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n * @throws Will throw an error if \"new\" keyword is not used to initiate \"RecordRTCPromisesHandler\". Also throws error if first argument \"MediaStream\" is missing.\n * @requires {@link RecordRTC}\n */\n\nfunction RecordRTCPromisesHandler(mediaStream, options) {\n    if (!this) {\n        throw 'Use \"new RecordRTCPromisesHandler()\"';\n    }\n\n    if (typeof mediaStream === 'undefined') {\n        throw 'First argument \"MediaStream\" is required.';\n    }\n\n    var self = this;\n\n    /**\n     * @property {Blob} blob - Access/reach the native {@link RecordRTC} object.\n     * @memberof RecordRTCPromisesHandler\n     * @example\n     * var internal = recorder.recordRTC.getInternalRecorder();\n     * alert(internal instanceof MediaStreamRecorder);\n     */\n    self.recordRTC = new RecordRTC(mediaStream, options);\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof RecordRTCPromisesHandler\n     * @example\n     * recorder.startRecording()\n     *         .then(successCB)\n     *         .catch(errorCB);\n     */\n    this.startRecording = function() {\n        return new Promise(function(resolve, reject) {\n            try {\n                self.recordRTC.startRecording();\n                resolve();\n            } catch (e) {\n                reject(e);\n            }\n        });\n    };\n\n    /**\n     * This method stops the recording.\n     * @method\n     * @memberof RecordRTCPromisesHandler\n     * @example\n     * recorder.stopRecording().then(function() {\n     *     var blob = recorder.getBlob();\n     * }).catch(errorCB);\n     */\n    this.stopRecording = function() {\n        return new Promise(function(resolve, reject) {\n            try {\n                self.recordRTC.stopRecording(function(url) {\n                    self.blob = self.recordRTC.getBlob();\n\n                    if (!self.blob || !self.blob.size) {\n                        reject('Empty blob.', self.blob);\n                        return;\n                    }\n\n                    resolve(url);\n                });\n            } catch (e) {\n                reject(e);\n            }\n        });\n    };\n\n    /**\n     * This method returns data-url for the recorded blob.\n     * @method\n     * @memberof RecordRTCPromisesHandler\n     * @example\n     * recorder.stopRecording().then(function() {\n     *     recorder.getDataURL().then(function(dataURL) {\n     *         window.open(dataURL);\n     *     }).catch(errorCB);;\n     * }).catch(errorCB);\n     */\n    this.getDataURL = function(callback) {\n        return new Promise(function(resolve, reject) {\n            try {\n                self.recordRTC.getDataURL(function(dataURL) {\n                    resolve(dataURL);\n                });\n            } catch (e) {\n                reject(e);\n            }\n        });\n    };\n\n    /**\n     * This method returns the recorded blob.\n     * @method\n     * @memberof RecordRTCPromisesHandler\n     * @example\n     * recorder.stopRecording().then(function() {\n     *     recorder.getBlob().then(function(blob) {})\n     * }).catch(errorCB);\n     */\n    this.getBlob = function() {\n        return new Promise(function(resolve, reject) {\n            try {\n                resolve(self.recordRTC.getBlob());\n            } catch (e) {\n                reject(e);\n            }\n        });\n    };\n\n    /**\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\n     * @memberof RecordRTCPromisesHandler\n     * @example\n     * recorder.stopRecording().then(function() {\n     *     var blob = recorder.getBlob();\n     * }).catch(errorCB);\n     */\n    this.blob = null;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler;\n}\n\n// ______________________\n// WebAssemblyRecorder.js\n\n/**\n * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.\n * @summary Video recording feature in Chrome, Firefox and maybe Edge.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef WebAssemblyRecorder\n * @class\n * @example\n * var recorder = new WebAssemblyRecorder(mediaStream);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024}\n */\nfunction WebAssemblyRecorder(stream, config) {\n    // based on: github.com/GoogleChromeLabs/webm-wasm\n\n    if (typeof ReadableStream === 'undefined' || typeof WritableStream === 'undefined') {\n        // because it fixes readable/writable streams issues\n        console.error('Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js');\n    }\n\n    config = config || {};\n\n    config.width = config.width || 640;\n    config.height = config.height || 480;\n    config.frameRate = config.frameRate || 30;\n    config.bitrate = config.bitrate || 1200;\n\n    function createBufferURL(buffer, type) {\n        return URL.createObjectURL(new Blob([buffer], {\n            type: type || ''\n        }));\n    }\n\n    function cameraStream() {\n        return new ReadableStream({\n            start: function(controller) {\n                var cvs = document.createElement('canvas');\n                var video = document.createElement('video');\n                video.srcObject = stream;\n                video.onplaying = function() {\n                    cvs.width = config.width;\n                    cvs.height = config.height;\n                    var ctx = cvs.getContext('2d');\n                    var frameTimeout = 1000 / config.frameRate;\n                    setTimeout(function f() {\n                        ctx.drawImage(video, 0, 0);\n                        controller.enqueue(\n                            ctx.getImageData(0, 0, config.width, config.height)\n                        );\n                        setTimeout(f, frameTimeout);\n                    }, frameTimeout);\n                };\n                video.play();\n            }\n        });\n    }\n\n    var worker;\n\n    function startRecording(stream, buffer) {\n        if (!config.workerPath && !buffer) {\n            // is it safe to use @latest ?\n            fetch(\n                'https://unpkg.com/webm-wasm@latest/dist/webm-worker.js'\n            ).then(function(r) {\n                r.arrayBuffer().then(function(buffer) {\n                    startRecording(stream, buffer);\n                });\n            });\n            return;\n        }\n\n        if (!config.workerPath && buffer instanceof ArrayBuffer) {\n            var blob = new Blob([buffer], {\n                type: 'text/javascript'\n            });\n            config.workerPath = URL.createObjectURL(blob);\n        }\n\n        if (!config.workerPath) {\n            console.error('workerPath parameter is missing.');\n        }\n\n        worker = new Worker(config.workerPath);\n\n        worker.postMessage(config.webAssemblyPath || 'https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm');\n        worker.addEventListener('message', function(event) {\n            if (event.data === 'READY') {\n                worker.postMessage({\n                    width: config.width,\n                    height: config.height,\n                    bitrate: config.bitrate || 1200,\n                    timebaseDen: config.frameRate || 30,\n                    realtime: true\n                });\n\n                cameraStream().pipeTo(new WritableStream({\n                    write: function(image) {\n                        if (!worker) {\n                            return;\n                        }\n\n                        worker.postMessage(image.data.buffer, [image.data.buffer]);\n                    }\n                }));\n            } else if (!!event.data) {\n                if (!isPaused) {\n                    arrayOfBuffers.push(event.data);\n                }\n            }\n        });\n    }\n\n    /**\n     * This method records video.\n     * @method\n     * @memberof WebAssemblyRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        arrayOfBuffers = [];\n        isPaused = false;\n        this.blob = null;\n        startRecording(stream);\n\n        if (typeof config.initCallback === 'function') {\n            config.initCallback();\n        }\n    };\n\n    var isPaused;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof WebAssemblyRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPaused = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof WebAssemblyRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPaused = false;\n    };\n\n    function terminate() {\n        if (!worker) {\n            return;\n        }\n\n        worker.postMessage(null);\n        worker.terminate();\n        worker = null;\n    }\n\n    var arrayOfBuffers = [];\n\n    /**\n     * This method stops recording video.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof WebAssemblyRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        terminate();\n\n        this.blob = new Blob(arrayOfBuffers, {\n            type: 'video/webm'\n        });\n\n        callback(this.blob);\n    };\n\n    // for debugging\n    this.name = 'WebAssemblyRecorder';\n    this.toString = function() {\n        return this.name;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof WebAssemblyRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        arrayOfBuffers = [];\n        isPaused = false;\n        this.blob = null;\n\n        // todo: if recording-ON then STOP it first\n    };\n\n    /**\n     * @property {Blob} blob - The recorded blob object.\n     * @memberof WebAssemblyRecorder\n     * @example\n     * recorder.stop(function(){\n     *     var blob = recorder.blob;\n     * });\n     */\n    this.blob = null;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.WebAssemblyRecorder = WebAssemblyRecorder;\n}\n","import './messenger.html';\r\nimport { User } from '/imports/api/user/user.js';\r\nimport { Message } from '/imports/api/messages/messages.js';\r\nimport { Video } from '/imports/api/video/video.js';\r\nimport { GroupMessage } from '/imports/api/groupMessenger/groupMessage.js';\r\nimport { ReactiveVar } from 'meteor/reactive-var';\r\nimport './RecordRTC.js';\r\n\r\nconst selectedUser = new ReactiveVar(undefined);\r\nconst searchUser = new ReactiveVar(\"\");\r\n\r\nTemplate.App_messenger.onCreated(function(){\r\n  var self = this;\r\n  self.autorun(function() {\r\n    Meteor.subscribe('users');\r\n    Meteor.subscribe('messages');\r\n    Meteor.subscribe('groupMessage');\r\n  });\r\n});\r\nTemplate.App_messenger.helpers({\r\n  getUsers(){\r\n    var user_id = Session.get('u_l');\r\n    if(!user_id) return [];\r\n    var keywords = searchUser.get();\r\n    var query = {\r\n      _id : {$ne: user_id},\r\n      name : new RegExp('.*'+keywords+'.*', 'i')\r\n    };\r\n    return User.find(query);\r\n  },\r\n  startup(){\r\n    Status.setTemplate('semantic_ui')\r\n  },\r\n\r\n  getUserById(id){\r\n    return User.findOne({_id : id});\r\n  },\r\n  getMessages(){\r\n    var user_id = Session.get('u_l');\r\n    if(!user_id) return [];\r\n    var query = {\r\n      $and : [\r\n        {$or : [{sid : user_id}, {rid : user_id}]}\r\n      ]\r\n    };\r\n    var _selected_user = selectedUser.get();\r\n    if(_selected_user) _selected_user = _selected_user[0];\r\n    if(!_selected_user){\r\n      var fst = User.findOne({_id : {$ne: user_id}});\r\n      if(fst) _selected_user= fst._id;\r\n    }\r\n    if(_selected_user) query.$and.push({$or : [{sid : _selected_user}, {rid : _selected_user}]});\r\n    Meteor.setTimeout(function(){\r\n      jQuery(\".msg-wrap\").stop().animate({scrollTop:jQuery(\".msg-wrap\")[0].scrollHeight}, 500, 'swing');\r\n    }, 500);\r\n    return Message.find(query);\r\n  },\r\n  getLines(message){\r\n    return message.split('\\n');\r\n  },\r\n  isFile(type){\r\n    return type == \"files\";\r\n  },\r\n  isImage(message){\r\n    return /.+(png|jpg|jpeg|gif)/ig.test(message);\r\n  },\r\n\r\n  viewMessage(rid, message_id, viewed){\r\n    var user_id = Session.get('u_l');\r\n    if(user_id === rid && !viewed){\r\n      Meteor.call(\"message.update\", message_id, {viewed : true}, function(){\r\n        jQuery(\"#audio\")[0].play();\r\n        jQuery(\".msg-wrap\").stop().animate({scrollTop:jQuery(\".msg-wrap\")[0].scrollHeight}, 500, 'swing');\r\n      })\r\n    }\r\n  },\r\n  result(){\r\n    return Collection.find({\r\n      name : Session.get('name')\r\n    })\r\n  }\r\n});\r\n\r\nTemplate.App_messenger.events({\r\n  \"click #logout\"(evt) {\r\n    evt.preventDefault();\r\n    Session.clear('u_l')\r\n    return FlowRouter.go(\"/\");\r\n  },\r\n  \"click #send-message\"(evt, template){\r\n    evt.preventDefault();\r\n    var selected_user_id = jQuery(\"#users\").val();\r\n    var group = false;\r\n\r\n    if(selected_user_id.length>1){\r\n      //multiple (group)\r\n      var _group = GroupMessage.findOne({users : _.sortBy(selected_user_id).join(\"-\")});\r\n      if (_group) group = _group._id;\r\n    }\r\n    else selected_user_id = selected_user_id[0]; //single user message\r\n\r\n    var message = jQuery(\"#message\").val();\r\n    var sender_id = Session.get('u_l');\r\n    var upload = jQuery(\"#upload\")[0].files;\r\n    if(!sender_id ||!selected_user_id) return ;\r\n    var update = jQuery(\"#send-message\").attr('update');\r\n    if(update && update!=\"\"){\r\n      Meteor.call(\"message.update\", update, {message:message});\r\n    }\r\n    else{\r\n      var type = \"text\";\r\n      if(upload.length){\r\n        type = \"files\";\r\n        message = [];\r\n        Array.from(upload).forEach(function(file){\r\n          uploadFile(file);\r\n          message.push(file.name);\r\n        });\r\n        message = message.join(\";\");\r\n      }\r\n      if(group){\r\n        selected_user_id.forEach(function(uid){\r\n          Meteor.call(\"message.insert\", sender_id, uid, message, type, group);\r\n        });\r\n      }\r\n      else Meteor.call(\"message.insert\", sender_id, selected_user_id, message,type, false);\r\n    }\r\n    jQuery(\"#message\").val('');\r\n    jQuery(\"#send-message\").text('Send');\r\n    jQuery(\"#send-message\").removeAttr('update');\r\n  },\r\n  \"click .remove\"(){\r\n    Meteor.call('message.remove',this._id);\r\n  },\r\n  \"change #users\"(evt){\r\n      selectedUser.set(jQuery(\"#users\").val());\r\n  },\r\n  \"keyup #message\"(evt){\r\n    if (!evt.enterKey && (evt.keyCode === 13 || evt.which === 13)){\r\n      jQuery(\"#send-message\").click();\r\n      evt.preventDefault();\r\n    }\r\n  },\r\n  \"keyup #search\"(evt){\r\n    if (!evt.shiftKey && (evt.keyCode === 13 || evt.which === 13)){\r\n      jQuery(\"#submit\").click();\r\n      evt.preventDefault();\r\n    }\r\n  },\r\n    \"click .update\"(){\r\n    jQuery(\"#message\").val(this.message);\r\n    jQuery(\"#send-message\").text('Update');\r\n    jQuery(\"#send-message\").attr('update', this._id);\r\n  },\r\n  \"click .submit\"(){\r\n    searchUser.set(jQuery(\".search\").val());\r\n  },\r\n  \"click .recordbutton\"(){\r\n    var session = {\r\n      audio: true,\r\n      video: true,\r\n    };\r\n\r\n    navigator.getUserMedia = ( navigator.getUserMedia    || navigator.webkitGetUserMedia ||\r\n                           navigator.mozGetUserMedia ||navigator.msGetUserMedia);\r\n    var aCtx;\r\n    var analyser;\r\n    var microphone;\r\n    var video = document.querySelector('video');\r\n    var streamRecorder;\r\n    var webcamstream;\r\n    if (navigator.getUserMedia) {\r\n        navigator.getUserMedia({audio: true, video:true}, function(stream) {\r\n            aCtx = new AudioContext();\r\n            analyser = aCtx.createAnalyser();\r\n            microphone = aCtx.createMediaStreamSource(stream);\r\n            microphone.connect(analyser);\r\n            analyser.connect(aCtx.destination);\r\n        }, function (){console.warn(\"Error getting audio stream from getUserMedia\")});\r\n    };\r\n  }\r\n});\r\n\r\nfunction uploadFile(file){\r\n  var formData = new FormData();\r\n  formData.append(\"file\", file, file.name);\r\n  jQuery.ajax({\r\n    type: \"POST\",\r\n    url:\"http://172.16.1.143:3333/upload\",\r\n    success: function (data) {\r\n    jQuery(\"#upload[type=file]\").val(\"\");\r\n    },\r\n    error: function (error) {},\r\n    async: true,\r\n    data: formData,\r\n    cache: false,\r\n    contentType: false,\r\n    processData: false,\r\n    timeout: 60000,\r\n  });\r\n}\r\n// window.URL = window.URL || window.webkitURL;\r\n// navigator.getUserMedia  = navigator.getUserMedia ||\r\n//                          navigator.webkitGetUserMedia ||\r\n//                           navigator.mozGetUserMedia ||\r\n//                            navigator.msGetUserMedia;\r\n//\r\n// var video = document.querySelector('video');\r\n// var streamRecorder;\r\n// var webcamstream;\r\n//\r\n// if (navigator.getUserMedia) {\r\n//   navigator.getUserMedia({audio: true, video: true}, function(stream) {\r\n//     video.src = window.URL.createObjectURL(stream);\r\n//     webcamstream = stream;\r\n// //  streamrecorder = webcamstream.record();\r\n//   }, onVideoFail);\r\n// } else {\r\n//     alert ('failed');\r\n// }\r\n//\r\n// function startRecording() {\r\n//     streamRecorder = webcamstream.record();\r\n//     setTimeout(stopRecording, 10000);\r\n// }\r\n// function stopRecording() {\r\n//     streamRecorder.getRecordedData(postVideoToServer);\r\n// }\r\n// function postVideoToServer(videoblob) {\r\n//\r\n//     var data = {};\r\n//     data.video = videoblob;\r\n//     data.metadata = 'test metadata';\r\n//     data.action = \"upload_video\";\r\n//     jQuery.post(\"http://www.foundthru.co.uk/uploadvideo.php\", data, onUploadSuccess);\r\n// }\r\n// function onUploadSuccess() {\r\n//     alert ('video uploaded');\r\n// }\r\n//\r\n","import './page.html';\r\nimport { User } from '/imports/api/user/user.js';\r\nimport { ReactiveVar } from 'meteor/reactive-var';\r\nimport { Template } from 'meteor/templating';\r\nimport Tabular from 'meteor/aldeed:tabular';\r\nimport moment from 'moment';\r\nimport dataTablesBootstrap from 'datatables.net-bs';\r\nimport './dataTables.bootstrap4.min.js';\r\nimport './dataTables.foundation.min.js';\r\nimport './dataTables.jqueryui.min.js';\r\nimport './dataTables.semanticui.min.js';\r\nimport './jquery.dataTables.min.js';\r\n\r\nconst searchUser = new ReactiveVar(\"\");\r\n\r\nTemplate.App_page2.onCreated(function(){\r\n  var self = this;\r\n  self.autorun(function() {\r\n    Meteor.subscribe('users');\r\n  })\r\n  });\r\n\r\nTemplate.App_page2.onRendered(function(){\r\n  Meteor.setTimeout(function(){\r\n    $(document).ready(function() {\r\n        $('table').DataTable( {\r\n            \"order\": [[ 3, \"desc\" ]]\r\n        } );\r\n    } );\r\n    $(function () {\r\n      $('#table').on('click', 'th', function () {\r\n        var index = $(this).index(),\r\n        rows = [],\r\n        thClass = $(this).hasClass('asc') ? 'desc' : 'asc';\r\n\r\n        $('#table th').removeClass('asc desc');\r\n        $(this).addClass(thClass);\r\n\r\n        $('#table tbody tr').each(function (index, row) {\r\n          rows.push($(row).detach());\r\n        });\r\n\r\n        rows.sort(function (a, b) {\r\n          var aValue = $(a).find('td').eq(index).text(),\r\n          bValue = $(b).find('td').eq(index).text();\r\n\r\n          return aValue > bValue ?\r\n          1 :\r\n          aValue < bValue ?\r\n          -1 :\r\n          0;\r\n        });\r\n\r\n        if ($(this).hasClass('desc')) {\r\n          rows.reverse();\r\n        }\r\n\r\n        $.each(rows, function (index, row) {\r\n          $('#table tbody').append(row);\r\n        });\r\n      });\r\n    });\r\n  },400);\r\n});\r\n\r\nTemplate.App_page2.helpers({\r\n  getUsers(){\r\n\r\n    var user_id = Session.get('u_l');\r\n    if(!user_id) return [];\r\n    var keywords = searchUser.get();\r\n    var query = {\r\n      _id : {$ne: user_id},\r\n      name : new RegExp('.*'+keywords+'.*', 'i')\r\n    };\r\n    return User.find(query);\r\n  }\r\n});\r\n\r\nTemplate.App_page2.events({\r\n\"click .send\"(){\r\n  var from = \"from@mailinator.com\";\r\n  var subject = $(`#subject`).val();\r\n  var text = $(`#ymsg`).val();\r\n  var to = $(`#to`).val();\r\n  Meteor.call('email.send',to,subject, text,function(err,result){\r\n    if(!err){\r\n      console.log(result);\r\n    }\r\n    else {\r\n      console.log('there is an error');\r\n    }\r\n  });\r\n},\r\n  \"click .remove\"(){\r\n    confirm(\"Delete this Record?\");\r\n    Meteor.call('user.remove',this._id);\r\n  },\r\n\r\n  \"click .update\"(){\r\n    var name = $(`.input-${this._id}`).val();\r\n    Meteor.call('user.update',this._id,{name :name});\r\n  },\r\n\r\n  \"click .changEPassword\"(){\r\n    var newPassword =  $(`.passwords-${this._id}`).val();\r\n    Meteor.call('user.changePassword',this._id,this.password,newPassword, function(err,result){\r\n    if(!err){\r\n      console.log('Your password is change');\r\n    }\r\n    else {\r\n      console.log('there is an error');\r\n    }\r\n  })\r\n},\r\n\"click .changephone\"(){\r\n  var phone =  $(`.phone-${this._id}`).val();\r\n  Meteor.call('user.update',this._id,{phone:phone});\r\n},\r\n\"click .changeemail\"(){\r\n  var email =  $(`.emails-${this._id}`).val();\r\n  Meteor.call('user.update',this._id,{email:email});\r\n},\r\n\"click #logout\"(evt) {\r\n  evt.preventDefault();\r\n  Session.clear('u_l')\r\n  return FlowRouter.go(\"/\");\r\n},\r\n\"click .save\"(){\r\n  var name =  $(`.namee`).val();\r\n  var password =  $(`.passwordd`).val();\r\n  var phone =  $(`.phone`).val();\r\n  var email =  $(`.email`).val();\r\n  Meteor.call('user.insert',name,password,phone,email,function(err,result){\r\n    if(!err){\r\n      console.log(result);\r\n    }\r\n    else {\r\n      console.log('there is an error');\r\n    }\r\n  });\r\n}\r\n// ,\r\n// \"click .submit\"(){\r\n//   searchUser.set(jQuery(\".search\").val());\r\n// }\r\n});\r\n","import './main.html';\r\nimport { User } from '/imports/api/user/user.js';\r\nimport { ReactiveVar } from 'meteor/reactive-var';\r\n\r\nwindow.reactVar = new ReactiveVar(0);\r\n\r\nTemplate.App_Main.onCreated(function(){\r\n  var self = this;\r\n});\r\n\r\nTemplate.App_Main.helpers({\r\n  isLoggedIn(){\r\n    return Session.get('u_l');\r\n  }\r\n});\r\n\r\nTemplate.App_Main.events({\r\n  \"click .login\"(evt, template){\r\n    var name = jQuery(\"#username\").val();\r\n    var password = jQuery(\"#password\").val();\r\n    Meteor.call('Login',name, password, function(error, response){\r\n      console.log(error,response);\r\n      if(!error && response){\r\n        Session.setPersistent(\"u_l\", response);\r\n      }\r\n    })\r\n  },\r\n  \"click .save\"(){\r\n    var name =  $(`.namee`).val();\r\n    var lsname =  $(`.lsname`).val();\r\n    var password =  $(`.passwordd`).val();\r\n    var phone =  $(`.phone`).val();\r\n    var email =  $(`.email`).val();\r\n    Meteor.call('user.insert',name,lsname,password,phone,email,function(err,result){\r\n      if(!err){\r\n        console.log(result);\r\n      }\r\n      else {\r\n        console.log('there is an error');\r\n      }\r\n    });\r\n  },\r\n  \"click .forgotPassword\"(){\r\n\r\n  }\r\n});\r\n","import { Meteor } from 'meteor/meteor';\r\nimport { Mongo } from 'meteor/mongo';\r\n\r\nexport const GroupMessage = new Mongo.Collection('groupMessage');\r\n\r\nif (Meteor.isServer){\r\n  Meteor.publish('groupMessage',function(){\r\n    return GroupMessage.find();\r\n  })\r\n}\r\n\r\nMeteor.methods({\r\n  \"groupMessage.insert\"(name,users){\r\n    const uid = GroupMessage.insert({\r\n      name:name,\r\n      users : users,\r\n      options : {},\r\n      created_at:moment().valueOf()\r\n    });\r\n    return uid;\r\n  }\r\n});\r\n","import { Meteor } from 'meteor/meteor';\r\nimport { Mongo } from 'meteor/mongo';\r\nexport const Message = new Mongo.Collection('message');\r\nif (Meteor.isServer){\r\n  Meteor.publish('messages',function(){\r\n    return Message.find();\r\n  })\r\n}\r\n\r\nMeteor.methods({\r\n  \"message.insert\"(sid,rid,message,type,group){\r\n    const uid = Message.insert({\r\n      sid:sid,\r\n      rid:rid,\r\n      group:group,\r\n      message : message,\r\n      viewed : false,\r\n      type:type,\r\n      // last_login:moment().valueOf(),\r\n      created_at:moment().valueOf()\r\n    });\r\n    return uid;\r\n  },\r\n  \"message.remove\"(messageId){\r\n    return Message.remove(messageId);\r\n  },\r\n  \"message.update\"(messageId,update){\r\n    return Message.update(messageId,{$set:update});\r\n  }\r\n});\r\n","import { Meteor } from 'meteor/meteor';\r\nimport { Mongo } from 'meteor/mongo';\r\nexport const User = new Mongo.Collection('user');\r\nif (Meteor.isServer){\r\n  Meteor.publish('users',function(){\r\n    return User.find();\r\n  })\r\n}\r\n\r\nMeteor.methods({\r\n  \"user.insert\"(name,lastName,password,phone,email){\r\n    const uid = User.insert({\r\n      name:name,\r\n      lastName:lastName,\r\n      password:password,\r\n      phone : phone,\r\n      email : email,\r\n      created_at:moment().valueOf(),\r\n      last_login:moment().valueOf()\r\n    });\r\n    return uid;\r\n  },\r\n  \"user.remove\"(userId){\r\n    return User.remove(userId);\r\n  },\r\n  \"user.update\"(userId,update){\r\n    return User.update(userId,{$set:update});\r\n  },\r\n  \"user.changePassword\"(userId,oldPassword,newPassword){\r\n    var user = User.findOne({\r\n      _id : userId,\r\n      password : oldPassword\r\n    });\r\n    if (user) {\r\n      return User.update(userId,{$set:{\r\n        password:newPassword\r\n      }});\r\n    }\r\n  }\r\n});\r\n","// import { Meteor } from 'meteor/meteor';\r\n// import { Mongo } from 'meteor/mongo';\r\n// export const Video = new Mongo.Collection('video');\r\n//\r\n// if (Meteor.isServer){\r\n//   Meteor.publish('video',function(){\r\n//     return Video.find();\r\n//   })\r\n//   }\r\n// Meteor.methods({\r\n//   \"video.insert\"(sid,rid,message,type){\r\n//     const uid = Video.insert({\r\n//       sid:sid,\r\n//       rid:rid,\r\n//       message:message,\r\n//       viewed : false,\r\n//       type:type,\r\n//       });\r\n//     return uid;\r\n//   },\r\n//   \"video.remove\"(videoId){\r\n//     return Video.remove(videoId);\r\n//   },\r\n//   \"video.update\"(videoId,update){\r\n//     return Video.update(videoId,{$set:update});\r\n//   }\r\n// });\r\nimport { Video } from '/imports/api/video/video.js';\r\n\r\n\r\nTemplate.App_video.onRendered(function() {\r\n\r\n\tWebcam.on( 'error', function(err) {\r\n\t\tconsole.log(err); // outputs error to console instead of window.alert\r\n\t});\r\n\r\n\tWebcam.set({\r\n\t\twidth: 320,\r\n\t\theight: 240,\r\n\t\tdest_width: 640,\r\n\t\tdest_height: 480,\r\n\t\timage_format: 'jpeg',\r\n\t\tjpeg_quality: 90\r\n\t});\r\n\tWebcam.attach( '#webcam' );\r\n})\r\n\r\nTemplate.App_video.events({\r\n\t'click .snap': function () {\r\n\t\tWebcam.snap( function(image) {\r\n\t\t\tSession.set('webcamSnap', image);\r\n\t\t})\r\n\t}\r\n});\r\n\r\nTemplate.App_video.helpers({\r\n\timage: function () {\r\n\t\treturn Session.get('webcamSnap');\r\n\t}\r\n});\r\n","Template.registerHelper(\"parseDate\", function(timestamp) {\r\n  return moment(timestamp).format('YYYY-MM-DD HH:mm:ss');\r\n});\r\nTemplate.registerHelper(\"isMe\", function(id) {\r\n  return Session.get('u_l') == id;\r\n});\r\n","import \"./route.js\";\r\n","import '../../ui/layout/body/body.js';\r\n\r\nimport '../../ui/pages/main/main.js';\r\nimport '../../ui/pages/page2/page2.js';\r\nimport '../../ui/pages/messenger/messenger.js';\r\nimport '../../ui/pages/forgotPassword/password.js';\r\nimport '../../ui/pages/this/this.js';\r\n\r\nFlowRouter.route('/', {\r\n  action : function(){\r\n    BlazeLayout.render('App_Body', { Body: 'App_Main' });\r\n  }\r\n});\r\nFlowRouter.route('/page2', {\r\n  action : function(){\r\n    BlazeLayout.render('App_Body', { Body: 'App_page2' });\r\n  }\r\n});\r\nFlowRouter.route('/messenger', {\r\n  action : function(){\r\n    BlazeLayout.render('App_Body', { Body: 'App_messenger' });\r\n  }\r\n});\r\nFlowRouter.route('/password', {\r\n  action : function(){\r\n    BlazeLayout.render('App_Body', { Body: 'App_password' });\r\n  }\r\n});\r\nFlowRouter.route('/video', {\r\n  action : function(){\r\n    BlazeLayout.render('App_Body', { Body: 'App_video' });\r\n  }\r\n});\r\n","import '/imports/startup/client';\nimport '/imports/startup/client/globalHelpers.js';\nimport { $ } from 'meteor/jquery';\nimport dataTablesBootstrap from 'datatables.net-bs';\nimport 'datatables.net-bs/css/dataTables.bootstrap.css';\ndataTablesBootstrap(window, $);\nimport '/imports/ui/pages/page2/dataTables.bootstrap4.min.js';\nimport '/imports/ui/pages/page2/dataTables.foundation.min.js';\nimport '/imports/ui/pages/page2/dataTables.jqueryui.min.js';\nimport '/imports/ui/pages/page2/dataTables.semanticui.min.js';\nimport '/imports/ui/pages/page2/jquery.dataTables.min.js';\n"]}}]